{"ast":null,"code":"var _jsxFileName = \"/home/mani/projects/jobportal/webapp/candidateportal/src/systemSecurity/ConfirmOtp.js\";\nimport React, { Component } from 'react';\nimport swal from 'sweetalert';\nimport $ from \"jquery\";\nimport jQuery from 'jquery';\nimport axios from 'axios';\nimport './SignUp.css';\n\nclass ConfirmOtp extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      showMessage: false\n    };\n  }\n\n  componentDidMount() {\n    $.validator.addMethod(\"regxemailotp\", function (value, element, regexpr) {\n      return regexpr.test(value);\n    }, \"Please enter valid OTP.\");\n    jQuery.validator.setDefaults({\n      debug: true,\n      success: \"valid\"\n    });\n    $(\"#OTPMobMail\").validate({\n      rules: {\n        emailotp: {\n          required: true,\n          regxemailotp: /^[1-9][0-9]{3}$/\n        }\n      },\n      errorPlacement: function (error, element) {\n        if (element.attr(\"name\") == \"emailotp\") {\n          error.insertAfter(\"#emailotp\");\n        }\n      }\n    }); //==================================\n\n    var userid = this.props.match.params.userID;\n    console.log('userid==', userid);\n    axios.get('/api/users/get/' + userid).then(response => {\n      console.log('userInfo==', response.data);\n      this.setState({\n        // companyID : comId,\n        // companyName : response.data.companyName,\n        // vendor_Id : response.data._id,\n        'firstName': response.data.firstname,\n        'lastName': response.data.lastname,\n        'contactNo': response.data.mobile,\n        'phone': response.data.mobile,\n        'email': response.data.email,\n        // \"departmentName\"  : response.data.department,\n        // \"designationName\" : response.data.designation,\n        // \"states\"          : response.data.states,\n        // \"address\"         : [{\n        //                     \"city\"        : response.data.cityName,\n        //                     \"state\"          : response.data.states,\n        // }],\n        \"companyID\": response.data.companyID,\n        \"company_Id\": response.data._id,\n        \"companyName\": response.data.companyName,\n        \"userId\": userid\n      }, () => {\n        axios.get('/api/entitymaster/getCompany/' + this.state.companyID).then(response => {\n          console.log('companyName==', response.data);\n          this.setState({\n            companyName: response.data.companyName,\n            vendor_Id: response.data._id\n          });\n        }).catch(error => {});\n      });\n    }).catch(error => {});\n  }\n\n  confirmOTP(event) {\n    event.preventDefault();\n    var url = this.props.match.params;\n    var formValues = {\n      \"user_ID\": this.props.match.params.userID,\n      \"emailOTP\": parseInt(this.refs.emailotp.value),\n      \"status\": \"Active\"\n    }; //========person master===============\n\n    var contactDetailspersonmaster = {\n      'firstName': this.state.firstName,\n      'lastName': this.state.lastName,\n      'contactNo': this.state.contactNo,\n      'phone': this.state.phone,\n      'email': this.state.email,\n      \"departmentName\": this.state.department,\n      \"designationName\": this.state.designation,\n      \"states\": this.state.states,\n      // \"address\"         : [{\n      //                     \"city\"        : this.state.cityName,\n      //                     \"state\"          : this.state.states,\n      // }],\n      \"companyID\": this.state.companyID,\n      \"company_Id\": this.state.company_Id,\n      \"companyName\": this.state.companyName,\n      \"type\": \"employee\",\n      \"entityType\": \"vendor\",\n      \"userId\": this.props.match.params.userID,\n      \"status\": \"Active\"\n    };\n    console.log(\"mastercontactDetailspersonmaster\", contactDetailspersonmaster);\n    var formValues = {\n      'entityID': this.state.vendor_Id,\n      'contactDetails': {\n        'firstName': this.state.firstName,\n        'lastName': this.state.lastName,\n        'phone': this.state.phone,\n        'email': this.state.email,\n        'departmentName': this.state.departmentName,\n        'designationName': this.state.designationName\n      }\n    }; //====================================\n\n    if ($(\"#OTPMobMail\").valid()) {\n      axios.get('/api/auth/get/checkemailotp/usingID/' + this.props.match.params.userID + '/' + this.refs.emailotp.value).then(response => {\n        if (response.data.message == 'SUCCESS') {\n          swal('OTP Verified Successfully.');\n          var url = localStorage.getItem('previousUrl');\n\n          if (url == 'forgotpassword') {\n            localStorage.removeItem(\"previousUrl\");\n            this.props.history.push('/reset-pwd/' + this.props.match.params.userID);\n          } else {\n            localStorage.removeItem(\"previousUrl\");\n            this.props.history.push('/login'); //================================\n\n            axios.post('/api/personmaster/post', contactDetailspersonmaster).then(response => {\n              console.log('in result Res data==>>>', response.data);\n              axios.patch('/api/entitymaster/patch/addContact', formValues).then(response => {\n                console.log('in result Res data==>>>', response.data);\n              }).catch(error => {});\n            }).catch(error => {}); //================================\n          }\n        } else {\n          swal('Please enter valid OTP.');\n        }\n      }).catch(error => {\n        swal(error.response.data.message);\n      });\n    }\n  }\n\n  inputEffect(event) {\n    event.preventDefault();\n\n    if ($(event.target).val() != \"\") {\n      $(event.target).addClass(\"has-content\");\n    } else {\n      $(event.target).removeClass(\"has-content\");\n    }\n  }\n\n  resendOtp(event) {\n    document.getElementById(\"resendOtpBtn\").innerHTML = 'Please wait...';\n    const userid = this.props.match.params.userID;\n    var formValues = {\n      \"emailSubject\": \"Email Verification\",\n      \"emailContent\": \"As part of our registration process, we screen every new profile to ensure its credibility by validating email provided by user. While screening the profile, we verify that details put in by user are correct and genuine.\"\n    };\n    axios.patch('/api/auth/patch/setsendemailotpusingID/' + userid, formValues).then(response => {\n      document.getElementById(\"resendOtpBtn\").innerHTML = 'Resend OTP';\n      swal(\"OTP send to your registered email ID.\");\n    }).catch(error => {\n      swal(\" Failed to resent OTP\");\n      document.getElementById(\"resendOtpBtn\").innerHTML = 'Resend OTP';\n    });\n  }\n\n  Closepagealert(event) {\n    event.preventDefault();\n    $(\".toast-error\").html('');\n    $(\".toast-success\").html('');\n    $(\".toast-info\").html('');\n    $(\".toast-warning\").html('');\n    $(\".toast-error\").removeClass('toast');\n    $(\".toast-success\").removeClass('toast');\n    $(\".toast-info\").removeClass('toast');\n    $(\".toast-warning\").removeClass('toast');\n  }\n\n  render() {\n    var resendOtpWrap = \"resendOtpWrap resendOtpWrapcss\";\n    var mobileEmail = 'Mobile Number';\n    var resendOtp = \"\";\n    return React.createElement(\"div\", {\n      style: {\n        'height': window.innerHeight + 'px',\n        'width': window.innerWidth + 'px'\n      },\n      className: \"col-lg-12 col-md-12 col-sm-12 col-xs-12 LoginWrapper\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 221\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"col-lg-12 col-md-12 col-sm-12 col-xs-12 innloginwrap\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 222\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"col-lg-12 col-md-12 col-sm-12 col-xs-12 mt100 mb100\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 224\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"col-lg-4 col-lg-offset-7 col-md-4 col-md-offset-7 col-sm-12 col-xs-12 formShadow\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 225\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"col-lg-12 col-md-12 col-sm-12 col-xs-12\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 227\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"col-lg-12 col-md-12 col-sm-12 col-xs-12 innloginwrap mb25\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 229\n      },\n      __self: this\n    }, React.createElement(\"h3\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 230\n      },\n      __self: this\n    }, \"Confirm OTP\")), this.state.showMessage == false ? React.createElement(\"div\", {\n      className: \"col-lg-12 col-md-12 col-sm-12 col-xs-12\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 234\n      },\n      __self: this\n    }, React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 235\n      },\n      __self: this\n    }, \"We send you a Verification Code to your registered email \"), React.createElement(\"div\", {\n      className: \"\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 236\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 237\n      },\n      __self: this\n    }, \"Enter verification code received on email.\", React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 237\n      },\n      __self: this\n    }))), React.createElement(\"form\", {\n      id: \"OTPMobMail\",\n      className: \"textAlignLeft\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 239\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 240\n      },\n      __self: this\n    }, React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 242\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"input-group \",\n      id: \"emailotp\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 243\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      type: \"text\",\n      className: \"form-control\",\n      ref: \"emailotp\",\n      name: \"emailotp\",\n      placeholder: \"Enter OTP\",\n      onBlur: this.inputEffect.bind(this),\n      \"aria-describedby\": \"basic-addon1\",\n      maxLength: \"4\",\n      pattern: \"(0|[0-9]*)\",\n      required: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 244\n      },\n      __self: this\n    }), React.createElement(\"span\", {\n      className: \"input-group-addon glyphi-custommm\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 245\n      },\n      __self: this\n    }, React.createElement(\"i\", {\n      className: \"fa fa-key\",\n      \"aria-hidden\": \"true\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 245\n      },\n      __self: this\n    })))), React.createElement(\"div\", {\n      className: \"loginforgotpass mt25\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 248\n      },\n      __self: this\n    }, React.createElement(\"lable\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 249\n      },\n      __self: this\n    }, \"Already have an account?\"), \"\\xA0\", React.createElement(\"a\", {\n      href: \"/login\",\n      className: \"\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 249\n      },\n      __self: this\n    }, \"Sign In \", React.createElement(\"b\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 249\n      },\n      __self: this\n    }, \"\\u21FE\"))), React.createElement(\"div\", {\n      className: \"mt30 col-lg-12 mb25\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 251\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"col-lg-6\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 252\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      id: \"resendOtpBtn\",\n      onClick: this.resendOtp.bind(this),\n      className: \"col-lg-12 btn  systemsecBtn\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 253\n      },\n      __self: this\n    }, \"Resend OTP\")), React.createElement(\"div\", {\n      className: \"col-lg-6\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 257\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      type: \"submit\",\n      onClick: this.confirmOTP.bind(this),\n      className: \"col-lg-12 btn loginBtn systemsecBtn\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 258\n      },\n      __self: this\n    }, \"Submit\"))))) : React.createElement(\"div\", {\n      className: \"col-lg-12 col-md-12 col-sm-12 col-xs-12\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 264\n      },\n      __self: this\n    }, React.createElement(\"p\", {\n      className: \"textAlignCenter\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 265\n      },\n      __self: this\n    }, \"Your Account is verified successfully! Please Sign In to access your account.\", React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 265\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"col-lg-12 col-md-12 col-sm-12 col-xs-12 mt15\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 266\n      },\n      __self: this\n    }, React.createElement(\"a\", {\n      href: \"/login\",\n      className: \"col-lg-6 col-lg-offset-3 col-md-6 col-md-offset-3 col-sm-12 col-xs-12 button3  btn btn-warning  signupbtn\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 267\n      },\n      __self: this\n    }, \"Sign In\")))))));\n  }\n\n}\n\nexport default ConfirmOtp;","map":{"version":3,"sources":["/home/mani/projects/jobportal/webapp/candidateportal/src/systemSecurity/ConfirmOtp.js"],"names":["React","Component","swal","$","jQuery","axios","ConfirmOtp","constructor","props","state","showMessage","componentDidMount","validator","addMethod","value","element","regexpr","test","setDefaults","debug","success","validate","rules","emailotp","required","regxemailotp","errorPlacement","error","attr","insertAfter","userid","match","params","userID","console","log","get","then","response","data","setState","firstname","lastname","mobile","email","companyID","_id","companyName","vendor_Id","catch","confirmOTP","event","preventDefault","url","formValues","parseInt","refs","contactDetailspersonmaster","firstName","lastName","contactNo","phone","department","designation","states","company_Id","departmentName","designationName","valid","message","localStorage","getItem","removeItem","history","push","post","patch","inputEffect","target","val","addClass","removeClass","resendOtp","document","getElementById","innerHTML","Closepagealert","html","render","resendOtpWrap","mobileEmail","window","innerHeight","innerWidth","bind"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport swal from 'sweetalert';\nimport $ from \"jquery\";\nimport jQuery from 'jquery';\nimport axios from 'axios';\nimport './SignUp.css';\n\nclass ConfirmOtp extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      showMessage: false\n    }\n  }\n  componentDidMount() {\n    $.validator.addMethod(\"regxemailotp\", function (value, element, regexpr) {\n      return regexpr.test(value);\n    }, \"Please enter valid OTP.\");\n\n    jQuery.validator.setDefaults({\n      debug: true,\n      success: \"valid\"\n    });\n\n    $(\"#OTPMobMail\").validate({\n      rules: {\n        emailotp: {\n          required: true,\n          regxemailotp: /^[1-9][0-9]{3}$/,\n        },\n      },\n      errorPlacement: function (error, element) {\n        if (element.attr(\"name\") == \"emailotp\") {\n          error.insertAfter(\"#emailotp\");\n        }\n      }\n    });\n    //==================================\n    var userid = this.props.match.params.userID;\n    console.log('userid==',userid)\n\n    axios.get('/api/users/get/'+userid)\n    .then((response) => {\n      console.log('userInfo==',response.data)\n\n      this.setState({\n              // companyID : comId,\n              // companyName : response.data.companyName,\n              // vendor_Id : response.data._id,\n              'firstName'       : response.data.firstname,\n              'lastName'        : response.data.lastname,\n              'contactNo'       : response.data.mobile,\n              'phone'           : response.data.mobile,\n              'email'           : response.data.email,\n              // \"departmentName\"  : response.data.department,\n              // \"designationName\" : response.data.designation,\n              // \"states\"          : response.data.states,\n              // \"address\"         : [{\n              //                     \"city\"        : response.data.cityName,\n              //                     \"state\"          : response.data.states,\n\n              // }],\n              \"companyID\"       : response.data.companyID,\n              \"company_Id\"      : response.data._id,\n              \"companyName\"     : response.data.companyName,\n              \"userId\"          : userid,\n            },()=>{\n\n                axios.get('/api/entitymaster/getCompany/'+this.state.companyID)\n                .then((response) => {\n                  console.log('companyName==',response.data)\n\n                  this.setState({\n                          companyName : response.data.companyName,\n                          vendor_Id : response.data._id,\n                        })\n                })\n                .catch((error) => {\n                })\n            })\n    })\n    .catch((error) => {\n    })\n\n  }\n  confirmOTP(event) {\n    event.preventDefault();\n    var url = this.props.match.params;\n    var formValues = {\n      \"user_ID\": this.props.match.params.userID,\n      \"emailOTP\": parseInt(this.refs.emailotp.value),\n      \"status\": \"Active\"\n    }\n    //========person master===============\n\n      var contactDetailspersonmaster   = {\n                            \n          'firstName'       : this.state.firstName,\n          'lastName'        : this.state.lastName,\n          'contactNo'       : this.state.contactNo,\n          'phone'           : this.state.phone,\n          'email'           : this.state.email,\n          \"departmentName\"  : this.state.department,\n          \"designationName\" : this.state.designation,\n          \"states\"          : this.state.states,\n          // \"address\"         : [{\n          //                     \"city\"        : this.state.cityName,\n          //                     \"state\"          : this.state.states,\n\n          // }],\n          \"companyID\"       : this.state.companyID,\n          \"company_Id\"      : this.state.company_Id,\n          \"companyName\"     : this.state.companyName,\n          \"type\"            : \"employee\",\n          \"entityType\"      : \"vendor\",\n          \"userId\"          : this.props.match.params.userID,\n          \"status\"          : \"Active\",\n      }\n    console.log(\"mastercontactDetailspersonmaster\",contactDetailspersonmaster)\n      var formValues = {\n        'entityID'            : this.state.vendor_Id,\n        'contactDetails'        : {\n          'firstName'                 : this.state.firstName,\n          'lastName'                  : this.state.lastName,\n          'phone'                 : this.state.phone,\n          'email'                 : this.state.email,\n          'departmentName'          : this.state.departmentName,\n          'designationName'         : this.state.designationName,\n          \n         \n        }\n      }\n      //====================================\n    if ($(\"#OTPMobMail\").valid()) {\n      axios.get('/api/auth/get/checkemailotp/usingID/' + this.props.match.params.userID + '/' + this.refs.emailotp.value)\n        .then((response) => {\n\n          if (response.data.message == 'SUCCESS') {\n            swal('OTP Verified Successfully.');\n            var url = localStorage.getItem('previousUrl');\n            if (url == 'forgotpassword') {\n              localStorage.removeItem(\"previousUrl\");\n              this.props.history.push('/reset-pwd/' + this.props.match.params.userID);\n            } else {\n              localStorage.removeItem(\"previousUrl\");\n              this.props.history.push('/login');\n              //================================\n\n                axios.post('/api/personmaster/post', contactDetailspersonmaster)\n                .then((response) => {\n\n                  console.log('in result Res data==>>>', response.data);\n                  axios.patch('/api/entitymaster/patch/addContact' ,formValues)\n\n                          .then((response) => {\n                            console.log('in result Res data==>>>', response.data);\n\n                          })\n                          .catch((error) => {})\n                })\n                .catch((error) => {})\n              \n            //================================\n            }\n          } else {\n            swal('Please enter valid OTP.');\n          }\n        })\n        .catch((error) => {\n          swal(error.response.data.message);\n        })\n    }\n\n  }\n  inputEffect(event) {\n    event.preventDefault();\n    if ($(event.target).val() != \"\") {\n      $(event.target).addClass(\"has-content\");\n    } else {\n      $(event.target).removeClass(\"has-content\");\n    }\n  }\n  resendOtp(event) {\n    document.getElementById(\"resendOtpBtn\").innerHTML = 'Please wait...';\n    const userid = this.props.match.params.userID;\n    var formValues = {\n      \"emailSubject\": \"Email Verification\",\n      \"emailContent\": \"As part of our registration process, we screen every new profile to ensure its credibility by validating email provided by user. While screening the profile, we verify that details put in by user are correct and genuine.\",\n    }\n    axios.patch('/api/auth/patch/setsendemailotpusingID/' + userid, formValues)\n      .then((response) => {\n        document.getElementById(\"resendOtpBtn\").innerHTML = 'Resend OTP';\n        swal(\"OTP send to your registered email ID.\");\n      })\n      .catch((error) => {\n        swal(\" Failed to resent OTP\");\n        document.getElementById(\"resendOtpBtn\").innerHTML = 'Resend OTP';\n      })\n  }\n  Closepagealert(event) {\n    event.preventDefault();\n    $(\".toast-error\").html('');\n    $(\".toast-success\").html('');\n    $(\".toast-info\").html('');\n    $(\".toast-warning\").html('');\n    $(\".toast-error\").removeClass('toast');\n    $(\".toast-success\").removeClass('toast');\n    $(\".toast-info\").removeClass('toast');\n    $(\".toast-warning\").removeClass('toast');\n\n  }\n  render() {\n\n    var resendOtpWrap = \"resendOtpWrap resendOtpWrapcss\";\n    var mobileEmail = 'Mobile Number';\n    var resendOtp = \"\";\n\n    return (\n      \n      \n      <div style={{ 'height': window.innerHeight + 'px', 'width': window.innerWidth + 'px' }} className=\"col-lg-12 col-md-12 col-sm-12 col-xs-12 LoginWrapper\">\n        <div className=\"col-lg-12 col-md-12 col-sm-12 col-xs-12 innloginwrap\">\n        </div>\n        <div className=\"col-lg-12 col-md-12 col-sm-12 col-xs-12 mt100 mb100\">\n          <div className=\"col-lg-4 col-lg-offset-7 col-md-4 col-md-offset-7 col-sm-12 col-xs-12 formShadow\">\n\n            <div className=\"col-lg-12 col-md-12 col-sm-12 col-xs-12\">\n\n              <div className=\"col-lg-12 col-md-12 col-sm-12 col-xs-12 innloginwrap mb25\">\n                <h3>Confirm OTP</h3>\n              </div>\n              {\n                this.state.showMessage == false ?\n                  <div className=\"col-lg-12 col-md-12 col-sm-12 col-xs-12\">\n                    <p>We send you a Verification Code to your registered email </p>\n                    <div className=\"\">\n                      <span>Enter verification code received on email.<br /></span>\n                    </div>\n                    <form id=\"OTPMobMail\" className=\"textAlignLeft\">\n                      <div className=\"\">\n\n                        <br />\n                        <div className=\"input-group \" id=\"emailotp\">\n                          <input type=\"text\" className=\"form-control\" ref=\"emailotp\" name=\"emailotp\" placeholder=\"Enter OTP\" onBlur={this.inputEffect.bind(this)} aria-describedby=\"basic-addon1\" maxLength=\"4\" pattern=\"(0|[0-9]*)\" required />\n                          <span className=\"input-group-addon glyphi-custommm\"><i className=\"fa fa-key\" aria-hidden=\"true\"></i></span>\n                        </div>\n                      </div>\n                      <div className=\"loginforgotpass mt25\">\n                        <lable>Already have an account?</lable>&nbsp;<a href='/login' className=\"\">Sign In <b>&#8702;</b></a>\n                      </div>\n                      <div className=\"mt30 col-lg-12 mb25\">\n                        <div className=\"col-lg-6\">\n                          <div id=\"resendOtpBtn\" onClick={this.resendOtp.bind(this)} className=\"col-lg-12 btn  systemsecBtn\">\n                            Resend OTP\n                          </div>\n                        </div>\n                        <div className=\"col-lg-6\">\n                          <button type=\"submit\" onClick={this.confirmOTP.bind(this)} className=\"col-lg-12 btn loginBtn systemsecBtn\">Submit</button>\n                        </div>\n                      </div>\n                    </form>\n                  </div>\n                  :\n                  <div className=\"col-lg-12 col-md-12 col-sm-12 col-xs-12\">\n                    <p className=\"textAlignCenter\">Your Account is verified successfully! Please Sign In to access your account.<br /></p>\n                    <div className=\"col-lg-12 col-md-12 col-sm-12 col-xs-12 mt15\">\n                      <a href=\"/login\" className=\"col-lg-6 col-lg-offset-3 col-md-6 col-md-offset-3 col-sm-12 col-xs-12 button3  btn btn-warning  signupbtn\">Sign In</a>\n                    </div>\n                  </div>\n              }\n\n            </div>\n          </div>\n\n        </div>\n      </div>\n    );\n  }\n}\nexport default ConfirmOtp;"]},"metadata":{},"sourceType":"module"}