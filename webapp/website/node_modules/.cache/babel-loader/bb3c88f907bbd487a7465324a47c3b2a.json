{"ast":null,"code":"var _jsxFileName = \"/home/mani/projects/jobportal/webapp/candidateportal/src/systemSecurity/ConfirmOtp.js\";\nimport React, { Component } from 'react';\nimport swal from 'sweetalert';\nimport $ from \"jquery\";\nimport jQuery from 'jquery';\nimport axios from 'axios';\nimport './ConfirmOtp.css';\n\nclass ConfirmOtp extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      showMessage: false\n    };\n  }\n\n  componentDidMount() {\n    //==================================\n    var userid = this.props.match.params.userID;\n    console.log('userid==', userid);\n    axios.get('/api/users/get/' + userid).then(response => {\n      console.log('userInfo==', response.data);\n      this.setState({\n        'firstName': response.data.firstname,\n        'lastName': response.data.lastname,\n        'contactNo': response.data.mobile,\n        'phone': response.data.mobile,\n        'email': response.data.email,\n        \"companyID\": response.data.companyID,\n        \"company_Id\": response.data._id,\n        \"companyName\": response.data.companyName,\n        \"userId\": userid\n      }, () => {\n        axios.get('/api/entitymaster/getCompany/' + this.state.companyID).then(response => {\n          this.setState({\n            companyName: response.data.companyName,\n            vendor_Id: response.data._id\n          });\n        }).catch(error => {});\n      });\n    }).catch(error => {});\n  }\n\n  handleChange(event) {\n    var fieldValue = event.currentTarget.value; // console.log(\"fieldValue\",fieldValue);\n\n    var fieldKey = event.currentTarget.name;\n    console.log(\"fieldKey\", fieldKey);\n    this.setState({\n      [fieldKey]: fieldValue\n    });\n  }\n\n  confirmOTP(event) {\n    event.preventDefault();\n    var url = this.props.match.params;\n    var formValues = {\n      \"user_ID\": this.props.match.params.userID,\n      \"emailOTP\": parseInt(this.refs.emailotp.value),\n      \"status\": \"Active\"\n    }; //========person master===============\n\n    var contactDetailspersonmaster = {\n      'firstName': this.state.firstName,\n      'lastName': this.state.lastName,\n      'contactNo': this.state.contactNo,\n      'phone': this.state.phone,\n      'email': this.state.email,\n      \"companyID\": this.state.companyID,\n      \"company_Id\": this.state.company_Id,\n      \"companyName\": this.state.companyName,\n      \"type\": \"employee\",\n      \"entityType\": \"vendor\",\n      \"userId\": this.props.match.params.userID,\n      \"status\": \"Active\"\n    };\n    console.log(\"mastercontactDetailspersonmaster\", contactDetailspersonmaster); //====================================\n\n    axios.get('/api/auth/get/checkemailotp/usingID/' + this.props.match.params.userID + '/' + this.refs.emailotp.value).then(response => {\n      if (response.data.message == 'SUCCESS') {\n        swal('OTP Verified Successfully.');\n        var url = localStorage.getItem('previousUrl');\n\n        if (url == 'forgotpassword') {\n          localStorage.removeItem(\"previousUrl\");\n          this.props.history.push('/reset-pwd/' + this.props.match.params.userID);\n        } else {\n          localStorage.removeItem(\"previousUrl\");\n          this.props.history.push('/login'); //================================\n\n          axios.post('/api/personmaster/post', contactDetailspersonmaster).then(response => {\n            console.log('in result Res data==>>>', response.data);\n          }).catch(error => {}); //================================\n        }\n      } else {\n        swal('Please enter valid OTP.');\n      }\n    }).catch(error => {\n      swal(error.response.data.message);\n    });\n  }\n\n  inputEffect(event) {\n    event.preventDefault();\n\n    if ($(event.target).val() != \"\") {\n      $(event.target).addClass(\"has-content\");\n    } else {\n      $(event.target).removeClass(\"has-content\");\n    }\n  }\n\n  resendOtp(event) {\n    document.getElementById(\"resendOtpBtn\").innerHTML = 'Please wait...';\n    const userid = this.props.match.params.userID;\n    var formValues = {\n      \"emailSubject\": \"Email Verification\",\n      \"emailContent\": \"As part of our registration process, we screen every new profile to ensure its credibility by validating email provided by user. While screening the profile, we verify that details put in by user are correct and genuine.\"\n    };\n    axios.patch('/api/auth/patch/setsendemailotpusingID/' + userid, formValues).then(response => {\n      document.getElementById(\"resendOtpBtn\").innerHTML = 'Resend OTP';\n      swal(\"OTP send to your registered email ID.\");\n    }).catch(error => {\n      swal(\" Failed to resent OTP\");\n      document.getElementById(\"resendOtpBtn\").innerHTML = 'Resend OTP';\n    });\n  }\n\n  Closepagealert(event) {\n    event.preventDefault();\n    $(\".toast-error\").html('');\n    $(\".toast-success\").html('');\n    $(\".toast-info\").html('');\n    $(\".toast-warning\").html('');\n    $(\".toast-error\").removeClass('toast');\n    $(\".toast-success\").removeClass('toast');\n    $(\".toast-info\").removeClass('toast');\n    $(\".toast-warning\").removeClass('toast');\n  }\n\n  render() {\n    var resendOtpWrap = \"resendOtpWrap resendOtpWrapcss\";\n    var mobileEmail = 'Mobile Number';\n    var resendOtp = \"\";\n    return React.createElement(\"section\", {\n      className: \"container-fluid confirmOTPWrapper\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 169\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"confirmOTP col-lg-4 col-lg-offset-4\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 170\n      },\n      __self: this\n    }, React.createElement(\"form\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 171\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"confirmOTPTitle col-lg-12\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 172\n      },\n      __self: this\n    }, \"Confirm OTP\"), React.createElement(\"hr\", {\n      className: \"confirmOTPHr\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 175\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"confirmOTPSentence col-lg-12\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 177\n      },\n      __self: this\n    }, \"We have sent you an OTP to your registered email address. Please enter your OTP below\"), React.createElement(\"div\", {\n      className: \"col-lg-12 form-group\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 183\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"input-group\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 184\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      className: \"input-group-addon confirmOTPInputIcon1\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 185\n      },\n      __self: this\n    }, React.createElement(\"i\", {\n      className: \"fa fa-envelope\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 185\n      },\n      __self: this\n    })), React.createElement(\"input\", {\n      type: \"text\",\n      id: \"otp\",\n      name: \"otp\",\n      placeholder: \"Enter your OTP\",\n      value: this.state.OTP,\n      onChange: this.handleChange.bind(this),\n      className: \"form-control confirmOTPInputBox\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 186\n      },\n      __self: this\n    }))), React.createElement(\"div\", {\n      className: \"col-lg-12 confirmOTPLinks\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 191\n      },\n      __self: this\n    }, \"Found your Password? \\xA0\", React.createElement(\"a\", {\n      className: \"confirmOTPSignIn\",\n      href: \"#\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 193\n      },\n      __self: this\n    }, React.createElement(\"u\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 193\n      },\n      __self: this\n    }, \"Sign In\"))), React.createElement(\"div\", {\n      className: \"col-lg-12 buttonWrapper\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 198\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 199\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"col-lg-6\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 200\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      className: \"btn col-lg-12 buttonConfirmOTP\",\n      onClick: this.resendOtp.bind(this),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 201\n      },\n      __self: this\n    }, \"Resend OTP\")), React.createElement(\"div\", {\n      className: \"col-lg-6\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 204\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      className: \"btn col-lg-12 buttonConfirmOTP\",\n      onClick: this.confirmOTP.bind(this),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 205\n      },\n      __self: this\n    }, \"Confirm OTP\")))))));\n  }\n\n}\n\nexport default ConfirmOtp;","map":{"version":3,"sources":["/home/mani/projects/jobportal/webapp/candidateportal/src/systemSecurity/ConfirmOtp.js"],"names":["React","Component","swal","$","jQuery","axios","ConfirmOtp","constructor","props","state","showMessage","componentDidMount","userid","match","params","userID","console","log","get","then","response","data","setState","firstname","lastname","mobile","email","companyID","_id","companyName","vendor_Id","catch","error","handleChange","event","fieldValue","currentTarget","value","fieldKey","name","confirmOTP","preventDefault","url","formValues","parseInt","refs","emailotp","contactDetailspersonmaster","firstName","lastName","contactNo","phone","company_Id","message","localStorage","getItem","removeItem","history","push","post","inputEffect","target","val","addClass","removeClass","resendOtp","document","getElementById","innerHTML","patch","Closepagealert","html","render","resendOtpWrap","mobileEmail","OTP","bind"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport swal from 'sweetalert';\nimport $ from \"jquery\";\nimport jQuery from 'jquery';\nimport axios from 'axios';\nimport './ConfirmOtp.css';\n\nclass ConfirmOtp extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      showMessage: false\n    }\n  }\n  componentDidMount() {\n    \n    //==================================\n    var userid = this.props.match.params.userID;\n    console.log('userid==',userid)  \n\n    axios.get('/api/users/get/'+userid)\n    .then((response) => {\n      console.log('userInfo==',response.data)\n\n      this.setState({\n              'firstName'       : response.data.firstname,\n              'lastName'        : response.data.lastname,\n              'contactNo'       : response.data.mobile,\n              'phone'           : response.data.mobile,\n              'email'           : response.data.email,\n              \"companyID\"       : response.data.companyID,\n              \"company_Id\"      : response.data._id,\n              \"companyName\"     : response.data.companyName,\n              \"userId\"          : userid,\n            },()=>{\n\n                axios.get('/api/entitymaster/getCompany/'+this.state.companyID)\n                .then((response) => {\n                this.setState({\n                          companyName : response.data.companyName,\n                          vendor_Id : response.data._id,\n                        })\n                })\n                .catch((error) => {\n                })\n            })\n    })\n    .catch((error) => {\n    })\n\n  }\n  \n  handleChange(event){\n      var fieldValue=event.currentTarget.value;\n      // console.log(\"fieldValue\",fieldValue);\n       var fieldKey=event.currentTarget.name;\n       console.log(\"fieldKey\",fieldKey);\n      this.setState({\n        [fieldKey]:fieldValue\n      });\n  }\n  confirmOTP(event) {\n    event.preventDefault();\n    var url = this.props.match.params;\n    var formValues = {\n      \"user_ID\": this.props.match.params.userID,\n      \"emailOTP\": parseInt(this.refs.emailotp.value),\n      \"status\": \"Active\"\n    }\n    //========person master===============\n\n      var contactDetailspersonmaster   = {\n                            \n          'firstName'       : this.state.firstName,\n          'lastName'        : this.state.lastName,\n          'contactNo'       : this.state.contactNo,\n          'phone'           : this.state.phone,\n          'email'           : this.state.email,\n          \"companyID\"       : this.state.companyID,\n          \"company_Id\"      : this.state.company_Id,\n          \"companyName\"     : this.state.companyName,\n          \"type\"            : \"employee\",\n          \"entityType\"      : \"vendor\",\n          \"userId\"          : this.props.match.params.userID,\n          \"status\"          : \"Active\",\n      }\n    console.log(\"mastercontactDetailspersonmaster\",contactDetailspersonmaster)\n    \n      //====================================\n    \n      axios.get('/api/auth/get/checkemailotp/usingID/' + this.props.match.params.userID + '/' + this.refs.emailotp.value)\n        .then((response) => {\n\n          if (response.data.message == 'SUCCESS') {\n            swal('OTP Verified Successfully.');\n            var url = localStorage.getItem('previousUrl');\n            if (url == 'forgotpassword') {\n              localStorage.removeItem(\"previousUrl\");\n              this.props.history.push('/reset-pwd/' + this.props.match.params.userID);\n            } else {\n              localStorage.removeItem(\"previousUrl\");\n              this.props.history.push('/login');\n              //================================\n\n                axios.post('/api/personmaster/post', contactDetailspersonmaster)\n                .then((response) => {\n\n                  console.log('in result Res data==>>>', response.data);\n                  \n                })\n                .catch((error) => {})\n              \n            //================================\n            }\n          } else {\n            swal('Please enter valid OTP.');\n          }\n        })\n        .catch((error) => {\n          swal(error.response.data.message);\n        })\n    \n\n  }\n  inputEffect(event) {\n    event.preventDefault();\n    if ($(event.target).val() != \"\") {\n      $(event.target).addClass(\"has-content\");\n    } else {\n      $(event.target).removeClass(\"has-content\");\n    }\n  }\n  resendOtp(event) {\n    document.getElementById(\"resendOtpBtn\").innerHTML = 'Please wait...';\n    const userid = this.props.match.params.userID;\n    var formValues = {\n      \"emailSubject\": \"Email Verification\",\n      \"emailContent\": \"As part of our registration process, we screen every new profile to ensure its credibility by validating email provided by user. While screening the profile, we verify that details put in by user are correct and genuine.\",\n    }\n    axios.patch('/api/auth/patch/setsendemailotpusingID/' + userid, formValues)\n      .then((response) => {\n        document.getElementById(\"resendOtpBtn\").innerHTML = 'Resend OTP';\n        swal(\"OTP send to your registered email ID.\");\n      })\n      .catch((error) => {\n        swal(\" Failed to resent OTP\");\n        document.getElementById(\"resendOtpBtn\").innerHTML = 'Resend OTP';\n      })\n  }\n  Closepagealert(event) {\n    event.preventDefault();\n    $(\".toast-error\").html('');\n    $(\".toast-success\").html('');\n    $(\".toast-info\").html('');\n    $(\".toast-warning\").html('');\n    $(\".toast-error\").removeClass('toast');\n    $(\".toast-success\").removeClass('toast');\n    $(\".toast-info\").removeClass('toast');\n    $(\".toast-warning\").removeClass('toast');\n\n  }\n  render() {\n\n    var resendOtpWrap = \"resendOtpWrap resendOtpWrapcss\";\n    var mobileEmail = 'Mobile Number';\n    var resendOtp = \"\";\n\n    return (\n      <section className=\"container-fluid confirmOTPWrapper\">\n                <div className=\"confirmOTP col-lg-4 col-lg-offset-4\">\n                  <form>\n                    <div className=\"confirmOTPTitle col-lg-12\">Confirm OTP\n                    </div>\n\n                    <hr className=\"confirmOTPHr\"/>\n\n                    <div className=\"confirmOTPSentence col-lg-12\">\n                         We have sent you an OTP to your registered email address.\n                        Please enter your OTP below\n\n                    </div>\n\n                    <div className=\"col-lg-12 form-group\" >\n                        <div className=\"input-group\">\n                            <span className=\"input-group-addon confirmOTPInputIcon1\"><i className=\"fa fa-envelope\"></i></span>\n                            <input type=\"text\" id=\"otp\" name=\"otp\" placeholder=\"Enter your OTP\" value={this.state.OTP} onChange={this.handleChange.bind(this)} className=\"form-control confirmOTPInputBox\"/>\n                        </div>\n                    </div>\n\n\n                    <div className=\"col-lg-12 confirmOTPLinks\">\n                        Found your Password? &nbsp;\n                        <a className=\"confirmOTPSignIn\" href=\"#\"><u>Sign In</u></a>\n                    </div>\n                    \n                    \n                     \n                    <div className=\"col-lg-12 buttonWrapper\">\n                      <div className=\"row\">\n                        <div className=\"col-lg-6\">\n                            <button className=\"btn col-lg-12 buttonConfirmOTP\" onClick={this.resendOtp.bind(this)}>Resend OTP</button>\n                        </div>\n\n                        <div className=\"col-lg-6\">\n                            <button className=\"btn col-lg-12 buttonConfirmOTP\" onClick={this.confirmOTP.bind(this)}>Confirm OTP</button>\n                        </div>\n                      </div>\n                            \n                    </div>\n                  </form> \n\n                </div>\n         </section>\n\n      \n    );\n  }\n}\nexport default ConfirmOtp;"]},"metadata":{},"sourceType":"module"}