{"ast":null,"code":"var _jsxFileName = \"/home/mani/projects/jobportal/webapp/candidateportal/src/systemSecurity/ConfirmOtp.js\";\nimport React, { Component } from 'react';\nimport swal from 'sweetalert';\nimport $ from \"jquery\";\nimport jQuery from 'jquery';\nimport axios from 'axios';\nimport './SignUp.css';\n\nclass ConfirmOtp extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      showMessage: false\n    };\n  }\n\n  componentDidMount() {\n    $.validator.addMethod(\"regxemailotp\", function (value, element, regexpr) {\n      return regexpr.test(value);\n    }, \"Please enter valid OTP.\");\n    jQuery.validator.setDefaults({\n      debug: true,\n      success: \"valid\"\n    });\n    $(\"#OTPMobMail\").validate({\n      rules: {\n        emailotp: {\n          required: true,\n          regxemailotp: /^[1-9][0-9]{3}$/\n        }\n      },\n      errorPlacement: function (error, element) {\n        if (element.attr(\"name\") == \"emailotp\") {\n          error.insertAfter(\"#emailotp\");\n        }\n      }\n    }); //==================================\n\n    var userid = this.props.match.params.userID;\n    console.log('userid==', userid);\n    axios.get('/api/users/get/' + userid).then(response => {\n      console.log('userInfo==', response.data);\n      this.setState({\n        // companyID : comId,\n        // companyName : response.data.companyName,\n        // vendor_Id : response.data._id,\n        'firstName': response.data.firstname,\n        'lastName': response.data.lastname,\n        'contactNo': response.data.mobile,\n        'phone': response.data.mobile,\n        'email': response.data.email,\n        // \"departmentName\"  : response.data.department,\n        // \"designationName\" : response.data.designation,\n        // \"states\"          : response.data.states,\n        // \"address\"         : [{\n        //                     \"city\"        : response.data.cityName,\n        //                     \"state\"          : response.data.states,\n        // }],\n        \"companyID\": response.data.companyID,\n        \"company_Id\": response.data._id,\n        \"companyName\": response.data.companyName,\n        \"userId\": userid\n      }, () => {\n        axios.get('/api/entitymaster/getCompany/' + this.state.companyID).then(response => {\n          console.log('companyName==', response.data);\n          this.setState({\n            companyName: response.data.companyName,\n            vendor_Id: response.data._id\n          });\n        }).catch(error => {});\n      });\n    }).catch(error => {});\n  }\n\n  confirmOTP(event) {\n    event.preventDefault();\n    var url = this.props.match.params;\n    var formValues = {\n      \"user_ID\": this.props.match.params.userID,\n      \"emailOTP\": parseInt(this.refs.emailotp.value),\n      \"status\": \"Active\"\n    }; //========person master===============\n\n    var contactDetailspersonmaster = {\n      'firstName': this.state.firstName,\n      'lastName': this.state.lastName,\n      'contactNo': this.state.contactNo,\n      'phone': this.state.phone,\n      'email': this.state.email,\n      \"departmentName\": this.state.department,\n      \"designationName\": this.state.designation,\n      \"states\": this.state.states,\n      // \"address\"         : [{\n      //                     \"city\"        : this.state.cityName,\n      //                     \"state\"          : this.state.states,\n      // }],\n      \"companyID\": this.state.companyID,\n      \"company_Id\": this.state.company_Id,\n      \"companyName\": this.state.companyName,\n      \"type\": \"employee\",\n      \"entityType\": \"vendor\",\n      \"userId\": this.props.match.params.userID,\n      \"status\": \"Active\"\n    };\n    console.log(\"mastercontactDetailspersonmaster\", contactDetailspersonmaster);\n    var formValues = {\n      'entityID': this.state.vendor_Id,\n      'contactDetails': {\n        'firstName': this.state.firstName,\n        'lastName': this.state.lastName,\n        'phone': this.state.phone,\n        'email': this.state.email,\n        'departmentName': this.state.departmentName,\n        'designationName': this.state.designationName\n      }\n    }; //====================================\n\n    if ($(\"#OTPMobMail\").valid()) {\n      axios.get('/api/auth/get/checkemailotp/usingID/' + this.props.match.params.userID + '/' + this.refs.emailotp.value).then(response => {\n        if (response.data.message == 'SUCCESS') {\n          swal('OTP Verified Successfully.');\n          var url = localStorage.getItem('previousUrl');\n\n          if (url == 'forgotpassword') {\n            localStorage.removeItem(\"previousUrl\");\n            this.props.history.push('/reset-pwd/' + this.props.match.params.userID);\n          } else {\n            localStorage.removeItem(\"previousUrl\");\n            this.props.history.push('/login'); //================================\n\n            axios.post('/api/personmaster/post', contactDetailspersonmaster).then(response => {\n              console.log('in result Res data==>>>', response.data);\n              axios.patch('/api/entitymaster/patch/addContact', formValues).then(response => {\n                console.log('in result Res data==>>>', response.data);\n              }).catch(error => {});\n            }).catch(error => {}); //================================\n          }\n        } else {\n          swal('Please enter valid OTP.');\n        }\n      }).catch(error => {\n        swal(error.response.data.message);\n      });\n    }\n  }\n\n  inputEffect(event) {\n    event.preventDefault();\n\n    if ($(event.target).val() != \"\") {\n      $(event.target).addClass(\"has-content\");\n    } else {\n      $(event.target).removeClass(\"has-content\");\n    }\n  }\n\n  resendOtp(event) {\n    document.getElementById(\"resendOtpBtn\").innerHTML = 'Please wait...';\n    const userid = this.props.match.params.userID;\n    var formValues = {\n      \"emailSubject\": \"Email Verification\",\n      \"emailContent\": \"As part of our registration process, we screen every new profile to ensure its credibility by validating email provided by user. While screening the profile, we verify that details put in by user are correct and genuine.\"\n    };\n    axios.patch('/api/auth/patch/setsendemailotpusingID/' + userid, formValues).then(response => {\n      document.getElementById(\"resendOtpBtn\").innerHTML = 'Resend OTP';\n      swal(\"OTP send to your registered email ID.\");\n    }).catch(error => {\n      swal(\" Failed to resent OTP\");\n      document.getElementById(\"resendOtpBtn\").innerHTML = 'Resend OTP';\n    });\n  }\n\n  Closepagealert(event) {\n    event.preventDefault();\n    $(\".toast-error\").html('');\n    $(\".toast-success\").html('');\n    $(\".toast-info\").html('');\n    $(\".toast-warning\").html('');\n    $(\".toast-error\").removeClass('toast');\n    $(\".toast-success\").removeClass('toast');\n    $(\".toast-info\").removeClass('toast');\n    $(\".toast-warning\").removeClass('toast');\n  }\n\n  render() {\n    var resendOtpWrap = \"resendOtpWrap resendOtpWrapcss\";\n    var mobileEmail = 'Mobile Number';\n    var resendOtp = \"\";\n    return React.createElement(\"section\", {\n      className: \"container-fluid confirmOTPWrapper\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 219\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"confirmOTP col-lg-4 col-lg-offset-4\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 220\n      },\n      __self: this\n    }, React.createElement(\"form\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 221\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"confirmOTPTitle col-lg-12\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 222\n      },\n      __self: this\n    }, \"Confirm OTP\"), React.createElement(\"hr\", {\n      className: \"confirmOTPHr\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 225\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"confirmOTPSentence col-lg-12\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 227\n      },\n      __self: this\n    }, \"We have sent you an OTP to your registered email address. Please enter your OTP below\"), React.createElement(\"div\", {\n      className: \"col-lg-12 form-group\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 233\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"input-group\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 234\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      className: \"input-group-addon confirmOTPInputIcon1\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 235\n      },\n      __self: this\n    }, React.createElement(\"i\", {\n      className: \"fa fa-envelope\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 235\n      },\n      __self: this\n    })), React.createElement(\"input\", {\n      type: \"email\",\n      id: \"emailAddress\",\n      name: \"emailAddress\",\n      placeholder: \"Email Address\",\n      value: this.state.emailAddress,\n      onChange: this.handleChange.bind(this),\n      className: \"form-control confirmOTPInputBox\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 236\n      },\n      __self: this\n    }))), React.createElement(\"div\", {\n      className: \"col-lg-12 confirmOTPLinks\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 241\n      },\n      __self: this\n    }, \"Found your Password? \\xA0\", React.createElement(\"a\", {\n      className: \"confirmOTPSignIn\",\n      href: \"#\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 243\n      },\n      __self: this\n    }, React.createElement(\"u\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 243\n      },\n      __self: this\n    }, \"Sign In\"))), React.createElement(\"div\", {\n      className: \"col-lg-12 buttonWrapper\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 248\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 249\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"col-lg-6\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 250\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      className: \"btn col-lg-12 buttonConfirmOTP\",\n      onClick: this.handleSubmit.bind(this),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 251\n      },\n      __self: this\n    }, \"Resend OTP\")), React.createElement(\"div\", {\n      className: \"col-lg-6\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 254\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      className: \"btn col-lg-12 buttonConfirmOTP\",\n      onClick: this.handleSubmit.bind(this),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 255\n      },\n      __self: this\n    }, \"Confirm OTP\")))))));\n  }\n\n}\n\nexport default ConfirmOtp;","map":{"version":3,"sources":["/home/mani/projects/jobportal/webapp/candidateportal/src/systemSecurity/ConfirmOtp.js"],"names":["React","Component","swal","$","jQuery","axios","ConfirmOtp","constructor","props","state","showMessage","componentDidMount","validator","addMethod","value","element","regexpr","test","setDefaults","debug","success","validate","rules","emailotp","required","regxemailotp","errorPlacement","error","attr","insertAfter","userid","match","params","userID","console","log","get","then","response","data","setState","firstname","lastname","mobile","email","companyID","_id","companyName","vendor_Id","catch","confirmOTP","event","preventDefault","url","formValues","parseInt","refs","contactDetailspersonmaster","firstName","lastName","contactNo","phone","department","designation","states","company_Id","departmentName","designationName","valid","message","localStorage","getItem","removeItem","history","push","post","patch","inputEffect","target","val","addClass","removeClass","resendOtp","document","getElementById","innerHTML","Closepagealert","html","render","resendOtpWrap","mobileEmail","emailAddress","handleChange","bind","handleSubmit"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport swal from 'sweetalert';\nimport $ from \"jquery\";\nimport jQuery from 'jquery';\nimport axios from 'axios';\nimport './SignUp.css';\n\nclass ConfirmOtp extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      showMessage: false\n    }\n  }\n  componentDidMount() {\n    $.validator.addMethod(\"regxemailotp\", function (value, element, regexpr) {\n      return regexpr.test(value);\n    }, \"Please enter valid OTP.\");\n\n    jQuery.validator.setDefaults({\n      debug: true,\n      success: \"valid\"\n    });\n\n    $(\"#OTPMobMail\").validate({\n      rules: {\n        emailotp: {\n          required: true,\n          regxemailotp: /^[1-9][0-9]{3}$/,\n        },\n      },\n      errorPlacement: function (error, element) {\n        if (element.attr(\"name\") == \"emailotp\") {\n          error.insertAfter(\"#emailotp\");\n        }\n      }\n    });\n    //==================================\n    var userid = this.props.match.params.userID;\n    console.log('userid==',userid)\n\n    axios.get('/api/users/get/'+userid)\n    .then((response) => {\n      console.log('userInfo==',response.data)\n\n      this.setState({\n              // companyID : comId,\n              // companyName : response.data.companyName,\n              // vendor_Id : response.data._id,\n              'firstName'       : response.data.firstname,\n              'lastName'        : response.data.lastname,\n              'contactNo'       : response.data.mobile,\n              'phone'           : response.data.mobile,\n              'email'           : response.data.email,\n              // \"departmentName\"  : response.data.department,\n              // \"designationName\" : response.data.designation,\n              // \"states\"          : response.data.states,\n              // \"address\"         : [{\n              //                     \"city\"        : response.data.cityName,\n              //                     \"state\"          : response.data.states,\n\n              // }],\n              \"companyID\"       : response.data.companyID,\n              \"company_Id\"      : response.data._id,\n              \"companyName\"     : response.data.companyName,\n              \"userId\"          : userid,\n            },()=>{\n\n                axios.get('/api/entitymaster/getCompany/'+this.state.companyID)\n                .then((response) => {\n                  console.log('companyName==',response.data)\n\n                  this.setState({\n                          companyName : response.data.companyName,\n                          vendor_Id : response.data._id,\n                        })\n                })\n                .catch((error) => {\n                })\n            })\n    })\n    .catch((error) => {\n    })\n\n  }\n  confirmOTP(event) {\n    event.preventDefault();\n    var url = this.props.match.params;\n    var formValues = {\n      \"user_ID\": this.props.match.params.userID,\n      \"emailOTP\": parseInt(this.refs.emailotp.value),\n      \"status\": \"Active\"\n    }\n    //========person master===============\n\n      var contactDetailspersonmaster   = {\n                            \n          'firstName'       : this.state.firstName,\n          'lastName'        : this.state.lastName,\n          'contactNo'       : this.state.contactNo,\n          'phone'           : this.state.phone,\n          'email'           : this.state.email,\n          \"departmentName\"  : this.state.department,\n          \"designationName\" : this.state.designation,\n          \"states\"          : this.state.states,\n          // \"address\"         : [{\n          //                     \"city\"        : this.state.cityName,\n          //                     \"state\"          : this.state.states,\n\n          // }],\n          \"companyID\"       : this.state.companyID,\n          \"company_Id\"      : this.state.company_Id,\n          \"companyName\"     : this.state.companyName,\n          \"type\"            : \"employee\",\n          \"entityType\"      : \"vendor\",\n          \"userId\"          : this.props.match.params.userID,\n          \"status\"          : \"Active\",\n      }\n    console.log(\"mastercontactDetailspersonmaster\",contactDetailspersonmaster)\n      var formValues = {\n        'entityID'            : this.state.vendor_Id,\n        'contactDetails'        : {\n          'firstName'                 : this.state.firstName,\n          'lastName'                  : this.state.lastName,\n          'phone'                 : this.state.phone,\n          'email'                 : this.state.email,\n          'departmentName'          : this.state.departmentName,\n          'designationName'         : this.state.designationName,\n          \n         \n        }\n      }\n      //====================================\n    if ($(\"#OTPMobMail\").valid()) {\n      axios.get('/api/auth/get/checkemailotp/usingID/' + this.props.match.params.userID + '/' + this.refs.emailotp.value)\n        .then((response) => {\n\n          if (response.data.message == 'SUCCESS') {\n            swal('OTP Verified Successfully.');\n            var url = localStorage.getItem('previousUrl');\n            if (url == 'forgotpassword') {\n              localStorage.removeItem(\"previousUrl\");\n              this.props.history.push('/reset-pwd/' + this.props.match.params.userID);\n            } else {\n              localStorage.removeItem(\"previousUrl\");\n              this.props.history.push('/login');\n              //================================\n\n                axios.post('/api/personmaster/post', contactDetailspersonmaster)\n                .then((response) => {\n\n                  console.log('in result Res data==>>>', response.data);\n                  axios.patch('/api/entitymaster/patch/addContact' ,formValues)\n\n                          .then((response) => {\n                            console.log('in result Res data==>>>', response.data);\n\n                          })\n                          .catch((error) => {})\n                })\n                .catch((error) => {})\n              \n            //================================\n            }\n          } else {\n            swal('Please enter valid OTP.');\n          }\n        })\n        .catch((error) => {\n          swal(error.response.data.message);\n        })\n    }\n\n  }\n  inputEffect(event) {\n    event.preventDefault();\n    if ($(event.target).val() != \"\") {\n      $(event.target).addClass(\"has-content\");\n    } else {\n      $(event.target).removeClass(\"has-content\");\n    }\n  }\n  resendOtp(event) {\n    document.getElementById(\"resendOtpBtn\").innerHTML = 'Please wait...';\n    const userid = this.props.match.params.userID;\n    var formValues = {\n      \"emailSubject\": \"Email Verification\",\n      \"emailContent\": \"As part of our registration process, we screen every new profile to ensure its credibility by validating email provided by user. While screening the profile, we verify that details put in by user are correct and genuine.\",\n    }\n    axios.patch('/api/auth/patch/setsendemailotpusingID/' + userid, formValues)\n      .then((response) => {\n        document.getElementById(\"resendOtpBtn\").innerHTML = 'Resend OTP';\n        swal(\"OTP send to your registered email ID.\");\n      })\n      .catch((error) => {\n        swal(\" Failed to resent OTP\");\n        document.getElementById(\"resendOtpBtn\").innerHTML = 'Resend OTP';\n      })\n  }\n  Closepagealert(event) {\n    event.preventDefault();\n    $(\".toast-error\").html('');\n    $(\".toast-success\").html('');\n    $(\".toast-info\").html('');\n    $(\".toast-warning\").html('');\n    $(\".toast-error\").removeClass('toast');\n    $(\".toast-success\").removeClass('toast');\n    $(\".toast-info\").removeClass('toast');\n    $(\".toast-warning\").removeClass('toast');\n\n  }\n  render() {\n\n    var resendOtpWrap = \"resendOtpWrap resendOtpWrapcss\";\n    var mobileEmail = 'Mobile Number';\n    var resendOtp = \"\";\n\n    return (\n      <section className=\"container-fluid confirmOTPWrapper\">\n                <div className=\"confirmOTP col-lg-4 col-lg-offset-4\">\n                  <form>\n                    <div className=\"confirmOTPTitle col-lg-12\">Confirm OTP\n                    </div>\n\n                    <hr className=\"confirmOTPHr\"/>\n\n                    <div className=\"confirmOTPSentence col-lg-12\">\n                         We have sent you an OTP to your registered email address.\n                        Please enter your OTP below\n\n                    </div>\n\n                    <div className=\"col-lg-12 form-group\" >\n                        <div className=\"input-group\">\n                            <span className=\"input-group-addon confirmOTPInputIcon1\"><i className=\"fa fa-envelope\"></i></span>\n                            <input type=\"email\" id=\"emailAddress\" name=\"emailAddress\" placeholder=\"Email Address\" value={this.state.emailAddress} onChange={this.handleChange.bind(this)} className=\"form-control confirmOTPInputBox\"/>\n                        </div>\n                    </div>\n\n\n                    <div className=\"col-lg-12 confirmOTPLinks\">\n                        Found your Password? &nbsp;\n                        <a className=\"confirmOTPSignIn\" href=\"#\"><u>Sign In</u></a>\n                    </div>\n                    \n                    \n                     \n                    <div className=\"col-lg-12 buttonWrapper\">\n                      <div className=\"row\">\n                        <div className=\"col-lg-6\">\n                            <button className=\"btn col-lg-12 buttonConfirmOTP\" onClick={this.handleSubmit.bind(this)}>Resend OTP</button>\n                        </div>\n\n                        <div className=\"col-lg-6\">\n                            <button className=\"btn col-lg-12 buttonConfirmOTP\" onClick={this.handleSubmit.bind(this)}>Confirm OTP</button>\n                        </div>\n                      </div>\n                            \n                    </div>\n                  </form> \n\n                </div>\n         </section>\n\n      \n    );\n  }\n}\nexport default ConfirmOtp;"]},"metadata":{},"sourceType":"module"}