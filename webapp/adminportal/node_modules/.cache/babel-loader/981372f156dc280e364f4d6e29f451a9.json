{"ast":null,"code":"var _jsxFileName = \"/home/mani/projects/jobportal/webapp/adminportal/src/projectadmin/VehicleMaster/listOfVehicles/components/DocumentsVerificationVehicle.js\";\nimport React from 'react';\nimport OwlCarousel from 'react-owl-carousel';\nimport swal from 'sweetalert';\nimport axios from 'axios';\nimport 'owl.carousel/dist/assets/owl.carousel.css';\nimport 'owl.carousel/dist/assets/owl.theme.default.css';\nimport '../css/ListOfVehicles.css';\nimport '../css/ListOfEntityFilter.css';\nimport '../css/ListOfAllEntity.css';\nexport default class DocumentsVerificationVehicle extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      vehicleInfo: \"\",\n      remark: \"\",\n      status: \"\",\n      action: \"\",\n      showRemark: false\n    };\n  }\n\n  componentWillReceiveProps(nextProps) {\n    this.setState({\n      vehicleInfo: nextProps.vehicleInfo\n    });\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    if (prevState.vehicleInfo !== this.state.vehicleInfo) {\n      this.setState({\n        vehicleInfo: this.state.vehicleInfo\n      });\n    }\n  }\n\n  Reject(event) {\n    var documentName = event.target.getAttribute(\"data-action\");\n    var userDetails = {\n      \"document_id\": this.state.ID,\n      \"status\": \"Rejected\",\n      \"remark\": this.state.remark\n    };\n    console.log(\"========\", userDetails);\n    axios.patch('/api/vehiclemaster/patch/document', userDetails).then(response => {\n      swal(\"Document Rejected\");\n      this.setState({\n        [documentName]: false\n      });\n      this.getPersonData(this.state.vehicleInfo._id);\n    }).catch(error => {\n      console.log(error);\n    });\n  }\n\n  approve(event) {\n    var documentName = event.target.getAttribute(\"data-action\");\n    var ID = event.target.id;\n    console.log(\"ID\", ID, documentName);\n    var userDetails = {\n      \"document_id\": ID,\n      \"status\": \"Approved\",\n      \"remark\": \"\"\n    };\n    console.log(\"========\", userDetails);\n    axios.patch('/api/vehiclemaster/patch/document', userDetails).then(response => {\n      console.log(\"========\", response.data);\n      swal(\"Document Apprved\");\n      this.setState({\n        [documentName]: false\n      });\n      this.getPersonData(this.state.vehicleInfo._id);\n    }).catch(error => {\n      console.log(error);\n    });\n  }\n\n  getPersonData(id) {\n    axios.get(\"/api/vehiclemaster/get/one/\" + id).then(response => {\n      this.setState({\n        vehicleInfo: response.data\n      });\n    }).catch(error => {\n      console.log(\"error\", error);\n    });\n  }\n\n  RejectButton(event) {\n    var documentName = event.target.getAttribute(\"data-action\");\n    var ID = event.target.id;\n    this.setState({\n      [documentName]: true,\n      documentName: documentName,\n      ID: ID\n    });\n  }\n\n  handleChange(event) {\n    const target = event.target;\n    const name = target.name;\n    this.setState({\n      [name]: event.target.value\n    });\n  }\n\n  save(event) {\n    swal(\"Changes Saved\");\n    var documentName = event.target.getAttribute(\"data-action\");\n    var noRejected = false;\n    axios.get(\"/api/vehiclemaster/get/one/\" + this.state.vehicleInfo._id).then(response => {\n      this.setState({\n        vehicleInfo: response.data,\n        documents: response.data.vehicleDocument,\n        [documentName]: false\n      }, () => {\n        console.log(\"documents\", this.state.documents);\n\n        for (let i = 0; i < this.state.documents.length; i++) {\n          if (this.state.documents[i].status == \"Rejected\" || this.state.documents[i].status == \"New\") {\n            noRejected = false;\n            break;\n          } else {\n            noRejected = true;\n          }\n        }\n\n        console.log(\"noRejected\", noRejected);\n\n        if (noRejected) {\n          var formValues = {\n            vehicleID: this.state.vehicleInfo._id,\n            status: \"Active\",\n            updatedBy: localStorage.getItem(\"user_ID\")\n          };\n          console.log(\"formValues\", formValues);\n          axios.patch(\"/api/vehiclemaster/patch/changeStatus\", formValues).then(response => {\n            console.log(\"response\", response);\n          }).catch(error => {\n            console.log(\"error\", error);\n          });\n        }\n        /*console.log('sendData: ',sendData)\n         axios.post('/api/masternotifications/post/sendNotification', sendData)\n         .then((res) => {\n         console.log('sendDataToUser in result==>>>', res.data)\n         })\n         .catch((error) => { console.log('notification error: ',error)})*/\n\n      });\n    }).catch(error => {\n      console.log(\"error\", error);\n    });\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 176,\n        columnNumber: 7\n      }\n    }, this.state.vehicleInfo ? /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-lg-12 noPadding mainDivDV\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 179,\n        columnNumber: 9\n      }\n    }, this.state.vehicleInfo.vehicleDocument && this.state.vehicleInfo.vehicleDocument.map((image, index) => {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"item col-lg-10 col-lg-offset-1 textAlignCenter heightOfInnerDiv\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 183,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"col-lg-12 col-md-12 col-sm-12 col-sm-12 imageContainerDivDV\",\n        key: index,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 184,\n          columnNumber: 19\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        className: \"documentName col-lg-12\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 185,\n          columnNumber: 21\n        }\n      }, image.documentName), image.vehicleDocImg && image.vehicleDocImg.length > 0 ? image.vehicleDocImg.map((value, i) => {\n        if (value !== null) {\n          return /*#__PURE__*/React.createElement(\"img\", {\n            src: value,\n            className: \"imagewidheight col-lg-12 noPadding\",\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 192,\n              columnNumber: 32\n            }\n          });\n        }\n      }) : /*#__PURE__*/React.createElement(\"img\", {\n        src: \"/images/Dummyimg.jpg\",\n        className: \"imagewidheight col-lg-12 noPadding\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 196,\n          columnNumber: 24\n        }\n      }), image.status === \"New\" ? /*#__PURE__*/React.createElement(\"div\", {\n        className: \"col-lg-12\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 199,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"button\", {\n        type: \"button\",\n        className: \"btn btn-success col-lg-5 marg10 mgbt10\",\n        \"data-action\": image.documentName,\n        id: image._id,\n        onClick: this.approve.bind(this),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 200,\n          columnNumber: 25\n        }\n      }, \"Approve\"), /*#__PURE__*/React.createElement(\"button\", {\n        type: \"button\",\n        className: \"btn btn-danger col-lg-5 marg10\",\n        \"data-action\": image.documentName,\n        id: image._id,\n        onClick: this.RejectButton.bind(this),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 201,\n          columnNumber: 25\n        }\n      }, \"Reject\")) : image.status === \"Rejected\" ? /*#__PURE__*/React.createElement(\"label\", {\n        className: \"RejectedButton col-lg-12\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 205,\n          columnNumber: 23\n        }\n      }, \"Document Rejected\") : /*#__PURE__*/React.createElement(\"label\", {\n        className: \"ApprovedButton col-lg-12\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 207,\n          columnNumber: 23\n        }\n      }, \"Document Approved\"), this.state[image.documentName] ? /*#__PURE__*/React.createElement(\"div\", {\n        className: \"col-lg-12 noPadding\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 212,\n          columnNumber: 19\n        }\n      }, /*#__PURE__*/React.createElement(\"textarea\", {\n        id: \"w3mission\",\n        className: \"col-lg-12\",\n        placeholder: \"Remark\",\n        rows: \"2\",\n        cols: \"20\",\n        ref: \"remark\",\n        id: \"remark\",\n        value: this.state.remark,\n        name: \"remark\",\n        onChange: this.handleChange.bind(this),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 213,\n          columnNumber: 21\n        }\n      }), /*#__PURE__*/React.createElement(\"button\", {\n        type: \"button\",\n        className: \"btn btn-primary col-lg-5 marg10 pull-right\",\n        \"data-action\": image.documentName,\n        onClick: this.Reject.bind(this),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 216,\n          columnNumber: 21\n        }\n      }, \"Submit\")) : null));\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-lg-12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 227,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      type: \"button\",\n      className: \"btn btn-primary col-lg-2 marg10 pull-right\",\n      \"data-dismiss\": \"modal\",\n      onClick: this.save.bind(this),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 228,\n        columnNumber: 13\n      }\n    }, \"Save\"))) : null);\n  }\n\n}","map":{"version":3,"sources":["/home/mani/projects/jobportal/webapp/adminportal/src/projectadmin/VehicleMaster/listOfVehicles/components/DocumentsVerificationVehicle.js"],"names":["React","OwlCarousel","swal","axios","DocumentsVerificationVehicle","Component","constructor","props","state","vehicleInfo","remark","status","action","showRemark","componentWillReceiveProps","nextProps","setState","componentDidUpdate","prevProps","prevState","Reject","event","documentName","target","getAttribute","userDetails","ID","console","log","patch","then","response","getPersonData","_id","catch","error","approve","id","data","get","RejectButton","handleChange","name","value","save","noRejected","documents","vehicleDocument","i","length","formValues","vehicleID","updatedBy","localStorage","getItem","render","map","image","index","vehicleDocImg","bind"],"mappings":"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","sourcesContent":["import React from 'react';\nimport OwlCarousel  from 'react-owl-carousel';\nimport swal from 'sweetalert';\nimport axios        from 'axios';\nimport 'owl.carousel/dist/assets/owl.carousel.css';\nimport 'owl.carousel/dist/assets/owl.theme.default.css';\nimport '../css/ListOfVehicles.css';\nimport '../css/ListOfEntityFilter.css';\nimport '../css/ListOfAllEntity.css';\n\nexport default class DocumentsVerificationVehicle extends React.Component {\n\n  constructor(props) {\n  super(props);\n    this.state = {\n    vehicleInfo  : \"\",\n    remark : \"\",\n    status : \"\",\n    action : \"\",\n    showRemark : false,\n         \n        };\n  }\n  componentWillReceiveProps(nextProps){\n    this.setState({\n      vehicleInfo : nextProps.vehicleInfo\n      });\n  }\n   \n  componentDidUpdate(prevProps, prevState){\n    if(prevState.vehicleInfo!==this.state.vehicleInfo){\n      this.setState({\n        vehicleInfo:this.state.vehicleInfo,\n      });\n    }\n  }\n\n  Reject(event){\n    var documentName = event.target.getAttribute(\"data-action\");\n\n    var userDetails = {\n      \"document_id\"    : this.state.ID,\n      \"status\"        : \"Rejected\",\n      \"remark\"        : this.state.remark,\n      }\n    console.log(\"========\",userDetails);\n    axios.patch('/api/vehiclemaster/patch/document',userDetails)\n    .then((response)=> {\n        swal(\"Document Rejected\");\n         this.setState({\n          [documentName] : false,\n          })\n         this.getPersonData(this.state.vehicleInfo._id);\n         \n      })\n      .catch((error)=> {\n      console.log(error);\n  });\n  }\n  approve(event){\n    var documentName = event.target.getAttribute(\"data-action\");\n    var ID = event.target.id;\n    console.log(\"ID\",ID,documentName);\n    var userDetails = {\n      \"document_id\"    : ID,\n      \"status\"        : \"Approved\",\n      \"remark\"        : \"\",\n      }\n    console.log(\"========\",userDetails);\n    axios.patch('/api/vehiclemaster/patch/document',userDetails)\n    .then((response)=> {\n        console.log(\"========\",response.data);\n        swal(\"Document Apprved\");\n        this.setState({\n          [documentName]:false,\n        })\n         this.getPersonData(this.state.vehicleInfo._id)\n      })\n      .catch((error)=> {\n      console.log(error);\n  });\n\n  }\n  getPersonData(id)\n  {    \n     axios.get(\"/api/vehiclemaster/get/one/\" + id)\n      .then((response) => {\n\n        this.setState({\n          vehicleInfo    : response.data,\n        });\n      })\n      .catch((error) => {\n        console.log(\"error\",error)\n    })\n  }\n  RejectButton(event){\n    var documentName = event.target.getAttribute(\"data-action\");\n    var ID = event.target.id;\n    this.setState({\n      [documentName] : true,\n      documentName:documentName,\n      ID:ID\n    })\n\n  }\n\n  handleChange(event){\n   const target = event.target;\n    const name = target.name;\n\n    this.setState({\n      [name]: event.target.value\n    });\n  }  \n  save(event){\n     swal(\"Changes Saved\");\n    var documentName = event.target.getAttribute(\"data-action\");\n    var noRejected = false;\n\n     axios.get(\"/api/vehiclemaster/get/one/\" + this.state.vehicleInfo._id)\n      .then((response) => {\n\n        this.setState({\n          vehicleInfo    : response.data,\n          documents    : response.data.vehicleDocument,\n          [documentName]:false\n        },()=>{\n          console.log(\"documents\",this.state.documents)\n          for (let i=0;i<this.state.documents.length;i++)\n          {\n            if(this.state.documents[i].status == \"Rejected\"  || this.state.documents[i].status == \"New\" )\n            {\n              noRejected = false;  \n              break;         \n            }else{\n              noRejected = true;\n            }\n          }\n          console.log(\"noRejected\",noRejected);\n          if(noRejected)\n          {\n            var formValues = {\n                vehicleID :  this.state.vehicleInfo._id,\n                status : \"Active\",\n                updatedBy:  localStorage.getItem(\"user_ID\")\n              }\n                console.log(\"formValues\",formValues)\n              axios.patch(\"/api/vehiclemaster/patch/changeStatus\", formValues)\n              .then((response) => {\n                console.log(\"response\",response)\n              })\n              .catch((error) => {\n                console.log(\"error\",error)\n              })\n          }\n           /*console.log('sendData: ',sendData)\n            axios.post('/api/masternotifications/post/sendNotification', sendData)\n            .then((res) => {\n            console.log('sendDataToUser in result==>>>', res.data)\n            })\n            .catch((error) => { console.log('notification error: ',error)})*/\n         \n        });\n      })\n      .catch((error) => {\n        console.log(\"error\",error)\n    })\n   \n\n  \n  }\n\n  render() {\n    return (\n      <div className=\"\">\n      \n        {this.state.vehicleInfo ?\n        <div className=\"col-lg-12 noPadding mainDivDV\">\n          {\n          this.state.vehicleInfo.vehicleDocument && this.state.vehicleInfo.vehicleDocument.map((image,index)=>{\n            return(\n                <div className=\"item col-lg-10 col-lg-offset-1 textAlignCenter heightOfInnerDiv\">\n                  <div className=\"col-lg-12 col-md-12 col-sm-12 col-sm-12 imageContainerDivDV\" key={index}>\n                    <label className=\"documentName col-lg-12\">{image.documentName}</label>\n                     {                      \n\n                      image.vehicleDocImg && image.vehicleDocImg.length>0? \n                      image.vehicleDocImg.map((value,i)=>{\n                        if( value!==null )\n                        {\n                        return(<img src ={value} className=\"imagewidheight col-lg-12 noPadding\"/>)\n                        }\n                      })\n                      :\n                       <img src =\"/images/Dummyimg.jpg\"className=\"imagewidheight col-lg-12 noPadding\"/>\n                    }\n                    {image.status === \"New\" ? \n                    <div className=\"col-lg-12\">\n                        <button type=\"button\" className=\"btn btn-success col-lg-5 marg10 mgbt10\" data-action={image.documentName} id={image._id} onClick={this.approve.bind(this)}>Approve</button>\n                        <button type=\"button\" className=\"btn btn-danger col-lg-5 marg10\" data-action={image.documentName} id={image._id}   onClick={this.RejectButton.bind(this)}>Reject</button>\n                    </div>\n                    :\n                    (image.status === \"Rejected\" ?\n                      <label className=\"RejectedButton col-lg-12\">Document Rejected</label>\n                      :\n                      <label className=\"ApprovedButton col-lg-12\">Document Approved</label>\n\n                      )\n                  }\n                  {this.state[image.documentName] ?\n                  <div className=\"col-lg-12 noPadding\">\n                    <textarea id=\"w3mission\" className=\"col-lg-12\" placeholder=\"Remark\" rows=\"2\" cols=\"20\" ref=\"remark\" id=\"remark\" value={this.state.remark} name=\"remark\"  onChange={this.handleChange.bind(this)}>\n\n                    </textarea>\n                    <button type=\"button\" className=\"btn btn-primary col-lg-5 marg10 pull-right\" data-action={image.documentName}  onClick={this.Reject.bind(this)}>Submit</button>\n                  </div>\n                  :\n                  null\n                  }\n                  </div>\n                  \n                </div>\n              );\n            })\n          }\n          <div className=\"col-lg-12\"> \n            <button type=\"button\" className=\"btn btn-primary col-lg-2 marg10 pull-right\"   data-dismiss=\"modal\" onClick={this.save.bind(this)}>Save</button>\n\n          </div>\n        </div>\n          :\n          null\n        }           \n\n        </div>\n        );\n}\n}\n"]},"metadata":{},"sourceType":"module"}