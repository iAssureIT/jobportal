{"ast":null,"code":"var _jsxFileName = \"/home/mani/projects/jobportal/webapp/adminportal/src/projectadmin/AutomatedSequenceMaster/AutomatedSequenceMaster.js\";\nimport React, { Component } from 'react';\nimport { render } from 'react-dom';\nimport $ from 'jquery';\nimport jQuery from 'jquery';\nimport axios from 'axios';\nimport swal from 'sweetalert';\nimport arrayMove from 'array-move';\nimport { SortableItem, swapArrayPositions } from 'react-sort-list';\nimport IAssureTable from '../../coreadmin/IAssureTable/IAssureTable.jsx';\nimport BillingCodesTable from '../BillingCodesTable/BillingCodesTable.js';\nimport './AutomatedSequenceMaster.css';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport 'bootstrap/js/modal.js';\n\nclass AutomatedSequenceMaster extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      billTitle: \"\",\n      sequenceArray: [],\n      submitVal: true,\n      startRange: 0,\n      limitRange: 10,\n      expenseData: [],\n      tableHeading: {\n        billTitle: \"Bill Title\",\n        sequence: \"Expense Item Sequence\",\n        actions: \"Action\"\n      },\n      tableObjects: {\n        deleteMethod: 'delete',\n        apiLink: '/api/automatedbillingsequence/',\n        paginationApply: false,\n        searchApply: false,\n        editUrl: '/billing-masters'\n      }\n    };\n    this.swap = this.swap.bind(this);\n  }\n  /*======= componentDidMount() =======*/\n\n\n  componentDidMount() {\n    this.getAutomatedSequenceTable(this.state.startRange, this.state.limitRange);\n    this.getExpenseItemList();\n    jQuery.validator.setDefaults({\n      debug: true,\n      success: \"valid\"\n    });\n    $(\"#AutomatedBillingSequenceForm\").validate({\n      rules: {\n        billTitle: {\n          required: true\n        }\n      },\n      errorPlacement: function (error, element) {\n        if (element.attr(\"name\") === \"billTitle\") {\n          error.insertAfter(\"#billTitle\");\n        }\n      }\n    });\n  }\n  /*======= componentWillReceiveProps() =======*/\n\n\n  componentWillReceiveProps(nextProps) {\n    // this.getExpenseItemList();\n    if (nextProps.editId !== this.props.editId) {\n      this.setState({\n        id: nextProps.editId\n      }, () => {\n        this.edit();\n      });\n    }\n  }\n  /*======= getExpenseItemTable() =======*/\n\n\n  getAutomatedSequenceTable(startRange, limitRange) {\n    var data = {\n      startRange: startRange,\n      limitRange: limitRange\n    };\n    axios.post(this.state.tableObjects.apiLink + 'get/list', data).then(response => {\n      if (response.data) {\n        console.log(\"sequence response = \", response.data);\n        var tableData = response.data.map((a, i) => {\n          return {\n            _id: a._id,\n            billTitle: a.billTitle ? a.billTitle : \" - \",\n            sequence: \"<div class=sequenceCol>\" + (a.sequence && a.sequence.length > 0) ? a.sequence.map((aa, ii) => {\n              return aa.expenseItem;\n            }, () => {}) : \" - \" + \"</div>\"\n          };\n        });\n        this.setState({\n          automatedSequenceTableData: tableData\n        }, () => {\n          console.log(\"sequenceTableData = \", this.state.automatedSequenceTableData);\n        });\n      }\n    }).catch(error => {});\n  }\n  /*======= swap() =======*/\n\n\n  swap(dragIndex, dropIndex) {\n    let swappedSequenceArray = arrayMove(this.state.sequenceArray, dragIndex, dropIndex);\n    this.setState({\n      sequenceArray: swappedSequenceArray\n    }, () => {\n      console.log(\"Sorted List = \", this.state.sequenceArray);\n    });\n  }\n  /*======= submitData() =======*/\n\n\n  submitData(event) {\n    event.preventDefault();\n    var sequenceArray = this.state.sequenceArray;\n    var sequence = [];\n\n    if (sequenceArray && sequenceArray.length > 0) {\n      for (var i = 0; i < sequenceArray.length; i++) {\n        sequence.push({\n          sequenceNum: i + 1,\n          expenseTypeId: sequenceArray[i].expenseTypeId,\n          expenseItemId: sequenceArray[i].expenseItemId,\n          expenseItem: sequenceArray[i].expenseItem,\n          billingCode: sequenceArray[i].billingCode\n        });\n      }\n\n      var formValues = {\n        billTitle: this.state.billTitle,\n        sequence: sequence\n      };\n      var updateFormValues = {\n        id: this.state.id,\n        billTitle: this.state.billTitle,\n        sequence: sequence\n      };\n      console.log('formValues = ', formValues);\n\n      if ($(\"#AutomatedBillingSequenceForm\").valid()) {\n        if (this.state.submitVal) {\n          axios.post('/api/automatedbillingsequence/post', formValues).then(response => {\n            if (response.data.duplicated == true) {\n              swal(\" \", \"Automated Billing Expense Item Sequence Already Exist\");\n            } else {\n              this.getAutomatedSequenceTable(this.state.startRange, this.state.limitRange);\n              this.getExpenseItemList();\n              swal({\n                title: \" \",\n                text: \"Automated Billing Expense Item Sequence Added Successfully!\"\n              });\n              this.setState({\n                billTitle: \"\",\n                sequenceArray: this.state.sequenceArray,\n                submitVal: true\n              });\n            }\n          }).catch(function (error) {\n            swal({\n              title: \" \",\n              text: \"Failed to Add Automated Billing Expense Item Sequence!\"\n            });\n          });\n        } else {\n          axios.patch('/api/automatedbillingsequence/patch', updateFormValues).then(response => {\n            console.log(\"response.data.updated == \", response.data.updated);\n\n            if (response.data.updated) {\n              this.getExpenseItemList();\n              swal({\n                title: \" \",\n                text: \"Automated Billing Expense Item Sequence Updated Successfully!\"\n              });\n              this.setState({\n                id: \"\",\n                billTitle: \"\",\n                sequence: this.state.sequenceArray,\n                submitVal: true\n              }, () => {\n                this.getAutomatedSequenceTable(this.state.startRange, this.state.limitRange);\n                this.props.history.push(this.state.tableObjects.editUrl);\n              });\n            }\n\n            this.setState({\n              id: \"\",\n              billTitle: \"\",\n              sequence: this.state.sequenceArray,\n              submitVal: true\n            });\n          }).catch(function (error) {\n            swal({\n              title: \" \",\n              text: \"Failed to Update Automated Billing Expense Item Sequence!\"\n            });\n          });\n        }\n      }\n    }\n  }\n  /*======= handleChange() =======*/\n\n\n  handleChange(event) {\n    const {\n      name,\n      value\n    } = event.target;\n    this.setState({\n      [name]: value\n    });\n  }\n  /*======= edit() =======*/\n\n\n  edit() {\n    if (this.state.id && this.state.id !== 'undefined') {\n      axios.get(\"/api/automatedbillingsequence/get/one/\" + this.state.id).then(response => {\n        console.log(\"response = \", response.data.sequence);\n        var sequence = [];\n\n        if (response.data.sequence && response.data.sequence.length > 0) {\n          for (var i = 0; i < response.data.sequence.length; i++) {\n            sequence.push({\n              sequenceNum: response.data.sequence[i].sequenceNum,\n              id: response.data.sequence[i].expenseItemId,\n              expenseTypeId: response.data.sequence[i].expenseTypeId,\n              expenseItemId: response.data.sequence[i].expenseItemId,\n              expenseItem: response.data.sequence[i].expenseItem,\n              billingCode: response.data.sequence[i].billingCode\n            });\n          }\n\n          this.setState({\n            id: response.data._id,\n            billTitle: response.data.billTitle,\n            sequenceArray: sequence,\n            submitVal: false\n          }, () => {});\n        }\n      }).catch(error => {\n        console.log(\"Error edit() => \", error);\n      });\n    }\n  }\n  /*======= getExpenseItemList() =======*/\n\n\n  getExpenseItemList() {\n    axios.get(\"/api/expenseitemmaster/get/list\").then(response => {\n      console.log(\"response = \", response.data);\n      var expenseItemList = [];\n\n      if (response.data.length > 0) {\n        for (var i = 0; i < response.data.length; i++) {\n          // var expenseItemList = this.state.sequenceArray;\n          expenseItemList.push({\n            sequenceNum: i + 1,\n            id: response.data[i]._id,\n            expenseTypeId: response.data[i].expenseTypeId,\n            expenseItemId: response.data[i]._id,\n            expenseItem: response.data[i].expenseItem,\n            billingCode: response.data[i].billingCode\n          });\n          this.setState({\n            sequenceArray: expenseItemList\n          }, () => {// console.log(\"sequenceArray push list = \",this.state.sequenceArray);\n          });\n        }\n      }\n    }).catch(error => {\n      console.log(\"Error getExpenseItemList() => \", error);\n    });\n  }\n  /*======= deleteExpenseItem() =======*/\n\n\n  deleteExpenseItem(event) {\n    event.preventDefault();\n    var arrElementId = event.currentTarget.getAttribute('data-id');\n    var removeIndex = this.state.sequenceArray.map(item => item.id).indexOf(arrElementId);\n\n    if (removeIndex !== -1) {\n      this.state.sequenceArray.splice(removeIndex, 1);\n    }\n\n    var arr = this.state.sequenceArray;\n    this.setState({\n      sequenceArray: arr\n    });\n  }\n  /*======= render() =======*/\n\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container-fluid\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 298,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-lg-12 col-md-12 col-xs-12 col-sm-12 companyDisplayForm\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 299,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-lg-12 col-md-12 col-xs-12 col-sm-12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 300,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"box-header with-border col-lg-12 col-md-12 col-xs-12 col-sm-12 NOpadding-right\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 301,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"h4\", {\n      className: \"weighttitle col-lg-11 col-md-11 col-xs-11 col-sm-11 NOpadding-right\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 302,\n        columnNumber: 17\n      }\n    }, \"Automated Billing Sequence\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"box-header col-lg-12 col-md-12 col-xs-12 col-sm-12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 304,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(BillingCodesTable, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 305,\n        columnNumber: 17\n      }\n    })), /*#__PURE__*/React.createElement(\"form\", {\n      id: \"AutomatedBillingSequenceForm\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 307,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-lg-12 col-md-12 col-sm-12 col-xs-12 pdcls\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 308,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-lg-12 col-md-12 col-sm-12 col-xs-12 compForm compinfotp\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 309,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group formht col-lg-6 col-lg-offset-3 col-md-6 col-md-offset-3 col-sm-6 col-sm-offset-3 col-xs-12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 310,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 311,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      className: \"labelform\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 312,\n        columnNumber: 23\n      }\n    }, \"Bill Title\"), /*#__PURE__*/React.createElement(\"span\", {\n      className: \"astrick\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 312,\n        columnNumber: 71\n      }\n    }, \"*\"), /*#__PURE__*/React.createElement(\"input\", {\n      id: \"billTitle\",\n      \"data-text\": \"billTitle\",\n      type: \"text\",\n      name: \"billTitle\",\n      ref: \"billTitle\",\n      className: \"form-control areaStaes\",\n      value: this.state.billTitle,\n      onChange: this.handleChange.bind(this),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 313,\n        columnNumber: 23\n      }\n    }))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group col-lg-12 col-md-12 col-sm-12 col-xs-12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 319,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 320,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      className: \"labelform\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 321,\n        columnNumber: 25\n      }\n    }, \"Reorder Billing Item Sequence\"), /*#__PURE__*/React.createElement(\"span\", {\n      className: \"astrick\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 321,\n        columnNumber: 92\n      }\n    }, \"*\"), /*#__PURE__*/React.createElement(\"ul\", {\n      className: \"expenseItemSequenceList\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 322,\n        columnNumber: 26\n      }\n    }, /*#__PURE__*/React.createElement(\"li\", {\n      className: \"col-lg-12 col-md-12 col-sm-12 col-xs-12 expenseItemSequence headingList\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 323,\n        columnNumber: 27\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-lg-1 col-md-1 col-sm-1 col-xs-1 move-icon\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 324,\n        columnNumber: 29\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-lg-1 col-md-1 col-sm-1 col-xs-1 sequenceNum\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 325,\n        columnNumber: 29\n      }\n    }, \"Sr.No \"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-lg-7 col-md-7 col-sm-7 col-xs-7 expenseItem\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 326,\n        columnNumber: 29\n      }\n    }, \"Expense Item \"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-lg-2 col-md-2 col-sm-2 col-xs-2 billingCode\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 327,\n        columnNumber: 29\n      }\n    }, \"Billing Code \"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-lg-1 col-md-1 col-sm-1 col-xs-1 deleteSequence\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 328,\n        columnNumber: 29\n      }\n    }, \"Action \")), this.state.sequenceArray.map(function (data, index) {\n      return /*#__PURE__*/React.createElement(SortableItem, {\n        items: this.state.sequenceArray,\n        id: data.id,\n        key: data.expenseItemId,\n        swap: this.swap,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 332,\n          columnNumber: 33\n        }\n      }, /*#__PURE__*/React.createElement(\"li\", {\n        className: \"col-lg-12 col-md-12 col-sm-12 col-xs-12 expenseItemSequence\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 333,\n          columnNumber: 35\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"col-lg-1 col-md-1 col-sm-1 col-xs-1 move-icon\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 334,\n          columnNumber: 37\n        }\n      }, /*#__PURE__*/React.createElement(\"i\", {\n        className: \"fa fa-arrows\",\n        \"aria-hidden\": \"true\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 335,\n          columnNumber: 39\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"col-lg-1 col-md-1 col-sm-1 col-xs-1 sequenceNum\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 337,\n          columnNumber: 37\n        }\n      }, index + 1, \" \"), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"col-lg-7 col-md-7 col-sm-7 col-xs-7 expenseItem\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 338,\n          columnNumber: 37\n        }\n      }, data.expenseItem, \" \"), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"col-lg-2 col-md-2 col-sm-2 col-xs-2 billingCode\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 339,\n          columnNumber: 37\n        }\n      }, data.billingCode, \" \"), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"col-lg-1 col-md-1 col-sm-1 col-xs-1 deleteSequence\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 340,\n          columnNumber: 37\n        }\n      }, /*#__PURE__*/React.createElement(\"i\", {\n        className: \"fa fa-times\",\n        \"aria-hidden\": \"true\",\n        \"data-id\": data.id,\n        onClick: this.deleteExpenseItem.bind(this),\n        title: \"Delete\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 341,\n          columnNumber: 39\n        }\n      }))));\n    }.bind(this))))))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-lg-12 col-md-12 col-sm-12 col-xs-12  \",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 352,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      className: \"col-lg-2 col-md-2 col-sm-12 col-xs-12 btn button3 pull-right\",\n      id: \"btnCheck\",\n      onClick: this.submitData.bind(this),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 353,\n        columnNumber: 17\n      }\n    }, this.state.submitVal ? \"Submit\" : \"Update\"))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-lg-12 col-md-12 col-sm-12 col-xs-12\",\n      style: {\n        \"marginBottom\": \"30px\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 358,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(IAssureTable, {\n      tableHeading: this.state.tableHeading,\n      tableData: this.state.automatedSequenceTableData,\n      tableObjects: this.state.tableObjects,\n      getData: this.getAutomatedSequenceTable.bind(this),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 359,\n        columnNumber: 15\n      }\n    })))));\n  }\n\n}\n\nexport default AutomatedSequenceMaster;","map":{"version":3,"sources":["/home/mani/projects/jobportal/webapp/adminportal/src/projectadmin/AutomatedSequenceMaster/AutomatedSequenceMaster.js"],"names":["React","Component","render","$","jQuery","axios","swal","arrayMove","SortableItem","swapArrayPositions","IAssureTable","BillingCodesTable","AutomatedSequenceMaster","constructor","props","state","billTitle","sequenceArray","submitVal","startRange","limitRange","expenseData","tableHeading","sequence","actions","tableObjects","deleteMethod","apiLink","paginationApply","searchApply","editUrl","swap","bind","componentDidMount","getAutomatedSequenceTable","getExpenseItemList","validator","setDefaults","debug","success","validate","rules","required","errorPlacement","error","element","attr","insertAfter","componentWillReceiveProps","nextProps","editId","setState","id","edit","data","post","then","response","console","log","tableData","map","a","i","_id","length","aa","ii","expenseItem","automatedSequenceTableData","catch","dragIndex","dropIndex","swappedSequenceArray","submitData","event","preventDefault","push","sequenceNum","expenseTypeId","expenseItemId","billingCode","formValues","updateFormValues","valid","duplicated","title","text","patch","updated","history","handleChange","name","value","target","get","expenseItemList","deleteExpenseItem","arrElementId","currentTarget","getAttribute","removeIndex","item","indexOf","splice","arr","index"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiD,OAAjD;AACA,SAASC,MAAT,QAAiD,WAAjD;AACA,OAAOC,CAAP,MAAiD,QAAjD;AACA,OAAOC,MAAP,MAAiD,QAAjD;AACA,OAAOC,KAAP,MAAiD,OAAjD;AACA,OAAOC,IAAP,MAAiD,YAAjD;AACA,OAAOC,SAAP,MAAiD,YAAjD;AACA,SAASC,YAAT,EAAuBC,kBAAvB,QAAiD,iBAAjD;AACA,OAAOC,YAAP,MAAkD,+CAAlD;AACA,OAAOC,iBAAP,MAAkD,2CAAlD;AAEA,OAAO,+BAAP;AACA,OAAO,sCAAP;AACA,OAAO,uBAAP;;AAEA,MAAMC,uBAAN,SAAsCX,SAAtC,CAA+C;AAC5CY,EAAAA,WAAW,CAACC,KAAD,EAAQ;AAClB,UAAMA,KAAN;AACA,SAAKC,KAAL,GAAa;AACXC,MAAAA,SAAS,EAAW,EADT;AAEXC,MAAAA,aAAa,EAAO,EAFT;AAGXC,MAAAA,SAAS,EAAW,IAHT;AAIXC,MAAAA,UAAU,EAAU,CAJT;AAKXC,MAAAA,UAAU,EAAU,EALT;AAMXC,MAAAA,WAAW,EAAS,EANT;AAOXC,MAAAA,YAAY,EAAQ;AACEN,QAAAA,SAAS,EAAK,YADhB;AAEEO,QAAAA,QAAQ,EAAM,uBAFhB;AAGEC,QAAAA,OAAO,EAAO;AAHhB,OAPT;AAYXC,MAAAA,YAAY,EAAQ;AAClBC,QAAAA,YAAY,EAAM,QADA;AAElBC,QAAAA,OAAO,EAAW,gCAFA;AAGlBC,QAAAA,eAAe,EAAG,KAHA;AAIlBC,QAAAA,WAAW,EAAO,KAJA;AAKlBC,QAAAA,OAAO,EAAW;AALA;AAZT,KAAb;AAoBA,SAAKC,IAAL,GAAY,KAAKA,IAAL,CAAUC,IAAV,CAAe,IAAf,CAAZ;AACD;AACD;;;AACAC,EAAAA,iBAAiB,GAAE;AACjB,SAAKC,yBAAL,CAA+B,KAAKnB,KAAL,CAAWI,UAA1C,EAAqD,KAAKJ,KAAL,CAAWK,UAAhE;AACA,SAAKe,kBAAL;AAEA/B,IAAAA,MAAM,CAACgC,SAAP,CAAiBC,WAAjB,CAA6B;AAC3BC,MAAAA,KAAK,EAAI,IADkB;AAE3BC,MAAAA,OAAO,EAAE;AAFkB,KAA7B;AAKApC,IAAAA,CAAC,CAAC,+BAAD,CAAD,CAAmCqC,QAAnC,CAA4C;AAC1CC,MAAAA,KAAK,EAAG;AACNzB,QAAAA,SAAS,EAAI;AACX0B,UAAAA,QAAQ,EAAG;AADA;AADP,OADkC;AAM1CC,MAAAA,cAAc,EAAE,UAAUC,KAAV,EAAiBC,OAAjB,EAA0B;AACxC,YAAIA,OAAO,CAACC,IAAR,CAAa,MAAb,MAAyB,WAA7B,EAA0C;AACtCF,UAAAA,KAAK,CAACG,WAAN,CAAkB,YAAlB;AACH;AACF;AAVyC,KAA5C;AAYD;AACD;;;AACAC,EAAAA,yBAAyB,CAACC,SAAD,EAAW;AAClC;AACA,QAAGA,SAAS,CAACC,MAAV,KAAqB,KAAKpC,KAAL,CAAWoC,MAAnC,EACA;AACE,WAAKC,QAAL,CAAc;AACZC,QAAAA,EAAE,EAAGH,SAAS,CAACC;AADH,OAAd,EAEG,MAAI;AACL,aAAKG,IAAL;AACD,OAJD;AAKD;AACF;AACD;;;AACAnB,EAAAA,yBAAyB,CAACf,UAAD,EAAYC,UAAZ,EAAuB;AAC9C,QAAIkC,IAAI,GAAG;AACTnC,MAAAA,UAAU,EAAEA,UADH;AAETC,MAAAA,UAAU,EAAEA;AAFH,KAAX;AAIAf,IAAAA,KAAK,CAACkD,IAAN,CAAW,KAAKxC,KAAL,CAAWU,YAAX,CAAwBE,OAAxB,GAAgC,UAA3C,EAAuD2B,IAAvD,EACME,IADN,CACYC,QAAD,IAAc;AACjB,UAAIA,QAAQ,CAACH,IAAb,EAAmB;AACjBI,QAAAA,OAAO,CAACC,GAAR,CAAY,sBAAZ,EAAmCF,QAAQ,CAACH,IAA5C;AACA,YAAIM,SAAS,GAAGH,QAAQ,CAACH,IAAT,CAAcO,GAAd,CAAkB,CAACC,CAAD,EAAIC,CAAJ,KAAQ;AACxC,iBAAO;AACLC,YAAAA,GAAG,EAAYF,CAAC,CAACE,GADZ;AAELhD,YAAAA,SAAS,EAAM8C,CAAC,CAAC9C,SAAF,GAAc8C,CAAC,CAAC9C,SAAhB,GAA4B,KAFtC;AAGLO,YAAAA,QAAQ,EAAO,6BACEuC,CAAC,CAACvC,QAAF,IAAcuC,CAAC,CAACvC,QAAF,CAAW0C,MAAX,GAAoB,CADpC,IAGGH,CAAC,CAACvC,QAAF,CAAWsC,GAAX,CAAe,CAACK,EAAD,EAAKC,EAAL,KAAU;AACvB,qBACED,EAAE,CAACE,WADL;AAGD,aAJD,EAIG,MAAI,CAAE,CAJT,CAHH,GASG,QACA;AAbb,WAAP;AAeD,SAhBe,CAAhB;AAiBA,aAAKjB,QAAL,CAAc;AACZkB,UAAAA,0BAA0B,EAAGT;AADjB,SAAd,EAEG,MAAI;AACDF,UAAAA,OAAO,CAACC,GAAR,CAAY,sBAAZ,EAAmC,KAAK5C,KAAL,CAAWsD,0BAA9C;AACL,SAJD;AAKD;AACH,KA3BN,EA4BMC,KA5BN,CA4Ba1B,KAAD,IAAW,CACjB,CA7BN;AA8BD;AACD;;;AACAb,EAAAA,IAAI,CAACwC,SAAD,EAAYC,SAAZ,EAAuB;AACzB,QAAIC,oBAAoB,GAAGlE,SAAS,CAAC,KAAKQ,KAAL,CAAWE,aAAZ,EAA2BsD,SAA3B,EAAsCC,SAAtC,CAApC;AACA,SAAKrB,QAAL,CAAc;AACVlC,MAAAA,aAAa,EAAEwD;AADL,KAAd,EAEG,MAAI;AACLf,MAAAA,OAAO,CAACC,GAAR,CAAY,gBAAZ,EAA6B,KAAK5C,KAAL,CAAWE,aAAxC;AACD,KAJD;AAKD;AACD;;;AACAyD,EAAAA,UAAU,CAACC,KAAD,EAAO;AACfA,IAAAA,KAAK,CAACC,cAAN;AACA,QAAI3D,aAAa,GAAG,KAAKF,KAAL,CAAWE,aAA/B;AACA,QAAIM,QAAQ,GAAG,EAAf;;AACA,QAAGN,aAAa,IAAIA,aAAa,CAACgD,MAAd,GAAuB,CAA3C,EAA6C;AAC3C,WAAI,IAAIF,CAAC,GAAC,CAAV,EAAaA,CAAC,GAAC9C,aAAa,CAACgD,MAA7B,EAAqCF,CAAC,EAAtC,EAAyC;AACrCxC,QAAAA,QAAQ,CAACsD,IAAT,CAAc;AACVC,UAAAA,WAAW,EAAKf,CAAC,GAAC,CADR;AAEVgB,UAAAA,aAAa,EAAG9D,aAAa,CAAC8C,CAAD,CAAb,CAAiBgB,aAFvB;AAGVC,UAAAA,aAAa,EAAG/D,aAAa,CAAC8C,CAAD,CAAb,CAAiBiB,aAHvB;AAIVZ,UAAAA,WAAW,EAAKnD,aAAa,CAAC8C,CAAD,CAAb,CAAiBK,WAJvB;AAKVa,UAAAA,WAAW,EAAKhE,aAAa,CAAC8C,CAAD,CAAb,CAAiBkB;AALvB,SAAd;AAOH;;AACD,UAAIC,UAAU,GAAG;AACblE,QAAAA,SAAS,EAAS,KAAKD,KAAL,CAAWC,SADhB;AAEbO,QAAAA,QAAQ,EAAUA;AAFL,OAAjB;AAKA,UAAI4D,gBAAgB,GAAG;AACnB/B,QAAAA,EAAE,EAAgB,KAAKrC,KAAL,CAAWqC,EADV;AAEnBpC,QAAAA,SAAS,EAAS,KAAKD,KAAL,CAAWC,SAFV;AAGnBO,QAAAA,QAAQ,EAAUA;AAHC,OAAvB;AAMAmC,MAAAA,OAAO,CAACC,GAAR,CAAY,eAAZ,EAA4BuB,UAA5B;;AACA,UAAG/E,CAAC,CAAC,+BAAD,CAAD,CAAmCiF,KAAnC,EAAH,EAA8C;AAC5C,YAAI,KAAKrE,KAAL,CAAWG,SAAf,EAA0B;AACxBb,UAAAA,KAAK,CAACkD,IAAN,CAAW,oCAAX,EAAgD2B,UAAhD,EACC1B,IADD,CACOC,QAAD,IAAa;AACjB,gBAAGA,QAAQ,CAACH,IAAT,CAAc+B,UAAd,IAA4B,IAA/B,EAAoC;AAClC/E,cAAAA,IAAI,CAAC,GAAD,EAAM,uDAAN,CAAJ;AACD,aAFD,MAEK;AACH,mBAAK4B,yBAAL,CAA+B,KAAKnB,KAAL,CAAWI,UAA1C,EAAqD,KAAKJ,KAAL,CAAWK,UAAhE;AACA,mBAAKe,kBAAL;AACA7B,cAAAA,IAAI,CAAC;AACHgF,gBAAAA,KAAK,EAAK,GADP;AAEHC,gBAAAA,IAAI,EAAM;AAFP,eAAD,CAAJ;AAIA,mBAAKpC,QAAL,CAAc;AACZnC,gBAAAA,SAAS,EAAS,EADN;AAEZC,gBAAAA,aAAa,EAAK,KAAKF,KAAL,CAAWE,aAFjB;AAGZC,gBAAAA,SAAS,EAAS;AAHN,eAAd;AAKD;AACF,WAjBD,EAkBCoD,KAlBD,CAkBO,UAAU1B,KAAV,EAAiB;AACtBtC,YAAAA,IAAI,CAAC;AACHgF,cAAAA,KAAK,EAAG,GADL;AAEHC,cAAAA,IAAI,EAAI;AAFL,aAAD,CAAJ;AAID,WAvBD;AAwBD,SAzBD,MAyBK;AACHlF,UAAAA,KAAK,CAACmF,KAAN,CAAY,qCAAZ,EAAkDL,gBAAlD,EACC3B,IADD,CACOC,QAAD,IAAY;AAChBC,YAAAA,OAAO,CAACC,GAAR,CAAY,2BAAZ,EAAyCF,QAAQ,CAACH,IAAT,CAAcmC,OAAvD;;AACA,gBAAGhC,QAAQ,CAACH,IAAT,CAAcmC,OAAjB,EAAyB;AACvB,mBAAKtD,kBAAL;AACA7B,cAAAA,IAAI,CAAC;AACHgF,gBAAAA,KAAK,EAAG,GADL;AAEHC,gBAAAA,IAAI,EAAI;AAFL,eAAD,CAAJ;AAIA,mBAAKpC,QAAL,CAAc;AACVC,gBAAAA,EAAE,EAAgB,EADR;AAEVpC,gBAAAA,SAAS,EAAS,EAFR;AAGVO,gBAAAA,QAAQ,EAAU,KAAKR,KAAL,CAAWE,aAHnB;AAIVC,gBAAAA,SAAS,EAAS;AAJR,eAAd,EAKI,MAAI;AACJ,qBAAKgB,yBAAL,CAA+B,KAAKnB,KAAL,CAAWI,UAA1C,EAAqD,KAAKJ,KAAL,CAAWK,UAAhE;AACA,qBAAKN,KAAL,CAAW4E,OAAX,CAAmBb,IAAnB,CAAwB,KAAK9D,KAAL,CAAWU,YAAX,CAAwBK,OAAhD;AAED,eATH;AAUD;;AACD,iBAAKqB,QAAL,CAAc;AACVC,cAAAA,EAAE,EAAgB,EADR;AAEVpC,cAAAA,SAAS,EAAS,EAFR;AAGVO,cAAAA,QAAQ,EAAU,KAAKR,KAAL,CAAWE,aAHnB;AAIVC,cAAAA,SAAS,EAAS;AAJR,aAAd;AAMD,WA1BD,EA2BCoD,KA3BD,CA2BO,UAAU1B,KAAV,EAAiB;AACtBtC,YAAAA,IAAI,CAAC;AACHgF,cAAAA,KAAK,EAAG,GADL;AAEHC,cAAAA,IAAI,EAAI;AAFL,aAAD,CAAJ;AAID,WAhCD;AAiCD;AACF;AACF;AACF;AACD;;;AACAI,EAAAA,YAAY,CAAChB,KAAD,EAAO;AACjB,UAAM;AAACiB,MAAAA,IAAD;AAAMC,MAAAA;AAAN,QAAelB,KAAK,CAACmB,MAA3B;AACA,SAAK3C,QAAL,CAAc;AACZ,OAACyC,IAAD,GAAOC;AADK,KAAd;AAGD;AACD;;;AACAxC,EAAAA,IAAI,GAAE;AACJ,QAAI,KAAKtC,KAAL,CAAWqC,EAAX,IAAiB,KAAKrC,KAAL,CAAWqC,EAAX,KAAkB,WAAvC,EAAoD;AAClD/C,MAAAA,KAAK,CAAC0F,GAAN,CAAU,2CAAyC,KAAKhF,KAAL,CAAWqC,EAA9D,EACII,IADJ,CACUC,QAAD,IAAY;AACfC,QAAAA,OAAO,CAACC,GAAR,CAAY,aAAZ,EAA0BF,QAAQ,CAACH,IAAT,CAAc/B,QAAxC;AACA,YAAIA,QAAQ,GAAG,EAAf;;AACA,YAAGkC,QAAQ,CAACH,IAAT,CAAc/B,QAAd,IAA0BkC,QAAQ,CAACH,IAAT,CAAc/B,QAAd,CAAuB0C,MAAvB,GAAgC,CAA7D,EAA+D;AAC7D,eAAI,IAAIF,CAAC,GAAC,CAAV,EAAaA,CAAC,GAACN,QAAQ,CAACH,IAAT,CAAc/B,QAAd,CAAuB0C,MAAtC,EAA8CF,CAAC,EAA/C,EAAkD;AAChDxC,YAAAA,QAAQ,CAACsD,IAAT,CAAc;AACZC,cAAAA,WAAW,EAAKrB,QAAQ,CAACH,IAAT,CAAc/B,QAAd,CAAuBwC,CAAvB,EAA0Be,WAD9B;AAEZ1B,cAAAA,EAAE,EAAcK,QAAQ,CAACH,IAAT,CAAc/B,QAAd,CAAuBwC,CAAvB,EAA0BiB,aAF9B;AAGZD,cAAAA,aAAa,EAAGtB,QAAQ,CAACH,IAAT,CAAc/B,QAAd,CAAuBwC,CAAvB,EAA0BgB,aAH9B;AAIZC,cAAAA,aAAa,EAAGvB,QAAQ,CAACH,IAAT,CAAc/B,QAAd,CAAuBwC,CAAvB,EAA0BiB,aAJ9B;AAKZZ,cAAAA,WAAW,EAAKX,QAAQ,CAACH,IAAT,CAAc/B,QAAd,CAAuBwC,CAAvB,EAA0BK,WAL9B;AAMZa,cAAAA,WAAW,EAAKxB,QAAQ,CAACH,IAAT,CAAc/B,QAAd,CAAuBwC,CAAvB,EAA0BkB;AAN9B,aAAd;AAQD;;AACD,eAAK9B,QAAL,CAAc;AACZC,YAAAA,EAAE,EAAgBK,QAAQ,CAACH,IAAT,CAAcU,GADpB;AAEZhD,YAAAA,SAAS,EAASyC,QAAQ,CAACH,IAAT,CAActC,SAFpB;AAGZC,YAAAA,aAAa,EAAKM,QAHN;AAIZL,YAAAA,SAAS,EAAS;AAJN,WAAd,EAKE,MAAI,CAEL,CAPD;AAQD;AACH,OAxBJ,EAyBIoD,KAzBJ,CAyBW1B,KAAD,IAAS;AACbc,QAAAA,OAAO,CAACC,GAAR,CAAY,kBAAZ,EAA+Bf,KAA/B;AACF,OA3BJ;AA4BD;AACF;AACD;;;AACAT,EAAAA,kBAAkB,GAAE;AAClB9B,IAAAA,KAAK,CAAC0F,GAAN,CAAU,iCAAV,EACMvC,IADN,CACYC,QAAD,IAAY;AACfC,MAAAA,OAAO,CAACC,GAAR,CAAY,aAAZ,EAA0BF,QAAQ,CAACH,IAAnC;AACA,UAAI0C,eAAe,GAAG,EAAtB;;AACA,UAAGvC,QAAQ,CAACH,IAAT,CAAcW,MAAd,GAAuB,CAA1B,EAA4B;AAC1B,aAAK,IAAIF,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGN,QAAQ,CAACH,IAAT,CAAcW,MAAlC,EAA0CF,CAAC,EAA3C,EAA8C;AAC5C;AACAiC,UAAAA,eAAe,CAACnB,IAAhB,CAAqB;AACnBC,YAAAA,WAAW,EAAKf,CAAC,GAAC,CADC;AAEnBX,YAAAA,EAAE,EAAcK,QAAQ,CAACH,IAAT,CAAcS,CAAd,EAAiBC,GAFd;AAGnBe,YAAAA,aAAa,EAAGtB,QAAQ,CAACH,IAAT,CAAcS,CAAd,EAAiBgB,aAHd;AAInBC,YAAAA,aAAa,EAAGvB,QAAQ,CAACH,IAAT,CAAcS,CAAd,EAAiBC,GAJd;AAKnBI,YAAAA,WAAW,EAAKX,QAAQ,CAACH,IAAT,CAAcS,CAAd,EAAiBK,WALd;AAMnBa,YAAAA,WAAW,EAAKxB,QAAQ,CAACH,IAAT,CAAcS,CAAd,EAAiBkB;AANd,WAArB;AAQA,eAAK9B,QAAL,CAAc;AACZlC,YAAAA,aAAa,EAAG+E;AADJ,WAAd,EAEG,MAAI,CACL;AACD,WAJD;AAKD;AACF;AACH,KAtBN,EAuBM1B,KAvBN,CAuBa1B,KAAD,IAAS;AACbc,MAAAA,OAAO,CAACC,GAAR,CAAY,gCAAZ,EAA6Cf,KAA7C;AACF,KAzBN;AA0BD;AACD;;;AACAqD,EAAAA,iBAAiB,CAACtB,KAAD,EAAQ;AACvBA,IAAAA,KAAK,CAACC,cAAN;AACA,QAAIsB,YAAY,GAAGvB,KAAK,CAACwB,aAAN,CAAoBC,YAApB,CAAiC,SAAjC,CAAnB;AACA,QAAIC,WAAW,GAAG,KAAKtF,KAAL,CAAWE,aAAX,CAAyB4C,GAAzB,CAA6ByC,IAAI,IAAIA,IAAI,CAAClD,EAA1C,EAA8CmD,OAA9C,CAAsDL,YAAtD,CAAlB;;AACA,QAAIG,WAAW,KAAK,CAAC,CAArB,EAAwB;AACtB,WAAKtF,KAAL,CAAWE,aAAX,CAAyBuF,MAAzB,CAAgCH,WAAhC,EAA6C,CAA7C;AACD;;AACD,QAAII,GAAG,GAAG,KAAK1F,KAAL,CAAWE,aAArB;AACA,SAAKkC,QAAL,CAAc;AACZlC,MAAAA,aAAa,EAAGwF;AADJ,KAAd;AAGD;AACD;;;AACAvG,EAAAA,MAAM,GAAE;AACN,wBACE;AAAK,MAAA,SAAS,EAAC,iBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAK,MAAA,SAAS,EAAC,4DAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAK,MAAA,SAAS,EAAC,yCAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAK,MAAA,SAAS,EAAC,gFAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI;AAAI,MAAA,SAAS,EAAC,qEAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oCADJ,CADF,eAIE;AAAK,MAAA,SAAS,EAAC,oDAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI,oBAAC,iBAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADJ,CAJF,eAOE;AAAM,MAAA,EAAE,EAAC,8BAAT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAK,MAAA,SAAS,EAAC,+CAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAK,MAAA,SAAS,EAAC,6DAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAK,MAAA,SAAS,EAAC,wGAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAK,MAAA,SAAS,EAAC,YAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAO,MAAA,SAAS,EAAC,WAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBADF,eACkD;AAAM,MAAA,SAAS,EAAC,SAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WADlD,eAEE;AAAO,MAAA,EAAE,EAAC,WAAV;AAAsB,mBAAU,WAAhC;AAA4C,MAAA,IAAI,EAAC,MAAjD;AAAwD,MAAA,IAAI,EAAC,WAA7D;AAAyE,MAAA,GAAG,EAAC,WAA7E;AAAyF,MAAA,SAAS,EAAC,wBAAnG;AACE,MAAA,KAAK,EAAO,KAAKa,KAAL,CAAWC,SADzB;AAEE,MAAA,QAAQ,EAAI,KAAK2E,YAAL,CAAkB3D,IAAlB,CAAuB,IAAvB,CAFd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAFF,CADF,CADF,eAUE;AAAK,MAAA,SAAS,EAAC,oDAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAK,MAAA,SAAS,EAAC,YAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI;AAAO,MAAA,SAAS,EAAC,WAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uCADJ,eACuE;AAAM,MAAA,SAAS,EAAC,SAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WADvE,eAEK;AAAI,MAAA,SAAS,EAAC,yBAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACC;AAAI,MAAA,SAAS,EAAC,yEAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAK,MAAA,SAAS,EAAC,+CAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,eAEE;AAAK,MAAA,SAAS,EAAC,iDAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAFF,eAGE;AAAK,MAAA,SAAS,EAAC,iDAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBAHF,eAIE;AAAK,MAAA,SAAS,EAAC,iDAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBAJF,eAKE;AAAK,MAAA,SAAS,EAAC,oDAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBALF,CADD,EAQE,KAAKjB,KAAL,CAAWE,aAAX,CAAyB4C,GAAzB,CAA6B,UAAUP,IAAV,EAAgBoD,KAAhB,EAAuB;AACjD,0BACE,oBAAC,YAAD;AAAc,QAAA,KAAK,EAAE,KAAK3F,KAAL,CAAWE,aAAhC;AAA+C,QAAA,EAAE,EAAEqC,IAAI,CAACF,EAAxD;AAA4D,QAAA,GAAG,EAAEE,IAAI,CAAC0B,aAAtE;AAAqF,QAAA,IAAI,EAAE,KAAKjD,IAAhG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE;AAAI,QAAA,SAAS,EAAC,6DAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE;AAAK,QAAA,SAAS,EAAC,+CAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE;AAAG,QAAA,SAAS,EAAC,cAAb;AAA4B,uBAAY,MAAxC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADF,CADF,eAIE;AAAK,QAAA,SAAS,EAAC,iDAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAkE2E,KAAK,GAAC,CAAxE,MAJF,eAKE;AAAK,QAAA,SAAS,EAAC,iDAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAkEpD,IAAI,CAACc,WAAvE,MALF,eAME;AAAK,QAAA,SAAS,EAAC,iDAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAkEd,IAAI,CAAC2B,WAAvE,MANF,eAOE;AAAK,QAAA,SAAS,EAAC,oDAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE;AAAG,QAAA,SAAS,EAAC,aAAb;AAA2B,uBAAY,MAAvC;AAA8C,mBAAS3B,IAAI,CAACF,EAA5D;AAAgE,QAAA,OAAO,EAAE,KAAK6C,iBAAL,CAAuBjE,IAAvB,CAA4B,IAA5B,CAAzE;AAA4G,QAAA,KAAK,EAAC,QAAlH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADF,CAPF,CADF,CADF;AAeH,KAhB6B,CAgB5BA,IAhB4B,CAgBvB,IAhBuB,CAA7B,CARF,CAFL,CADF,CAVF,CADF,CADF,eA6CE;AAAK,MAAA,SAAS,EAAC,2CAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAQ,MAAA,SAAS,EAAC,8DAAlB;AAAiF,MAAA,EAAE,EAAC,UAApF;AAA+F,MAAA,OAAO,EAAE,KAAK0C,UAAL,CAAgB1C,IAAhB,CAAqB,IAArB,CAAxG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI,KAAKjB,KAAL,CAAWG,SAAX,GAAuB,QAAvB,GAAkC,QADtC,CADF,CA7CF,CAPF,eA0DE;AAAK,MAAA,SAAS,EAAC,yCAAf;AAAyD,MAAA,KAAK,EAAE;AAAC,wBAAgB;AAAjB,OAAhE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE,oBAAC,YAAD;AACE,MAAA,YAAY,EAAI,KAAKH,KAAL,CAAWO,YAD7B;AAEE,MAAA,SAAS,EAAO,KAAKP,KAAL,CAAWsD,0BAF7B;AAGE,MAAA,YAAY,EAAI,KAAKtD,KAAL,CAAWU,YAH7B;AAIE,MAAA,OAAO,EAAS,KAAKS,yBAAL,CAA+BF,IAA/B,CAAoC,IAApC,CAJlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,CA1DF,CADF,CADF,CADF;AAyED;;AAlW4C;;AAsW9C,eAAepB,uBAAf","sourcesContent":["import React, { Component }                 from 'react';\nimport { render }                           from 'react-dom';\nimport $                                    from 'jquery';\nimport jQuery                               from 'jquery';\nimport axios                                from 'axios';\nimport swal                                 from 'sweetalert';\nimport arrayMove                            from 'array-move';\nimport { SortableItem, swapArrayPositions } from 'react-sort-list';\nimport IAssureTable                         from  '../../coreadmin/IAssureTable/IAssureTable.jsx';\nimport BillingCodesTable                    from  '../BillingCodesTable/BillingCodesTable.js';\n\nimport './AutomatedSequenceMaster.css';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport 'bootstrap/js/modal.js';\n\nclass AutomatedSequenceMaster extends Component{\n   constructor(props) {\n    super(props);\n    this.state = {      \n      billTitle         : \"\",\n      sequenceArray     : [],\n      submitVal         : true, \n      startRange        : 0,\n      limitRange        : 10,\n      expenseData       : [],\n      tableHeading      : {\n                            billTitle   : \"Bill Title\",\n                            sequence    : \"Expense Item Sequence\",\n                            actions     : \"Action\"\n                          },\n      tableObjects      : {\n        deleteMethod    : 'delete',\n        apiLink         : '/api/automatedbillingsequence/',\n        paginationApply : false,\n        searchApply     : false,\n        editUrl         : '/billing-masters'\n      },     \n    };  \n    this.swap = this.swap.bind(this);  \n  }\n  /*======= componentDidMount() =======*/\n  componentDidMount(){\n    this.getAutomatedSequenceTable(this.state.startRange,this.state.limitRange);\n    this.getExpenseItemList();\n\n    jQuery.validator.setDefaults({\n      debug  : true,\n      success: \"valid\"\n    });\n\n    $(\"#AutomatedBillingSequenceForm\").validate({\n      rules : {\n        billTitle  : {\n          required : true,\n        },\n      },\n      errorPlacement: function (error, element) {\n        if (element.attr(\"name\") === \"billTitle\") {\n            error.insertAfter(\"#billTitle\");\n        }\n      } \n    });\n  }\n  /*======= componentWillReceiveProps() =======*/\n  componentWillReceiveProps(nextProps){\n    // this.getExpenseItemList();\n    if(nextProps.editId !== this.props.editId)\n    {\n      this.setState({\n        id : nextProps.editId\n      }, ()=>{\n        this.edit();\n      })                        \n    }\n  }\n  /*======= getExpenseItemTable() =======*/\n  getAutomatedSequenceTable(startRange,limitRange){\n    var data = {\n      startRange: startRange,\n      limitRange: limitRange\n    }\n    axios.post(this.state.tableObjects.apiLink+'get/list', data)\n         .then((response) => {\n            if (response.data) {\n              console.log(\"sequence response = \",response.data);\n              var tableData = response.data.map((a, i)=>{\n                return {\n                  _id          : a._id,\n                  billTitle    : a.billTitle ? a.billTitle : \" - \",\n                  sequence     : \"<div class=sequenceCol>\" + \n                                  (a.sequence && a.sequence.length > 0) \n                                  ? \n                                    a.sequence.map((aa, ii)=>{                                             \n                                      return (\n                                        aa.expenseItem\n                                      );                                       \n                                    }, ()=>{}) \n                                  : \n                                    \" - \" \n                                  + \"</div>\",\n                }\n              })\n              this.setState({\n                automatedSequenceTableData : tableData\n              }, ()=>{\n                    console.log(\"sequenceTableData = \",this.state.automatedSequenceTableData);\n              })              \n            }\n         })\n         .catch((error) => {          \n         });\n  }\n  /*======= swap() =======*/\n  swap(dragIndex, dropIndex) {\n    let swappedSequenceArray = arrayMove(this.state.sequenceArray, dragIndex, dropIndex);\n    this.setState({\n        sequenceArray: swappedSequenceArray\n    }, ()=>{\n      console.log(\"Sorted List = \",this.state.sequenceArray);\n    })\n  }\n  /*======= submitData() =======*/\n  submitData(event){\n    event.preventDefault();\n    var sequenceArray = this.state.sequenceArray;\n    var sequence = [];\n    if(sequenceArray && sequenceArray.length > 0){\n      for(var i=0; i<sequenceArray.length; i++){ \n          sequence.push({\n              sequenceNum   : i+1,\n              expenseTypeId : sequenceArray[i].expenseTypeId,\n              expenseItemId : sequenceArray[i].expenseItemId,\n              expenseItem   : sequenceArray[i].expenseItem,\n              billingCode   : sequenceArray[i].billingCode,\n          })            \n      }\n      var formValues = {\n          billTitle       : this.state.billTitle,\n          sequence        : sequence,\n      }\n\n      var updateFormValues = {\n          id              : this.state.id,\n          billTitle       : this.state.billTitle,\n          sequence        : sequence,\n      }\n      \n      console.log('formValues = ',formValues);\n      if($(\"#AutomatedBillingSequenceForm\").valid()){\n        if (this.state.submitVal) {\n          axios.post('/api/automatedbillingsequence/post',formValues)\n          .then((response)=> {          \n            if(response.data.duplicated == true){\n              swal(\" \", \"Automated Billing Expense Item Sequence Already Exist\");\n            }else{\n              this.getAutomatedSequenceTable(this.state.startRange,this.state.limitRange);\n              this.getExpenseItemList();\n              swal({\n                title   : \" \",\n                text    : \"Automated Billing Expense Item Sequence Added Successfully!\",\n              });\n              this.setState({              \n                billTitle       : \"\",\n                sequenceArray   : this.state.sequenceArray,\n                submitVal       : true\n              })\n            }   \n          })\n          .catch(function (error) {\n            swal({\n              title : \" \",\n              text  : \"Failed to Add Automated Billing Expense Item Sequence!\",\n            });\n          })\n        }else{\n          axios.patch('/api/automatedbillingsequence/patch',updateFormValues)\n          .then((response)=>{\n            console.log(\"response.data.updated == \", response.data.updated);\n            if(response.data.updated){\n              this.getExpenseItemList();\n              swal({\n                title : \" \",\n                text  : \"Automated Billing Expense Item Sequence Updated Successfully!\",\n              });\n              this.setState({\n                  id              : \"\",\n                  billTitle       : \"\",\n                  sequence        : this.state.sequenceArray,\n                  submitVal       : true,\n                },()=>{\n                  this.getAutomatedSequenceTable(this.state.startRange,this.state.limitRange);            \n                  this.props.history.push(this.state.tableObjects.editUrl);\n                              \n                }); \n            }  \n            this.setState({\n                id              : \"\",\n                billTitle       : \"\",\n                sequence        : this.state.sequenceArray,\n                submitVal       : true,\n              })                  \n          })\n          .catch(function (error) {\n            swal({\n              title : \" \",\n              text  : \"Failed to Update Automated Billing Expense Item Sequence!\",\n            });\n          })\n        }\n      }\n    }\n  }\n  /*======= handleChange() =======*/\n  handleChange(event){\n    const {name,value} = event.target;\n    this.setState({ \n      [name]:value\n    });\n  }\n  /*======= edit() =======*/\n  edit(){\n    if (this.state.id && this.state.id !== 'undefined') {\n      axios.get(\"/api/automatedbillingsequence/get/one/\"+this.state.id)\n         .then((response)=>{\n            console.log(\"response = \",response.data.sequence);\n            var sequence = [];\n            if(response.data.sequence && response.data.sequence.length > 0){\n              for(var i=0; i<response.data.sequence.length; i++){ \n                sequence.push({\n                  sequenceNum   : response.data.sequence[i].sequenceNum,\n                  id            : response.data.sequence[i].expenseItemId,\n                  expenseTypeId : response.data.sequence[i].expenseTypeId,\n                  expenseItemId : response.data.sequence[i].expenseItemId,\n                  expenseItem   : response.data.sequence[i].expenseItem,\n                  billingCode   : response.data.sequence[i].billingCode,\n                })            \n              }\n              this.setState({\n                id              : response.data._id,\n                billTitle       : response.data.billTitle,\n                sequenceArray   : sequence,\n                submitVal       : false,\n              },()=>{\n                \n              });\n            }\n         })\n         .catch((error)=>{\n            console.log(\"Error edit() => \",error);\n         })\n    }\n  }\n  /*======= getExpenseItemList() =======*/\n  getExpenseItemList(){\n    axios.get(\"/api/expenseitemmaster/get/list\")\n         .then((response)=>{\n            console.log(\"response = \",response.data);\n            var expenseItemList = [];\n            if(response.data.length > 0){\n              for (var i = 0; i < response.data.length; i++){ \n                // var expenseItemList = this.state.sequenceArray;\n                expenseItemList.push({\n                  sequenceNum   : i+1,\n                  id            : response.data[i]._id,\n                  expenseTypeId : response.data[i].expenseTypeId,\n                  expenseItemId : response.data[i]._id,\n                  expenseItem   : response.data[i].expenseItem,\n                  billingCode   : response.data[i].billingCode,\n                })\n                this.setState({\n                  sequenceArray : expenseItemList,\n                }, ()=>{\n                  // console.log(\"sequenceArray push list = \",this.state.sequenceArray);\n                })\n              }\n            }\n         })\n         .catch((error)=>{\n            console.log(\"Error getExpenseItemList() => \",error);\n         })\n  }\n  /*======= deleteExpenseItem() =======*/\n  deleteExpenseItem(event) {\n    event.preventDefault();\n    var arrElementId = event.currentTarget.getAttribute('data-id');\n    var removeIndex = this.state.sequenceArray.map(item => item.id).indexOf(arrElementId);\n    if (removeIndex !== -1) {\n      this.state.sequenceArray.splice(removeIndex, 1);\n    }\n    var arr = this.state.sequenceArray;\n    this.setState({\n      sequenceArray : arr\n    })\n  }\n  /*======= render() =======*/\n  render(){  \n    return(\n      <div className=\"container-fluid\">\n        <div className=\"col-lg-12 col-md-12 col-xs-12 col-sm-12 companyDisplayForm\">\n          <div className=\"col-lg-12 col-md-12 col-xs-12 col-sm-12\">\n            <div className=\"box-header with-border col-lg-12 col-md-12 col-xs-12 col-sm-12 NOpadding-right\">\n                <h4 className=\"weighttitle col-lg-11 col-md-11 col-xs-11 col-sm-11 NOpadding-right\">Automated Billing Sequence</h4>\n            </div>              \n            <div className=\"box-header col-lg-12 col-md-12 col-xs-12 col-sm-12\">\n                <BillingCodesTable />\n            </div>              \n            <form id=\"AutomatedBillingSequenceForm\"  >\n              <div className=\"col-lg-12 col-md-12 col-sm-12 col-xs-12 pdcls\">\n                <div className=\"col-lg-12 col-md-12 col-sm-12 col-xs-12 compForm compinfotp\">\n                  <div className=\"form-group formht col-lg-6 col-lg-offset-3 col-md-6 col-md-offset-3 col-sm-6 col-sm-offset-3 col-xs-12\">\n                    <div className=\"form-group\">\n                      <label className=\"labelform\" >Bill Title</label><span className=\"astrick\">*</span>                           \n                      <input id=\"billTitle\" data-text=\"billTitle\" type=\"text\" name=\"billTitle\" ref=\"billTitle\" className=\"form-control areaStaes\" \n                        value    = {this.state.billTitle}\n                        onChange = {this.handleChange.bind(this)} \n                      />                             \n                    </div> \n                  </div>\n                  <div className=\"form-group col-lg-12 col-md-12 col-sm-12 col-xs-12\">\n                    <div className=\"form-group\">\n                        <label className=\"labelform\" >Reorder Billing Item Sequence</label><span className=\"astrick\">*</span>                              \n                         <ul className=\"expenseItemSequenceList\">\n                          <li className=\"col-lg-12 col-md-12 col-sm-12 col-xs-12 expenseItemSequence headingList\">\n                            <div className=\"col-lg-1 col-md-1 col-sm-1 col-xs-1 move-icon\"></div>\n                            <div className=\"col-lg-1 col-md-1 col-sm-1 col-xs-1 sequenceNum\">Sr.No </div>\n                            <div className=\"col-lg-7 col-md-7 col-sm-7 col-xs-7 expenseItem\">Expense Item </div>\n                            <div className=\"col-lg-2 col-md-2 col-sm-2 col-xs-2 billingCode\">Billing Code </div>\n                            <div className=\"col-lg-1 col-md-1 col-sm-1 col-xs-1 deleteSequence\">Action </div>\n                          </li>\n                          {this.state.sequenceArray.map(function (data, index) {\n                              return (\n                                <SortableItem items={this.state.sequenceArray} id={data.id} key={data.expenseItemId} swap={this.swap}>\n                                  <li className=\"col-lg-12 col-md-12 col-sm-12 col-xs-12 expenseItemSequence\">\n                                    <div className=\"col-lg-1 col-md-1 col-sm-1 col-xs-1 move-icon\">\n                                      <i className=\"fa fa-arrows\" aria-hidden=\"true\"></i> \n                                    </div>\n                                    <div className=\"col-lg-1 col-md-1 col-sm-1 col-xs-1 sequenceNum\">{index+1} </div>\n                                    <div className=\"col-lg-7 col-md-7 col-sm-7 col-xs-7 expenseItem\">{data.expenseItem} </div>\n                                    <div className=\"col-lg-2 col-md-2 col-sm-2 col-xs-2 billingCode\">{data.billingCode} </div>\n                                    <div className=\"col-lg-1 col-md-1 col-sm-1 col-xs-1 deleteSequence\">\n                                      <i className=\"fa fa-times\" aria-hidden=\"true\" data-id={data.id} onClick={this.deleteExpenseItem.bind(this)} title=\"Delete\"></i> \n                                    </div>\n                                  </li>\n                                </SortableItem>\n                              )\n                          }.bind(this))}\n                        </ul>            \n                    </div>  \n                  </div>\n                </div>                    \n              </div>\n              <div className=\"col-lg-12 col-md-12 col-sm-12 col-xs-12  \">\n                <button className=\"col-lg-2 col-md-2 col-sm-12 col-xs-12 btn button3 pull-right\" id=\"btnCheck\" onClick={this.submitData.bind(this)} >\n                  { this.state.submitVal ? \"Submit\" : \"Update\" }  \n                </button>\n              </div>\n            </form>\n            <div className=\"col-lg-12 col-md-12 col-sm-12 col-xs-12\" style={{\"marginBottom\": \"30px\"}}>\n              <IAssureTable\n                tableHeading = {this.state.tableHeading}\n                tableData    = {this.state.automatedSequenceTableData}\n                tableObjects = {this.state.tableObjects}\n                getData      = {this.getAutomatedSequenceTable.bind(this)}\n              />\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n }\n\n export default AutomatedSequenceMaster;"]},"metadata":{},"sourceType":"module"}