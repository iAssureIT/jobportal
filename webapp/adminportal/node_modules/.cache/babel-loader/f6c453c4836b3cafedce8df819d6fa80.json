{"ast":null,"code":"var _jsxFileName = \"/home/mani/projects/jobportal/webapp/adminportal/src/projectadmin/Dashboard/Charts/PieChart.js\";\nimport React, { Component } from 'react';\nimport { render } from 'react-dom';\nimport { Pie } from 'react-chartjs-2';\nimport 'chartjs-plugin-labels';\nimport axios from 'axios';\nimport moment from 'moment';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport 'font-awesome/css/font-awesome.min.css';\nimport '../dashboard.css';\nexport default class PieChart extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      boxColor: props.boxColor,\n      title: props.title,\n      display: props.display,\n      \"data\": {\n        labels: [],\n        datasets: [{\n          data: [],\n          backgroundColor: [],\n          hoverBackgroundColor: []\n        }]\n      }\n    };\n  }\n\n  componentDidMount() {\n    if (this.props.display) {\n      this.setState({\n        boxColor: this.props.boxColor,\n        title: this.props.title,\n        apiData: this.props.api\n      }, () => {\n        this.getData();\n      });\n    }\n  }\n\n  componentWillMount() {\n    if (this.props.display) {\n      this.setState({\n        boxColor: this.props.boxColor,\n        title: this.props.title,\n        apiData: this.props.api\n      }, () => {\n        this.getData();\n      });\n    }\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if (nextProps.display) {\n      this.setState({\n        boxColor: nextProps.boxColor,\n        title: nextProps.title,\n        apiData: nextProps.api\n      }, () => {\n        this.getData();\n      });\n    }\n  }\n\n  getData() {\n    var data = { ...this.state.data\n    };\n\n    if (this.state.apiData) {\n      var Method = this.state.apiData.method;\n      var Path = this.state.apiData.path;\n      axios({\n        method: Method,\n        url: Path\n      }).then(response => {\n        console.log('response=>', response);\n        var booking = [];\n        var piechartcolor = [];\n        var totalEstimate = [];\n\n        if (response.data && response.data.length > 0) {\n          response.data.map((data, index) => {\n            booking.push(data.name);\n            totalEstimate.push(data.totalCost);\n            piechartcolor.push(this.getRandomColor());\n          });\n\n          if (totalEstimate.length > 0) {\n            data.datasets[0].data = totalEstimate;\n            data.labels = booking;\n            data.datasets[0].backgroundColor = piechartcolor;\n            data.datasets[0].hoverBackgroundColor = piechartcolor;\n            this.setState({\n              \"data\": data\n            });\n          }\n        }\n      }).catch(error => {\n        console.log('error=>', error);\n      });\n    }\n  }\n\n  getRandomColor() {\n    var letters = '01234ABCDEF56789';\n    var color = '#';\n\n    for (var i = 0; i < 6; i++) {\n      color += letters[Math.floor(Math.random() * 16)];\n    }\n\n    return color;\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 7\n      }\n    }, this.state.display ? /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-6\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"box \" + this.state.boxColor,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"box-header with-border\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"h3\", {\n      className: \"box-title\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 15\n      }\n    }, this.state.title)), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"box-body no-padding\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 13\n      }\n    }, this.state.data && this.state.data.datasets[0].data.length > 0 ? /*#__PURE__*/React.createElement(Pie, {\n      height: 150,\n      data: this.state.data,\n      options: {\n        legend: {\n          display: false\n        },\n        plugins: {\n          labels: [{\n            render: 'label',\n            position: 'outside',\n            fontColor: '#000',\n            textMargin: 8\n          }, {\n            render: 'percentage',\n            fontColor: '#fff'\n          }]\n        }\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123,\n        columnNumber: 15\n      }\n    }) : /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 137,\n        columnNumber: 20\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      className: \"chartStyle\",\n      src: \"/images/pie.gif\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 20\n      }\n    }), /*#__PURE__*/React.createElement(\"p\", {\n      className: \"pull-right noChartData\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 20\n      }\n    }, \"No Data Found\"))))) : null);\n  }\n\n}","map":{"version":3,"sources":["/home/mani/projects/jobportal/webapp/adminportal/src/projectadmin/Dashboard/Charts/PieChart.js"],"names":["React","Component","render","Pie","axios","moment","PieChart","constructor","props","state","boxColor","title","display","labels","datasets","data","backgroundColor","hoverBackgroundColor","componentDidMount","setState","apiData","api","getData","componentWillMount","componentWillReceiveProps","nextProps","Method","method","Path","path","url","then","response","console","log","booking","piechartcolor","totalEstimate","length","map","index","push","name","totalCost","getRandomColor","catch","error","letters","color","i","Math","floor","random","legend","plugins","position","fontColor","textMargin"],"mappings":"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","sourcesContent":["import React,{Component} from 'react';\nimport { render } from 'react-dom';\nimport {Pie} from 'react-chartjs-2';\nimport 'chartjs-plugin-labels';\nimport axios             from 'axios';\nimport moment                   from 'moment';\n\n\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport 'font-awesome/css/font-awesome.min.css';\n\nimport '../dashboard.css';\n\nexport default class PieChart extends Component{\n  \n  constructor(props) {\n   super(props);\n    this.state = {\n      boxColor:props.boxColor,\n      title:props.title,\n      display:props.display,\n      \"data\" : {\n      labels: [],\n      datasets: [{\n        data: [],\n        backgroundColor: [] ,\n        hoverBackgroundColor: []\n        }]\n      }\n    }\n  }\n   \n  componentDidMount(){\n    if(this.props.display){\n      this.setState({\n        boxColor: this.props.boxColor,\n        title: this.props.title,\n        apiData : this.props.api,\n      },()=>{this.getData()})\n    }\n  }\n\n  componentWillMount(){\n    if(this.props.display){\n      this.setState({\n        boxColor: this.props.boxColor,\n        title: this.props.title,\n        apiData : this.props.api,\n      },()=>{this.getData()})\n    }\n  }\n\n  componentWillReceiveProps(nextProps){\n    if(nextProps.display){\n      this.setState({\n        boxColor: nextProps.boxColor,\n        title: nextProps.title,\n        apiData : nextProps.api,\n      },()=>{this.getData()})\n    }\n  }\n\n  getData(){\n    var data = {...this.state.data};\n\n    if(this.state.apiData){\n      var Method = this.state.apiData.method;\n      var Path = this.state.apiData.path;\n        axios({\n          method: Method,\n          url: Path\n        })\n        .then((response)=>{ \n          console.log('response=>',response)\n          var booking = [];\n          var piechartcolor =[];\n          var totalEstimate = [];\n         if(response.data && response.data.length >0){\n            response.data.map((data,index)=>{ \n              booking.push(data.name);\n              totalEstimate.push(data.totalCost);\n              piechartcolor.push(this.getRandomColor());\n            })\n          if (totalEstimate.length > 0) {\n            data.datasets[0].data = totalEstimate;\n            data.labels = booking;\n            data.datasets[0].backgroundColor = piechartcolor;\n            data.datasets[0].hoverBackgroundColor = piechartcolor;\n            this.setState({\n              \"data\" : data\n            })\n            \n          }\n        }  \n      })\n      .catch((error)=>{  \n        console.log('error=>',error)      \n      });\n    }\n  }\n\n  getRandomColor(){\n    var letters = '01234ABCDEF56789';\n    var color = '#';\n    for (var i = 0; i < 6; i++) {\n      color += letters[Math.floor(Math.random() * 16)];\n    }\n    return color;\n  }\n    \n  render(){\n    return(\n      <div>\n      {this.state.display ?\n        <div className=\"col-md-6\">\n          <div className={\"box \"+this.state.boxColor}>\n            <div className=\"box-header with-border\">\n              <h3 className=\"box-title\">{this.state.title}</h3>\n            </div>\n            <div className=\"box-body no-padding\">\n              \n              {this.state.data && this.state.data.datasets[0].data.length > 0 ?\n              <Pie height={150} data={this.state.data} options={{legend: {display: false},\n                plugins: {\n                   labels: [{\n                    render: 'label',\n                    position: 'outside',\n                    fontColor: '#000',\n                    textMargin: 8\n                  },\n                  {\n                    render: 'percentage',\n                    fontColor: '#fff',\n                  }\n                   ]} }} />\n                   :\n                   <div>\n                   <img className=\"chartStyle\" src=\"/images/pie.gif\"/>\n                   <p className=\"pull-right noChartData\">No Data Found</p>\n                   </div>\n                 }\n            </div>\n          </div>\n        </div> \n        :\n        null\n      }\n      </div>\n        );\n  }\n}\n"]},"metadata":{},"sourceType":"module"}