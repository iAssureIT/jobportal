{"ast":null,"code":"var _jsxFileName = \"/home/mani/projects/jobportal/webapp/adminportal/src/projectadmin/DesignationMapping/DesignationMapping.js\";\nimport React, { Component } from 'react';\nimport $ from 'jquery';\nimport jQuery from 'jquery';\nimport axios from 'axios';\nimport swal from 'sweetalert';\nimport _ from 'underscore';\nimport 'bootstrap/js/tab.js';\nimport 'react-phone-input-2/lib/style.css';\nimport moment from 'moment';\n\nclass DesignationMapping extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      // \"pathname\"                  : this.props.match.params.entity,\n      \"openForm\": false,\n      \"selectedCorporate\": {},\n      \"selectedCorporateLocation\": {},\n      \"selectedVendor\": {},\n      \"selectedVendorLocation\": {},\n      \"packageArray\": [],\n      \"selectedPackages\": [],\n      \"packageList\": []\n    };\n    this.handleChange = this.handleChange.bind(this);\n    this.submit = this.submit.bind(this);\n  }\n\n  componentDidMount() {\n    this.getPackages();\n    this.getCategory();\n    this.getPackageDetails();\n    this.getDesignationData();\n    window.scrollTo(0, 0);\n  }\n\n  componentWillUnmount() {\n    $(\"script[src='/js/adminLte.js']\").remove();\n    $(\"link[href='/css/dashboard.css']\").remove();\n  }\n\n  handleChange(event) {\n    // event.preventDefault();\n    const target = event.target;\n    const name = target.name;\n    this.setState({\n      [name]: event.target.value\n    }, () => {\n      console.log([name]);\n    });\n  }\n\n  componentWillReceiveProps(nextProps) {\n    var contractID = nextProps.match.params.contractID;\n    var packageID = nextProps.match.params.packageID;\n\n    if (contractID && packageID) {\n      this.edit();\n    }\n\n    this.handleChange = this.handleChange.bind(this);\n  }\n\n  getDesignationData() {\n    axios.get(\"/api/designationmaster/get/list\").then(response => {\n      this.setState({\n        \"designationArray\": response.data\n      }, () => {\n        console.log(\"designationArray\", this.state.designationArray);\n      });\n    }).catch(error => {});\n  }\n\n  getPackages() {\n    axios.get(\"/api/packagemaster/get/list\").then(response => {\n      this.setState({\n        \"packageArray\": response.data\n      });\n    }).catch(error => {});\n  }\n\n  getCategory() {\n    axios.get(\"/api/categorymaster/get/list\").then(res => {\n      this.setState({\n        \"categoryArray\": res.data\n      });\n    }).catch(error => {});\n  }\n\n  submit(event) {\n    event.preventDefault();\n    var formValues = {\n      contractID: this.props.match.params.contractID,\n      packageID: this.props.match.params.packageID // packages   : packages\n\n    };\n    axios.post(\"/api/contract/post/updatepackage\", formValues).then(response => {\n      swal(\"Mapping added successfully.\");\n      this.getPackageDetails();\n    }).catch(error => {});\n  }\n\n  getPackageDetails() {\n    axios.get(\"/api/contract/get/one/\" + this.props.match.params.contractID).then(response => {\n      var packageIds = [];\n\n      for (var i = 0; i < response.data.packages.length; i++) {\n        packageIds.push(response.data.packages[i].packageId);\n      }\n\n      this.setState({\n        packageIds: packageIds,\n        packageList: response.data.packages\n      });\n    }).catch(error => {});\n  }\n\n  delete(event) {\n    var contractID = this.props.match.params.contractID;\n    var packageID = event.target.id;\n    axios.delete(\"/api/contract/deletepackageincontract/\" + contractID + \"/\" + packageID).then(response => {\n      swal(\"Package deleted successfully.\");\n      this.getPackageDetails();\n    }).catch(error => {});\n  }\n\n  back(event) {\n    event.preventDefault();\n    var contractID = this.props.match.params.contractID;\n\n    if (this.state.openForm === true) {\n      swal({\n        // title: 'abc',\n        text: \"It seem that you are trying to add a package. Click 'Cancel' to continue adding package. Click 'Ok' to go to next page. But you may lose values if already entered in the package form.\",\n        buttons: {\n          cancel: {\n            text: \"Cancel\",\n            value: false,\n            visible: true,\n            className: \"CancelButtonSwal\"\n          },\n          confirm: {\n            text: \"OK\",\n            value: true,\n            visible: true,\n            className: \"OkButtonSwal\",\n            closeModal: true\n          }\n        }\n      }).then(value => {\n        if (value) {\n          if (contractID) {\n            this.props.history.push(\"/contract-management/\" + contractID);\n          } else {\n            this.props.history.push(\"/contract-management\");\n          }\n        } else {\n          this.props.history.push(\"/package-details/\" + contractID);\n        }\n      });\n      $(\".OkButtonSwal\").parents('.swal-button-container').addClass('postionSwalRight');\n      $(\".CancelButtonSwal\").parents('.swal-button-container').addClass('postionSwalLeft');\n    } else {\n      if (contractID) {\n        this.props.history.push(\"/contract-management/\" + contractID);\n      } else {\n        this.props.history.push(\"/contract-management\");\n      }\n    }\n  }\n\n  next(event) {\n    event.preventDefault();\n    var contractID = this.props.match.params.contractID;\n\n    if (this.state.openForm === true) {\n      swal({\n        // title: 'abc',\n        text: \"It seem that you are trying to add a package. Click 'Cancel' to continue adding package. Click 'Ok' to go to next page. But you may lose values if already entered in the package form.\",\n        buttons: {\n          cancel: {\n            text: \"Cancel\",\n            value: false,\n            visible: true,\n            className: \"CancelButtonSwal\"\n          },\n          confirm: {\n            text: \"OK\",\n            value: true,\n            visible: true,\n            className: \"OkButtonSwal\",\n            closeModal: true\n          }\n        }\n      }).then(value => {\n        if (value) {\n          this.props.history.push(\"/condition/\" + contractID);\n        } else {\n          this.props.history.push(\"/package-details/\" + contractID);\n        }\n      });\n      $(\".OkButtonSwal\").parents('.swal-button-container').addClass('postionSwalRight');\n      $(\".CancelButtonSwal\").parents('.swal-button-container').addClass('postionSwalLeft');\n    } else {\n      this.props.history.push(\"/condition/\" + contractID);\n    }\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container-fluid\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 229,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-lg-12 col-md-12 col-xs-12 col-sm-12 companyDisplayForm\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 230,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-lg-12 col-md-12 col-xs-12 col-sm-12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 231,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"box-header with-border col-lg-12 col-md-12 col-xs-12 col-sm-12 NOpadding-right\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 232,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"h4\", {\n      className: \"weighttitle col-lg-11 col-md-11 col-xs-11 col-sm-11 NOpadding-right\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 233,\n        columnNumber: 33\n      }\n    }, \"Vehicle Category & Designation Mapping\")), /*#__PURE__*/React.createElement(\"section\", {\n      className: \"Content\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 235,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 236,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-lg-12 col-md-12 col-sm-12 col-xs-12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 237,\n        columnNumber: 37\n      }\n    }, /*#__PURE__*/React.createElement(\"form\", {\n      id: \"ContractManagement\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 238,\n        columnNumber: 41\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      cassName: \"col-lg-12 col-md-12 col-sm-12 col-xs-12 \",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 239,\n        columnNumber: 45\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-lg-12 col-md-12 col-sm-12 submitForm\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 240,\n        columnNumber: 49\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-lg-12 col-md-12 col-sm-12 col-xs-12 NOpadding\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 241,\n        columnNumber: 53\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-lg-12 col-md-12 col-sm-12 col-xs-12  NOpadding\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 242,\n        columnNumber: 57\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-margin col-lg-12 col-md-12 col-sm-12 col-xs-12 NOpadding\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 243,\n        columnNumber: 61\n      }\n    }, /*#__PURE__*/React.createElement(\"table\", {\n      className: \"table textAlignLeft\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 244,\n        columnNumber: 61\n      }\n    }, /*#__PURE__*/React.createElement(\"thead\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 245,\n        columnNumber: 65\n      }\n    }, /*#__PURE__*/React.createElement(\"tr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 246,\n        columnNumber: 69\n      }\n    }, /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 247,\n        columnNumber: 73\n      }\n    }), this.state.categoryArray && this.state.categoryArray.length > 0 ? this.state.categoryArray.map((data, i) => {\n      return /*#__PURE__*/React.createElement(\"th\", {\n        key: i,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 252,\n          columnNumber: 89\n        }\n      }, data.category);\n    }) : null)), /*#__PURE__*/React.createElement(\"tbody\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 260,\n        columnNumber: 65\n      }\n    }, this.state.designationArray && this.state.designationArray.length > 0 ? this.state.designationArray.map((updata, index) => {\n      return /*#__PURE__*/React.createElement(\"tr\", {\n        key: index,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 264,\n          columnNumber: 81\n        }\n      }, /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 265,\n          columnNumber: 85\n        }\n      }, updata.designation), this.state.categoryArray && this.state.categoryArray.length > 0 ? this.state.categoryArray.map((data, i) => {\n        return /*#__PURE__*/React.createElement(\"td\", {\n          key: i,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 270,\n            columnNumber: 101\n          }\n        }, /*#__PURE__*/React.createElement(\"input\", {\n          type: \"checkbox\",\n          value: this.state[updata.designation + \"|\" + data._id] ? this.state[updata.designation + \"|\" + data._id] : \"\",\n          name: updata.designation + \"|\" + data._id // checked={this.state[updata.designation+\"|\"+data._id] ? \"checked\":\"unchecked\"}\n          ,\n          onChange: this.handleChange //onKeyDown={updata.max ? ((event)=>(event.target.value > updata.max ? (((event.which ? event.which : event.keyCode) !== 8) ? (event.preventDefault(), true) : false) : true)): ()=>{}}\n          //className=\"form-control\" style={{\"width\" : \"90px\", \"height\": \"25px\", \"display\": \"inline-block\"}} \n          ,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 271,\n            columnNumber: 105\n          }\n        }));\n      }) : null);\n    }) : null))))))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-lg-12 col-md-12 col-sm-12 col-xs-12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 300,\n        columnNumber: 45\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-lg-12 col-md-12 col-sm-12 col-xs-12 mt\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 301,\n        columnNumber: 49\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      id: \"submitbtn\",\n      className: \"btn button3 pull-right\",\n      onClick: this.submit.bind(this),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 302,\n        columnNumber: 53\n      }\n    }, \"Submit\"))))))))));\n  }\n\n}\n\nexport default DesignationMapping;","map":{"version":3,"sources":["/home/mani/projects/jobportal/webapp/adminportal/src/projectadmin/DesignationMapping/DesignationMapping.js"],"names":["React","Component","$","jQuery","axios","swal","_","moment","DesignationMapping","constructor","props","state","handleChange","bind","submit","componentDidMount","getPackages","getCategory","getPackageDetails","getDesignationData","window","scrollTo","componentWillUnmount","remove","event","target","name","setState","value","console","log","componentWillReceiveProps","nextProps","contractID","match","params","packageID","edit","get","then","response","data","designationArray","catch","error","res","preventDefault","formValues","post","packageIds","i","packages","length","push","packageId","packageList","delete","id","back","openForm","text","buttons","cancel","visible","className","confirm","closeModal","history","parents","addClass","next","render","categoryArray","map","category","updata","index","designation","_id"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport $ from 'jquery';\nimport jQuery from 'jquery';\nimport axios from 'axios';\nimport swal from 'sweetalert';\nimport _ from 'underscore';\nimport 'bootstrap/js/tab.js';\nimport 'react-phone-input-2/lib/style.css';\nimport moment from 'moment';\nclass DesignationMapping extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            // \"pathname\"                  : this.props.match.params.entity,\n            \"openForm\"                  : false,\n            \"selectedCorporate\"         : {},\n            \"selectedCorporateLocation\" : {},\n            \"selectedVendor\"            : {},\n            \"selectedVendorLocation\"    : {},\n            \"packageArray\"              : [],\n            \"selectedPackages\"          : [],\n            \"packageList\"               : [],\n        };\n\n        this.handleChange = this.handleChange.bind(this);\n        this.submit = this.submit.bind(this);\n    }\n    componentDidMount() {\n        this.getPackages();\n        this.getCategory();\n        this.getPackageDetails();\n        this.getDesignationData();\n        window.scrollTo(0, 0);\n    }\n    componentWillUnmount() {\n        $(\"script[src='/js/adminLte.js']\").remove();\n        $(\"link[href='/css/dashboard.css']\").remove();\n    }\n    handleChange(event) {\n        // event.preventDefault();\n        const target = event.target;\n        const name = target.name;\n\n        this.setState({\n            [name]: event.target.value\n        },()=>{\n            console.log([name])\n        });\n    }\n    componentWillReceiveProps(nextProps) {\n        var contractID = nextProps.match.params.contractID;\n        var packageID  = nextProps.match.params.packageID;\n        if (contractID && packageID) {\n            this.edit();\n        }\n        this.handleChange = this.handleChange.bind(this);\n    }\n    \n    getDesignationData()\n    {\n        axios.get(\"/api/designationmaster/get/list\")\n        .then((response)=>{\n            this.setState({\n                \"designationArray\" : response.data\n            },()=>{\n                console.log(\"designationArray\",this.state.designationArray);\n            })\n        })\n        .catch((error)=>{\n\n        })\n\n    }\n    getPackages(){\n        axios.get(\"/api/packagemaster/get/list\")\n        .then((response)=>{\n            this.setState({\n                \"packageArray\" : response.data\n            })\n        })\n        .catch((error)=>{\n\n        })\n    }\n    getCategory(){\n        axios.get(\"/api/categorymaster/get/list\")\n        .then((res)=>{\n            this.setState({\n                \"categoryArray\" : res.data\n            })\n        })\n        .catch((error)=>{\n\n        })\n    }\n    submit(event) {\n        event.preventDefault();\n       \n        var formValues = {\n            contractID : this.props.match.params.contractID,\n            packageID  : this.props.match.params.packageID,\n           // packages   : packages\n        }\n        axios.post(\"/api/contract/post/updatepackage\", formValues)\n        .then((response)=>{\n            swal(\"Mapping added successfully.\");\n            this.getPackageDetails();\n        })\n        .catch((error)=>{\n\n        })\n        \n    }\n    \n    getPackageDetails(){\n        axios.get(\"/api/contract/get/one/\"+this.props.match.params.contractID)\n        .then((response)=>{\n            var packageIds = [];\n            for(var i=0; i<response.data.packages.length; i++){\n                packageIds.push(response.data.packages[i].packageId);\n            }\n            this.setState({\n                packageIds  : packageIds,\n                packageList : response.data.packages\n            })\n        })\n        .catch((error)=>{\n\n        })\n    }\n    delete(event){\n        var contractID = this.props.match.params.contractID;\n        var packageID = event.target.id;\n        axios.delete(\"/api/contract/deletepackageincontract/\"+contractID+\"/\"+packageID)\n        .then((response)=>{\n            swal(\"Package deleted successfully.\")\n            this.getPackageDetails();\n        })\n        .catch((error)=>{\n\n        })\n    }\n    back(event) {\n\t\tevent.preventDefault();\n\t\tvar contractID = this.props.match.params.contractID;\n\t\t\n\t\tif (this.state.openForm === true) {\n\t\t\tswal({\n\t\t\t\t// title: 'abc',\n\t\t\t\ttext: \"It seem that you are trying to add a package. Click 'Cancel' to continue adding package. Click 'Ok' to go to next page. But you may lose values if already entered in the package form.\",\n\t\t\t\tbuttons: {\n\t\t\t\t\tcancel: {\n\t\t\t\t\t\ttext: \"Cancel\",\n\t\t\t\t\t\tvalue: false,\n\t\t\t\t\t\tvisible: true,\n\t\t\t\t\t\tclassName: \"CancelButtonSwal\"\n\t\t\t\t\t},\n\t\t\t\t\tconfirm: {\n\t\t\t\t\t\ttext: \"OK\",\n\t\t\t\t\t\tvalue: true,\n\t\t\t\t\t\tvisible: true,\n\t\t\t\t\t\tclassName: \"OkButtonSwal\",\n\t\t\t\t\t\tcloseModal: true\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t})\n\t\t\t.then((value) => {\n\t\t\t\tif(value){\n\t\t\t\t\tif(contractID){\n                        this.props.history.push(\"/contract-management/\"+contractID);\n                    }else{\n                        this.props.history.push(\"/contract-management\");\n                    }\n\t\t\t\t}else{\n\t\t\t\t\tthis.props.history.push(\"/package-details/\" + contractID);\n\t\t\t\t}\n\t\t\t})\n\t\t\t$(\".OkButtonSwal\").parents('.swal-button-container').addClass('postionSwalRight');\n\t\t\t$(\".CancelButtonSwal\").parents('.swal-button-container').addClass('postionSwalLeft');\n\n\t\t} else {\n\t\t\tif(contractID){\n\t\t\t\tthis.props.history.push(\"/contract-management/\"+contractID);\n\t\t\t}else{\n\t\t\t\tthis.props.history.push(\"/contract-management\");\n\t\t\t}\n\t\t}\n    }\n    next(event) {\n\t\tevent.preventDefault();\n\t\tvar contractID = this.props.match.params.contractID;\n\t\tif (this.state.openForm === true) {\n\t\t\tswal({\n\t\t\t\t// title: 'abc',\n\t\t\t\ttext: \"It seem that you are trying to add a package. Click 'Cancel' to continue adding package. Click 'Ok' to go to next page. But you may lose values if already entered in the package form.\",\n\t\t\t\tbuttons: {\n\t\t\t\t\tcancel: {\n\t\t\t\t\t\ttext: \"Cancel\",\n\t\t\t\t\t\tvalue: false,\n\t\t\t\t\t\tvisible: true,\n\t\t\t\t\t\tclassName: \"CancelButtonSwal\"\n\t\t\t\t\t},\n\t\t\t\t\tconfirm: {\n\t\t\t\t\t\ttext: \"OK\",\n\t\t\t\t\t\tvalue: true,\n\t\t\t\t\t\tvisible: true,\n\t\t\t\t\t\tclassName: \"OkButtonSwal\",\n\t\t\t\t\t\tcloseModal: true\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t})\n\t\t\t\t.then((value) => {\n\t\t\t\t\tif(value){\n\t\t\t\t\t\tthis.props.history.push(\"/condition/\" + contractID);\n\t\t\t\t\t}else{\n\t\t\t\t\t\tthis.props.history.push(\"/package-details/\" + contractID);\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t$(\".OkButtonSwal\").parents('.swal-button-container').addClass('postionSwalRight');\n\t\t\t$(\".CancelButtonSwal\").parents('.swal-button-container').addClass('postionSwalLeft');\n\n\t\t} else {\n\t\t\tthis.props.history.push(\"/condition/\" + contractID);\n\t\t}\n    }\n    \n    render() {\n        return (     \n                <div className=\"container-fluid\">\n                    <div className=\"col-lg-12 col-md-12 col-xs-12 col-sm-12 companyDisplayForm\">\n                        <div className=\"col-lg-12 col-md-12 col-xs-12 col-sm-12\">\n                            <div className=\"box-header with-border col-lg-12 col-md-12 col-xs-12 col-sm-12 NOpadding-right\">\n                                <h4 className=\"weighttitle col-lg-11 col-md-11 col-xs-11 col-sm-11 NOpadding-right\">Vehicle Category & Designation Mapping</h4>\n                            </div>\n                            <section className=\"Content\">\n                                <div className=\"row\">\n                                    <div className=\"col-lg-12 col-md-12 col-sm-12 col-xs-12\">\n                                        <form id=\"ContractManagement\">\n                                            <div cassName=\"col-lg-12 col-md-12 col-sm-12 col-xs-12 \">\n                                                <div className=\"col-lg-12 col-md-12 col-sm-12 submitForm\">\n                                                    <div className=\"col-lg-12 col-md-12 col-sm-12 col-xs-12 NOpadding\">\n                                                        <div className=\"col-lg-12 col-md-12 col-sm-12 col-xs-12  NOpadding\">\n                                                            <div className=\"form-margin col-lg-12 col-md-12 col-sm-12 col-xs-12 NOpadding\">\n                                                            <table className=\"table textAlignLeft\">\n                                                                <thead>\n                                                                    <tr>\n                                                                        <th></th>\n                                                                        {\n                                                                            this.state.categoryArray && this.state.categoryArray.length > 0 ?\n                                                                                this.state.categoryArray.map((data, i)=>{\n                                                                                    return(\n                                                                                        <th key={i}>{data.category}</th>\n                                                                                    );\n                                                                                })\n                                                                            :\n                                                                            null\n                                                                        }\n                                                                    </tr>\n                                                                </thead>\n                                                                <tbody>\n                                                                    {   this.state.designationArray && this.state.designationArray.length > 0 ?\n                                                                        this.state.designationArray.map((updata, index)=>{\n                                                                            return(\n                                                                                <tr key={index}>\n                                                                                    <td>{updata.designation}</td>\n                                                                                    {\n                                                                                        this.state.categoryArray && this.state.categoryArray.length > 0 ?\n                                                                                            this.state.categoryArray.map((data, i)=>{\n                                                                                                return(\n                                                                                                    <td key={i}>\n                                                                                                        <input  type=\"checkbox\" \n                                                                                                                value={this.state[updata.designation+\"|\"+data._id] ? this.state[updata.designation+\"|\"+data._id]  : \"\"} \n                                                                                                                name={updata.designation+\"|\"+data._id} \n                                                                                                                // checked={this.state[updata.designation+\"|\"+data._id] ? \"checked\":\"unchecked\"}\n                                                                                                                onChange={this.handleChange}\n                                                                                                                //onKeyDown={updata.max ? ((event)=>(event.target.value > updata.max ? (((event.which ? event.which : event.keyCode) !== 8) ? (event.preventDefault(), true) : false) : true)): ()=>{}}\n                                                                                                               \n                                                                                                                //className=\"form-control\" style={{\"width\" : \"90px\", \"height\": \"25px\", \"display\": \"inline-block\"}} \n                                                                                                                />\n                                                                                                    </td>\n                                                                                                );\n                                                                                            })\n                                                                                        :\n                                                                                        null\n                                                                                    }\n                                                                                </tr>\n                                                                            );\n                                                                        })\n                                                                        :\n                                                                        null\n                                                                    }\n                                                                    \n                                                                </tbody>\n                                                            </table>\n                                                            </div>\n                                                        </div>\n                                                    </div>\n                                                </div>\n                                            </div>\n                                            <div className=\"col-lg-12 col-md-12 col-sm-12 col-xs-12\">\n                                                <div className=\"col-lg-12 col-md-12 col-sm-12 col-xs-12 mt\">\n                                                    <button id=\"submitbtn\" className=\"btn button3 pull-right\" onClick={this.submit.bind(this)} >Submit</button>\n                                                </div>\n                                            </div>\n                                        </form>                                       \n                                    </div>                                    \n                                </div>\n                            </section>\n                        </div>\n                    </div>\n                </div> \n        );\n    }\n}\nexport default DesignationMapping;"]},"metadata":{},"sourceType":"module"}