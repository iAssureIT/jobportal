{"ast":null,"code":"var _jsxFileName = \"/home/mani/projects/jobportal/webapp/adminportal/src/coreadmin/Master/Department/DepartmentMaster-ProjectMaster.js\";\nimport React, { Component } from 'react';\nimport $ from 'jquery';\nimport jQuery from 'jquery';\nimport axios from 'axios';\nimport swal from 'sweetalert';\nimport IAssureTable from '../../IAssureTable/IAssureTable.jsx';\nimport OneFieldForm from '../OneFieldForm/OneFieldForm.js';\nimport _ from 'underscore';\nimport 'bootstrap/js/tab.js';\n\nclass Department extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      companyInfo: [],\n      profileCreated: false,\n      \"locationType\": \"\",\n      \"fields\": {\n        placeholder: \"Enter department..\",\n        title: \"Department\",\n        attributeName: \"department\"\n      },\n      \"tableHeading\": {\n        department: \"Department\",\n        actions: 'Action'\n      },\n      \"tableObjects\": {\n        deleteMethod: 'delete',\n        apiLink: '/api/departmentmaster/',\n        paginationApply: false,\n        searchApply: false,\n        editUrl: '/project-master-data'\n      },\n      \"startRange\": 0,\n      \"limitRange\": 10,\n      // \"editId\": this.props.match.params ? this.props.match.params.fieldID : '',\n      fileDetailUrl: \"/api/departmentmaster/get/filedetails/\",\n      goodRecordsHeading: {\n        department: \"Department\"\n      },\n      failedtableHeading: {\n        department: \"Department\",\n        failedRemark: \"Failed Data Remark\"\n      }\n    };\n  }\n\n  componentDidMount() {\n    var editId = this.props.match ? this.props.match.params.editId : this.props.editId ? this.props.editId : \"\";\n\n    if (editId && editId !== 'undefined') {\n      this.setState({\n        editId: editId\n      }, () => {// console.log(\"this.state.editId = \",this.state.editId);\n      });\n    }\n\n    window.scrollTo(0, 0);\n    axios.get('/api/companysettings/').then(res => {\n      this.setState({\n        profileCreated: true,\n        companyInfo: res.data\n      });\n    }).catch(error => {});\n  } // componentWillReceiveProps(nextProps) {\n  //   var editId = nextProps.match.params.fieldID;\n  //   if (nextProps.match.params.fieldID) {\n  //       this.setState({\n  //           editId: editId\n  //       })\n  //   }\n  // }\n\n\n  componentDidUpdate(prevProps) {\n    if (this.props.editId !== this.state.editId) {\n      this.setState({\n        editId: this.props.editId\n      }, () => {//console.log(\"global componentDidUpdate editId = \",this.state.editId);\n      });\n    }\n  }\n\n  handler() {\n    axios.get('/api/companysettings/').then(res => {\n      this.setState({\n        profileCreated: true,\n        companyInfo: res.data\n      });\n    }).catch(error => {});\n  }\n\n  getFileDetails(fileName) {\n    axios.get(this.state.fileDetailUrl + fileName).then(response => {\n      console.log('getFileDetailsresponse', response);\n      $('.fullpageloader').hide();\n\n      if (response) {\n        this.setState({\n          fileDetails: response.data,\n          failedRecordsCount: response.data.failedRecords.length,\n          goodDataCount: response.data.goodrecords.length\n        });\n        var tableData = response.data.goodrecords.map((a, i) => {\n          console.log(\"aaaa\", a.department);\n          return {\n            \"department\": a.department ? a.department : '-'\n          };\n        });\n        var failedRecordsTable = response.data.failedRecords.map((a, i) => {\n          return {\n            \"department\": a.department ? a.department : '-',\n            \"failedRemark\": a.failedRemark ? a.failedRemark : '-'\n          };\n        });\n        this.setState({\n          goodRecordsTable: tableData,\n          failedRecordsTable: failedRecordsTable\n        });\n      }\n    }).catch(error => {\n      console.log('error', error);\n    });\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container-fluid\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-lg-12 col-md-12 col-xs-12 col-sm-12 companyDisplayForm\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 137,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-lg-12 col-md-12 col-xs-12 col-sm-12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(OneFieldForm, {\n      fields: this.state.fields,\n      tableHeading: this.state.tableHeading,\n      tableObjects: this.state.tableObjects,\n      editId: this.state.editId,\n      history: this.props.history,\n      masterFieldForm: true,\n      bulkRequired: true,\n      url: \"/api/departmentmaster/bulkUploadDepartment\",\n      data: {\n        \"createdBy\": localStorage.getItem(\"user_ID\")\n      },\n      uploadedData: this.uploadedData,\n      fileurl: \"https://fivebees.s3.ap-south-1.amazonaws.com/prod/master/Department.xlsx\",\n      getFileDetails: this.getFileDetails.bind(this),\n      fileDetails: this.state.fileDetails,\n      goodRecordsHeading: this.state.goodRecordsHeading,\n      failedtableHeading: this.state.failedtableHeading,\n      failedRecordsTable: this.state.failedRecordsTable,\n      failedRecordsCount: this.state.failedRecordsCount,\n      goodRecordsTable: this.state.goodRecordsTable,\n      goodDataCount: this.state.goodDataCount,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 13\n      }\n    }))));\n  }\n\n}\n\nexport default Department;","map":{"version":3,"sources":["/home/mani/projects/jobportal/webapp/adminportal/src/coreadmin/Master/Department/DepartmentMaster-ProjectMaster.js"],"names":["React","Component","$","jQuery","axios","swal","IAssureTable","OneFieldForm","_","Department","constructor","props","state","companyInfo","profileCreated","placeholder","title","attributeName","department","actions","deleteMethod","apiLink","paginationApply","searchApply","editUrl","fileDetailUrl","goodRecordsHeading","failedtableHeading","failedRemark","componentDidMount","editId","match","params","setState","window","scrollTo","get","then","res","data","catch","error","componentDidUpdate","prevProps","handler","getFileDetails","fileName","response","console","log","hide","fileDetails","failedRecordsCount","failedRecords","length","goodDataCount","goodrecords","tableData","map","a","i","failedRecordsTable","goodRecordsTable","render","fields","tableHeading","tableObjects","history","localStorage","getItem","uploadedData","bind"],"mappings":"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","sourcesContent":["import React, { Component }     from 'react';\nimport $                        from 'jquery';\nimport jQuery                   from 'jquery';\nimport axios                    from 'axios';\nimport swal                     from 'sweetalert';\nimport IAssureTable             from '../../IAssureTable/IAssureTable.jsx';\nimport OneFieldForm             from '../OneFieldForm/OneFieldForm.js';\nimport _                        from 'underscore';\nimport 'bootstrap/js/tab.js';\n\nclass Department extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      companyInfo              : [],\n      profileCreated            : false,\n      \"locationType\": \"\",\n      \"fields\" : {\n          placeholder     : \"Enter department..\",\n          title           : \"Department\",\n          attributeName   : \"department\"\n      },\n      \"tableHeading\": {\n          department: \"Department\",\n          actions: 'Action',\n      },\n      \"tableObjects\": {\n          deleteMethod: 'delete',\n          apiLink: '/api/departmentmaster/',\n          paginationApply: false,\n          searchApply: false,\n          editUrl: '/project-master-data'\n      },\n      \"startRange\": 0,\n      \"limitRange\": 10,\n      // \"editId\": this.props.match.params ? this.props.match.params.fieldID : '',\n      fileDetailUrl      : \"/api/departmentmaster/get/filedetails/\",\n      goodRecordsHeading :{\n        department       : \"Department\",\n      },\n      failedtableHeading   :{\n        department            : \"Department\",\n        failedRemark          :  \"Failed Data Remark\"\n      }\n    };\n  }\n  componentDidMount() {\n    var editId = this.props.match \n                 ? this.props.match.params.editId\n                 : this.props.editId \n                      ? this.props.editId \n                      : \"\" ;\n    if(editId && editId !== 'undefined'){\n      this.setState({\n          editId: editId\n      }, ()=>{\n          // console.log(\"this.state.editId = \",this.state.editId);\n      });\n    }\n    window.scrollTo(0, 0);\n     axios.get('/api/companysettings/')\n    .then( (res)=>{   \n      this.setState({profileCreated:true, companyInfo: res.data}) \n    })\n    .catch((error)=>{\n    });\n  }\n  // componentWillReceiveProps(nextProps) {\n  //   var editId = nextProps.match.params.fieldID;\n  //   if (nextProps.match.params.fieldID) {\n  //       this.setState({\n  //           editId: editId\n  //       })\n  //   }\n  // }\n  componentDidUpdate(prevProps) {\n    if(this.props.editId !== this.state.editId){\n      this.setState({editId : this.props.editId},\n                    ()=>{\n                      //console.log(\"global componentDidUpdate editId = \",this.state.editId);\n                    });\n    }\n  }\n\n\n\n  handler(){\n    axios.get('/api/companysettings/')\n    .then( (res)=>{   \n      this.setState({profileCreated:true, companyInfo: res.data}) \n    })\n    .catch((error)=>{\n    });\n  }\n  getFileDetails(fileName){\n    axios\n    .get(this.state.fileDetailUrl+fileName)\n    .then((response)=> {\n      console.log('getFileDetailsresponse',response);\n    $('.fullpageloader').hide();  \n    if (response) {\n      this.setState({\n          fileDetails         : response.data,\n          failedRecordsCount  : response.data.failedRecords.length,\n          goodDataCount       : response.data.goodrecords.length\n      });\n        var tableData = response.data.goodrecords.map((a, i)=>{\n          console.log(\"aaaa\",a.department);\n          return{\n              \"department\"    : a.department            ? a.department           : '-', \n                \n          }\n        })\n\n        var failedRecordsTable = response.data.failedRecords.map((a, i)=>{\n        return{\n             \n              \"department\"    : a.department            ? a.department           : '-', \n              \"failedRemark\"  : a.failedRemark     ? a.failedRemark : '-' \n        }\n        })\n\n      this.setState({\n          goodRecordsTable    : tableData,\n          failedRecordsTable  : failedRecordsTable\n      })\n    }\n    })\n    .catch((error)=> { \n      console.log('error', error);\n    }) \n  }\n\n    render() {\n      return (\n      <div className=\"container-fluid\">\n        <div className=\"col-lg-12 col-md-12 col-xs-12 col-sm-12 companyDisplayForm\">\n          <div className=\"col-lg-12 col-md-12 col-xs-12 col-sm-12\">\n            <OneFieldForm fields={this.state.fields}\n              tableHeading={this.state.tableHeading}\n              tableObjects={this.state.tableObjects}\n              editId = {this.state.editId}\n              history={this.props.history}\n              \n              masterFieldForm = {true}\n              bulkRequired={true}\n              url=\"/api/departmentmaster/bulkUploadDepartment\" \n              data={{ \"createdBy\" : localStorage.getItem(\"user_ID\"),  }} \n              uploadedData={this.uploadedData} \n              fileurl=\"https://fivebees.s3.ap-south-1.amazonaws.com/prod/master/Department.xlsx\"\n              getFileDetails={this.getFileDetails.bind(this)}\n              fileDetails={this.state.fileDetails}\n              goodRecordsHeading ={this.state.goodRecordsHeading}\n              failedtableHeading={this.state.failedtableHeading}\n              failedRecordsTable ={this.state.failedRecordsTable}\n              failedRecordsCount={this.state.failedRecordsCount}\n              goodRecordsTable={this.state.goodRecordsTable}\n              goodDataCount={this.state.goodDataCount}\n              />\n          </div>\n        </div>\n      </div>\n         \n    );\n    }\n}\nexport default Department;\n\n"]},"metadata":{},"sourceType":"module"}