{"ast":null,"code":"var _jsxFileName = \"/home/mani/projects/jobportal/webapp/adminportal/src/projectadmin/BookingMaster/SummaryStatistics.js\";\nimport React, { Component } from 'react';\nimport $ from 'jquery';\nimport axios from 'axios';\nimport { withRouter } from 'react-router-dom';\nimport moment from 'moment';\nimport _ from 'underscore';\nimport 'bootstrap/js/tab.js';\n\nclass SummaryStatistics extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      year: props.year,\n      status: props.status,\n      total: ''\n    };\n    this.handleChange = this.handleChange.bind(this);\n  }\n\n  componentWillReceiveProps(nextProps) {\n    this.setState({\n      year: nextProps.year,\n      status: nextProps.status\n    }, () => {\n      this.getData();\n    });\n  }\n\n  componentDidMount() {\n    this.setState({\n      year: this.props.year,\n      status: this.props.status\n    }, () => {\n      this.getData();\n    });\n  }\n\n  handleChange(event) {\n    event.preventDefault();\n    const target = event.target;\n    const name = target.name;\n    this.setState({\n      [name]: event.target.value\n    });\n  }\n\n  getData() {\n    var currentYear = this.state.year;\n    var newYear = moment(currentYear).subtract(1, 'years').format('YYYY');\n    var april = newYear + '-04-01';\n    var march = currentYear + '-03-31';\n    var formvalues = {\n      start: new Date(april),\n      end: new Date(march),\n      status: this.state.status\n    };\n    axios.post('/api/bookingmaster/getStatistics', formvalues).then(response => {\n      if (response && response.data[0]) {\n        this.setState({\n          total: response.data[0].count\n        });\n      } else {\n        this.setState({\n          total: 0\n        });\n      }\n    }).catch(err => {\n      console.log('err: ', err);\n    });\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-lg-12 col-md-12 col-sm-12 col-xs-12 nopadding\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"ul\", {\n      className: \"col-lg-12 col-md-12 col-sm-12 col-xs-12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"li\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"b\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 23\n      }\n    }, \"Status :\"), \" \", this.state.status ? this.state.status : 'All'), /*#__PURE__*/React.createElement(\"li\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"b\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 23\n      }\n    }, \"Total Bookings :\"), \" \", this.state.total))));\n  }\n\n}\n\nexport default withRouter(SummaryStatistics);","map":{"version":3,"sources":["/home/mani/projects/jobportal/webapp/adminportal/src/projectadmin/BookingMaster/SummaryStatistics.js"],"names":["React","Component","$","axios","withRouter","moment","_","SummaryStatistics","constructor","props","state","year","status","total","handleChange","bind","componentWillReceiveProps","nextProps","setState","getData","componentDidMount","event","preventDefault","target","name","value","currentYear","newYear","subtract","format","april","march","formvalues","start","Date","end","post","then","response","data","count","catch","err","console","log","render"],"mappings":"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","sourcesContent":["\nimport React, { Component }   from 'react';\nimport $                      from 'jquery';\nimport axios                  from 'axios';\nimport {withRouter}       from 'react-router-dom';\nimport moment                   from 'moment';\n\nimport _                      from 'underscore';\nimport 'bootstrap/js/tab.js';\n\nclass SummaryStatistics extends Component {\n  \n  constructor(props) {\n      super(props);\n    \n      this.state = {\n        year : props.year,\n        status:props.status,\n        total:''\n      };\n      this.handleChange = this.handleChange.bind(this);\n  }\n  componentWillReceiveProps(nextProps){\n    this.setState({\n      year :nextProps.year,\n      status :nextProps.status,\n    },()=>{this.getData()})\n    \n  }\n  componentDidMount(){\n    this.setState({\n        year : this.props.year,\n        status : this.props.status,\n      },()=>{this.getData()})\n   \n  }\n  \n  handleChange(event){\n    event.preventDefault();\n    const target = event.target;\n    const name = target.name;\n\n    this.setState({\n      [name]: event.target.value\n    });\n  }\n\n  getData(){\n  \tvar currentYear = this.state.year;\n    var newYear = moment(currentYear).subtract(1,'years').format('YYYY');\n    var april = newYear+'-04-01';\n    var march = currentYear+'-03-31'\n  \tvar formvalues ={\n  \t\tstart :new Date(april),\n  \t\tend:new Date(march),\n  \t\tstatus : this.state.status\n  \t}\n   axios.post('/api/bookingmaster/getStatistics',formvalues)\n    .then((response) => {\n    \tif(response && response.data[0]){\n\t        this.setState({\n\t          total:response.data[0].count\n\t        })\n\t    }else{\n\t    \tthis.setState({\n\t          total:0\n\t        })\n\t    }\n    })\n    .catch((err)=>{console.log('err: ',err)})\n  }\n\n \n\n  render() {\n        return (  \n          <div>\n              <div className=\"col-lg-12 col-md-12 col-sm-12 col-xs-12 nopadding\">\n                <ul className=\"col-lg-12 col-md-12 col-sm-12 col-xs-12\">\n                  <li><b>Status :</b> {this.state.status ? this.state.status : 'All'}</li>\n                  <li><b>Total Bookings :</b> {this.state.total}</li>\n                </ul>\n              </div>\n         </div>     \n      );\n  } \n}\nexport default withRouter(SummaryStatistics); \n"]},"metadata":{},"sourceType":"module"}