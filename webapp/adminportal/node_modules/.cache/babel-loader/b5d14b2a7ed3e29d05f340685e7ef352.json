{"ast":null,"code":"var _jsxFileName = \"/home/mani/projects/jobportal/webapp/adminportal/src/coreadmin/companysetting/Components/CompanyTaxDetails.js\";\nimport React, { Component } from 'react';\nimport { render } from 'react-dom';\nimport $ from \"jquery\";\nimport axios from 'axios';\nimport moment from 'moment';\nimport swal from 'sweetalert';\n\nconst formValid = formerrors => {\n  let valid = true;\n  Object.values(formerrors).forEach(val => {\n    val.length > 0 && (valid = false);\n  });\n  return valid;\n};\n\nconst taxTypeRegex = RegExp(/^[A-za-z']+( [A-Za-z']+)*$/);\nconst taxrateRegex = RegExp(/^[1-9]\\d*(\\.\\d+)?$/);\n\nclass CompanyTaxDetails extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      taxRating: '',\n      taxType: '',\n      effectiveFrom: '',\n      submitVal: true,\n      deleteID: \"\",\n      formerrors: {\n        companytaxType: \"\",\n        companytaxrate: \"\"\n      },\n      companyTaxData: []\n    };\n    this.handleChange = this.handleChange.bind(this);\n  }\n\n  componentDidMount() {\n    $.validator.addMethod(\"regxtax\", function (value, element, regexpr) {\n      return regexpr.test(value);\n    }, \"Please enter valid tax rate.\");\n    $(\"#CompanyTaxDetailsForm\").validate({\n      rules: {\n        taxType: {\n          required: true\n        },\n        taxRating: {\n          required: true,\n          regxtax: /^[1-9]\\d*(\\.\\d+)?$/\n        },\n        effectiveFrom: {\n          required: true\n        }\n      }\n    });\n    this.getData();\n  }\n\n  componentWillReceiveProps(nextProps) {\n    this.getData();\n  }\n\n  getData() {\n    axios.get('/api/globalmaster/getTaxData').then(response => {\n      this.setState({\n        companyTaxData: response.data\n      });\n    }).catch(error => {\n      console.log('error: ', error);\n    });\n  }\n\n  submitCompanyInformation(event) {\n    event.preventDefault();\n    var companytaxinfo = {\n      taxRating: this.state.taxRating,\n      taxType: this.state.taxType,\n      effectiveFrom: this.state.effectiveFrom\n    }; //close array\n\n    var updatedtaxinfo = {\n      taxId: this.state.taxId,\n      taxRating: this.state.taxRating,\n      taxType: this.state.taxType,\n      effectiveFrom: this.state.effectiveFrom\n    }; //close array\n\n    if ($(\"#CompanyTaxDetailsForm\").valid()) {\n      if (this.state.submitVal) {\n        axios.post('/api/globalmaster/taxSettings', companytaxinfo).then(response => {\n          if (response.status === 200) {\n            swal({\n              text: \"Tax details added successfully!\"\n            });\n          }\n\n          this.getData();\n        }).catch(error => {\n          swal({\n            text: \"Failed to add tax details!\"\n          });\n        });\n      } else {\n        axios.patch('/api/globalmaster/updateTaxSettings', updatedtaxinfo).then(response => {\n          swal({\n            text: \"Tax details updated successfully!\"\n          });\n          this.getData();\n        }).catch(error => {\n          swal({\n            text: \"Failed to update tax details!\"\n          });\n        });\n      }\n\n      this.setState({\n        taxType: '',\n        taxRating: '',\n        effectiveFrom: '',\n        submitVal: true\n      }, () => {\n        this.getData();\n      });\n    }\n  }\n\n  handleChange(event) {\n    const {\n      name,\n      value\n    } = event.target;\n    this.setState({\n      [name]: value\n    });\n  }\n\n  editTax(event) {\n    event.preventDefault();\n    this.setState({\n      submitVal: false\n    });\n    $(\"html,body\").scrollTop(0);\n    var id = event.currentTarget.id;\n    axios.get('/api/globalmaster/getSingleTaxData/' + id).then(response => {\n      this.setState({\n        taxId: response.data[0]._id,\n        taxType: response.data[0].taxType,\n        taxRating: response.data[0].taxRating,\n        effectiveFrom: moment(response.data[0].effectiveFrom).format('YYYY-MM-DD'),\n        effectiveTo: response.data[0].effectiveTo\n      });\n    }).catch(error => {\n      swal(error);\n    });\n  }\n\n  delete(event) {\n    event.preventDefault();\n    this.setState({\n      deleteID: event.currentTarget.getAttribute('data-id')\n    });\n    $('#deleteModal').show();\n  }\n\n  closeModal(event) {\n    event.preventDefault();\n    $('#deleteModal').hide();\n  }\n\n  delTax(event) {\n    event.preventDefault();\n    var targetedID = event.currentTarget.id;\n    var formValues = {\n      id: this.state.deleteID,\n      updatedBy: localStorage.getItem(\"user_ID\")\n    };\n    axios.patch('/api/globalmaster/patch/status', formValues).then(response => {\n      swal('Deleted successfully!');\n      this.setState({\n        deleteID: \"\"\n      });\n      $('#deleteModal').hide();\n      axios.get('/api/globalmaster/getTaxData').then(response => {\n        this.setState({\n          companyTaxData: response.data\n        });\n      }).catch(error => {\n        console.log('error: ', error);\n      });\n    }).catch(error => {\n      swal(error);\n    });\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 205,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-lg-12 col-md-12 col-xs-12 col-sm-12 companyDisplayForm\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 206,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-lg-12 col-md-12 col-sm-12 col-xs-12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 207,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"h4\", {\n      className: \"\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 208,\n        columnNumber: 15\n      }\n    }, \"Tax Information\")), /*#__PURE__*/React.createElement(\"hr\", {\n      className: \"compySettingHr\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 210,\n        columnNumber: 14\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-lg-12 col-md-12 col-sm-12 col-xs-12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 211,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"form\", {\n      id: \"CompanyTaxDetailsForm\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 212,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-lg-12 col-md-12 col-sm-12 col-xs-12 pdcls\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 213,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-lg-12 col-md-12 col-sm-12 col-xs-12 compForm compinfotp\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 214,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group formht col-lg-4 col-md-4 col-sm-12 col-xs-12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 215,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 216,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      className: \"labelform\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 217,\n        columnNumber: 25\n      }\n    }, \"Tax Type\"), /*#__PURE__*/React.createElement(\"span\", {\n      className: \"astrick\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 217,\n        columnNumber: 71\n      }\n    }, \"*\"), /*#__PURE__*/React.createElement(\"input\", {\n      id: \"taxType\",\n      value: this.state.taxType,\n      \"data-text\": \"companytaxType\",\n      onChange: this.handleChange.bind(this),\n      type: \"text\",\n      name: \"taxType\",\n      ref: \"taxType\",\n      className: \"form-control areaStaes\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 218,\n        columnNumber: 25\n      }\n    }))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group formht col-lg-4 col-md-4 col-sm-12 col-xs-12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 221,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 222,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      className: \"labelform\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 223,\n        columnNumber: 25\n      }\n    }, \"Tax Rating\"), /*#__PURE__*/React.createElement(\"span\", {\n      className: \"astrick\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 223,\n        columnNumber: 73\n      }\n    }, \"*\"), /*#__PURE__*/React.createElement(\"input\", {\n      id: \"taxRating\",\n      value: this.state.taxRating,\n      \"data-text\": \"companytaxrate\",\n      onChange: this.handleChange.bind(this),\n      type: \"number\",\n      name: \"taxRating\",\n      ref: \"taxRating\",\n      className: \"form-control areaStaes\",\n      minLength: \"1\",\n      maxLength: \"4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 224,\n        columnNumber: 25\n      }\n    }))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group formht col-lg-4 col-md-4 col-sm-12 col-xs-12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 227,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 228,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      className: \"labelform\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 229,\n        columnNumber: 25\n      }\n    }, \"Effective From\"), /*#__PURE__*/React.createElement(\"span\", {\n      className: \"astrick\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 229,\n        columnNumber: 77\n      }\n    }, \"*\"), /*#__PURE__*/React.createElement(\"input\", {\n      className: \"form-control areaStaes\",\n      \"data-text\": \"effectiveFrom\",\n      id: \"effectiveFrom\",\n      onChange: this.handleChange.bind(this),\n      type: \"date\",\n      name: \"effectiveFrom\",\n      ref: \"effectiveFrom\",\n      value: this.state.effectiveFrom,\n      required: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 230,\n        columnNumber: 25\n      }\n    }))))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-lg-12 col-md-12 col-sm-12 col-xs-12  \",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 235,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      className: \"col-lg-2 col-md-2 col-sm-12 col-xs-12 btn button3 pull-right\",\n      id: \"btnCheck\",\n      onClick: this.submitCompanyInformation.bind(this),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 236,\n        columnNumber: 17\n      }\n    }, this.state.submitVal ? \"Submit\" : \"Update\"))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"table-responsive topmr40 col-lg-12 col-md-12 col-sm-12 col-xs-12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 242,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"table\", {\n      className: \"table iAssureITtable-bordered table-striped table-hover\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 243,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"thead\", {\n      className: \"tempTableHeader\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 244,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"tr\", {\n      className: \"\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 245,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"th\", {\n      className: \"umDynamicHeader srpadd textAlignCenter\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 246,\n        columnNumber: 19\n      }\n    }, \" Tax Type \"), /*#__PURE__*/React.createElement(\"th\", {\n      className: \"umDynamicHeader srpadd textAlignCenter\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 247,\n        columnNumber: 19\n      }\n    }, \" Rating \"), /*#__PURE__*/React.createElement(\"th\", {\n      className: \"umDynamicHeader srpadd textAlignCenter\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 248,\n        columnNumber: 19\n      }\n    }, \" Effective From \"), /*#__PURE__*/React.createElement(\"th\", {\n      className: \"umDynamicHeader srpadd textAlignCenter\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 249,\n        columnNumber: 19\n      }\n    }, \" Effective To \"), /*#__PURE__*/React.createElement(\"th\", {\n      className: \"umDynamicHeader srpadd textAlignCenter\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 250,\n        columnNumber: 19\n      }\n    }, \" Action \"))), /*#__PURE__*/React.createElement(\"tbody\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 253,\n        columnNumber: 15\n      }\n    }, this.state.companyTaxData && this.state.companyTaxData.length > 0 ? this.state.companyTaxData.map((taxData, index) => {\n      return /*#__PURE__*/React.createElement(\"tr\", {\n        key: index,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 257,\n          columnNumber: 19\n        }\n      }, /*#__PURE__*/React.createElement(\"td\", {\n        className: \"textAlignCenter\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 258,\n          columnNumber: 23\n        }\n      }, taxData.taxType), /*#__PURE__*/React.createElement(\"td\", {\n        className: \"textAlignCenter\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 259,\n          columnNumber: 23\n        }\n      }, taxData.taxRating), /*#__PURE__*/React.createElement(\"td\", {\n        className: \"textAlignCenter\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 260,\n          columnNumber: 23\n        }\n      }, moment(taxData.effectiveFrom, 'YYYY-MM-DD').format('DD/MM/YYYY')), /*#__PURE__*/React.createElement(\"td\", {\n        className: \"textAlignCenter\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 261,\n          columnNumber: 23\n        }\n      }, taxData.effectiveTo ? moment(taxData.effectiveTo, 'YYYY-MM-DD').format('DD/MM/YYYY') : null), /*#__PURE__*/React.createElement(\"td\", {\n        className: \"textAlignCenter\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 262,\n          columnNumber: 23\n        }\n      }, /*#__PURE__*/React.createElement(\"span\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 263,\n          columnNumber: 23\n        }\n      }, /*#__PURE__*/React.createElement(\"button\", {\n        title: \"Edit\",\n        onClick: this.editTax.bind(this),\n        id: taxData._id,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 264,\n          columnNumber: 27\n        }\n      }, /*#__PURE__*/React.createElement(\"i\", {\n        className: \"fa fa-pencil\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 264,\n          columnNumber: 99\n        }\n      })), \" \\xA0 \\xA0\", /*#__PURE__*/React.createElement(\"button\", {\n        title: \"Delete\",\n        \"data-id\": taxData._id,\n        onClick: this.delete.bind(this),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 265,\n          columnNumber: 27\n        }\n      }, \" \", /*#__PURE__*/React.createElement(\"i\", {\n        className: \"fa fa-trash redFont\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 265,\n          columnNumber: 107\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"modal\",\n        id: \"deleteModal\",\n        role: \"dialog\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 266,\n          columnNumber: 27\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"adminModal adminModal-dialog col-lg-12 col-md-12 col-sm-12 col-xs-12\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 267,\n          columnNumber: 29\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"modal-content adminModal-content col-lg-4 col-lg-offset-4 col-md-6 col-md-offset-3 col-sm-10 col-sm-offset-1 col-xs-12 noPadding\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 268,\n          columnNumber: 33\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"modal-header adminModal-header col-lg-12 col-md-12 col-sm-12 col-xs-12\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 269,\n          columnNumber: 35\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"adminCloseCircleDiv pull-right  col-lg-1 col-lg-offset-11 col-md-1 col-md-offset-11 col-sm-1 col-sm-offset-11 col-xs-12 NOpadding-left NOpadding-right\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 270,\n          columnNumber: 39\n        }\n      }, /*#__PURE__*/React.createElement(\"button\", {\n        type: \"button\",\n        className: \"adminCloseButton\",\n        \"data-dismiss\": \"modal\",\n        onClick: this.closeModal.bind(this),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 271,\n          columnNumber: 41\n        }\n      }, \"\\xD7\"))), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"modal-body adminModal-body col-lg-12 col-md-12 col-sm-12 col-xs-12\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 274,\n          columnNumber: 37\n        }\n      }, /*#__PURE__*/React.createElement(\"h4\", {\n        className: \"blackLightFont textAlignCenter examDeleteFont col-lg-12 col-md-12 col-sm-12 col-xs-12\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 275,\n          columnNumber: 39\n        }\n      }, \"Are you sure, do you want to delete?\")), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"modal-footer adminModal-footer col-lg-12 col-md-12 col-sm-12 col-xs-12\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 277,\n          columnNumber: 37\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"col-lg-6 col-md-6 col-sm-6 col-xs-12\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 278,\n          columnNumber: 39\n        }\n      }, /*#__PURE__*/React.createElement(\"button\", {\n        type: \"button\",\n        className: \"btn adminCancel-btn col-lg-7 col-lg-offset-1 col-md-4 col-md-offset-1 col-sm-8 col-sm-offset-1 col-xs-10 col-xs-offset-1\",\n        \"data-dismiss\": \"modal\",\n        onClick: this.closeModal.bind(this),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 279,\n          columnNumber: 49\n        }\n      }, \"CANCEL\")), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"col-lg-6 col-md-6 col-sm-6 col-xs-12\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 281,\n          columnNumber: 39\n        }\n      }, /*#__PURE__*/React.createElement(\"button\", {\n        type: \"button\",\n        className: \"btn examDelete-btn col-lg-7 col-lg-offset-5 col-md-7 col-md-offset-5 col-sm-8 col-sm-offset-3 col-xs-10 col-xs-offset-1\",\n        \"data-dismiss\": \"modal\",\n        onClick: this.delTax.bind(this),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 282,\n          columnNumber: 43\n        }\n      }, \"DELETE\")))))))));\n    }) : /*#__PURE__*/React.createElement(\"tr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 294,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"td\", {\n      colSpan: \"5\",\n      className: \"textAlignCenter\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 294,\n        columnNumber: 21\n      }\n    }, \"No Data Found\"))))))));\n  }\n\n}\n\nexport default CompanyTaxDetails;","map":{"version":3,"sources":["/home/mani/projects/jobportal/webapp/adminportal/src/coreadmin/companysetting/Components/CompanyTaxDetails.js"],"names":["React","Component","render","$","axios","moment","swal","formValid","formerrors","valid","Object","values","forEach","val","length","taxTypeRegex","RegExp","taxrateRegex","CompanyTaxDetails","constructor","props","state","taxRating","taxType","effectiveFrom","submitVal","deleteID","companytaxType","companytaxrate","companyTaxData","handleChange","bind","componentDidMount","validator","addMethod","value","element","regexpr","test","validate","rules","required","regxtax","getData","componentWillReceiveProps","nextProps","get","then","response","setState","data","catch","error","console","log","submitCompanyInformation","event","preventDefault","companytaxinfo","updatedtaxinfo","taxId","post","status","text","patch","name","target","editTax","scrollTop","id","currentTarget","_id","format","effectiveTo","delete","getAttribute","show","closeModal","hide","delTax","targetedID","formValues","updatedBy","localStorage","getItem","map","taxData","index"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { render }           from 'react-dom';\nimport $ from \"jquery\";\nimport axios from 'axios';\nimport moment from 'moment';\nimport swal from 'sweetalert';\n\nconst formValid = formerrors=>{\n  let valid = true;\n  Object.values(formerrors).forEach(val=>{\n  val.length>0 && (valid = false);\n  })\n  return valid;\n  }\n\nconst taxTypeRegex  = RegExp(/^[A-za-z']+( [A-Za-z']+)*$/);\nconst taxrateRegex = RegExp(/^[1-9]\\d*(\\.\\d+)?$/);\n\n\nclass CompanyTaxDetails extends Component{\n   constructor(props) {\n    super(props);\n    this.state = {\n      taxRating   : '',\n      taxType     : '',\n      effectiveFrom   : '',\n      submitVal      : true,\n      deleteID:\"\",\n      formerrors :{\n        companytaxType   : \"\" ,\n        companytaxrate   : \"\",\n      },\n      companyTaxData : []\n\n    };\n    this.handleChange = this.handleChange.bind(this);\n  }\n\n  \n  componentDidMount() {\n    $.validator.addMethod(\"regxtax\", function (value, element, regexpr) {\n      return regexpr.test(value);\n    }, \"Please enter valid tax rate.\");\n\n    $(\"#CompanyTaxDetailsForm\").validate({\n    rules: {\n      taxType: {\n        required: true,\n      },\n      taxRating: {\n        required: true,\n        regxtax: /^[1-9]\\d*(\\.\\d+)?$/\n      },\n      effectiveFrom: {\n        required: true,\n      }\n    }\n    });\n    this.getData();\n    \n  }\n\n  componentWillReceiveProps(nextProps){\n    this.getData()\n  }\n\n  getData(){\n    axios.get('/api/globalmaster/getTaxData')\n    .then((response)=>{\n      this.setState({companyTaxData:response.data})\n    })\n    .catch((error)=>{\n      console.log('error: ',error)\n    })\n  }\n\n  submitCompanyInformation(event){\n    event.preventDefault();\n   \n    var companytaxinfo = {\n      taxRating             : this.state.taxRating,\n      taxType               : this.state.taxType,\n      effectiveFrom         : this.state.effectiveFrom,\n    }//close array\n\n    var updatedtaxinfo = {\n      taxId                 : this.state.taxId,\n      taxRating             : this.state.taxRating,\n      taxType               : this.state.taxType,\n      effectiveFrom         : this.state.effectiveFrom,\n    }//close array\n\n    if($(\"#CompanyTaxDetailsForm\").valid()){\n      if (this.state.submitVal) {\n        axios.post('/api/globalmaster/taxSettings',companytaxinfo)\n        .then((response)=> {\n          if(response.status === 200)\n          {\n          swal({                \n                  text: \"Tax details added successfully!\",\n          });\n          } \n           this.getData() \n        })\n        .catch((error)=> {\n          swal({\n                  text: \"Failed to add tax details!\",\n                });\n        })\n      }else{\n        axios.patch('/api/globalmaster/updateTaxSettings',updatedtaxinfo)\n        .then((response)=> {\n         \n          swal({\n                  text: \"Tax details updated successfully!\",\n          });\n         this.getData()\n        })\n        .catch((error)=> {\n          swal({\n                  text: \"Failed to update tax details!\",\n                });\n        })\n      }\n      this.setState({\n            taxType : '',\n            taxRating:'',\n            effectiveFrom:'',\n            submitVal:true\n          },()=>{ this.getData();})\n    }\n    \n   \n}\n\nhandleChange(event){\n  const {name,value} = event.target;\n  this.setState({ \n    [name]:value\n  });\n}\n\neditTax(event){\n  event.preventDefault();\n  this.setState({submitVal : false})\n  $(\"html,body\").scrollTop(0);\n  var id = event.currentTarget.id;\n  axios.get('/api/globalmaster/getSingleTaxData/'+id)\n  .then((response)=>{\n    this.setState({\n      taxId         : response.data[0]._id,\n      taxType       : response.data[0].taxType,\n      taxRating     : response.data[0].taxRating,\n      effectiveFrom : moment(response.data[0].effectiveFrom).format('YYYY-MM-DD'),\n      effectiveTo   : response.data[0].effectiveTo,\n    })\n  })\n  .catch((error)=>{\n    swal(error)\n  })\n    \n}\n\ndelete(event){\n  event.preventDefault();\n  this.setState({deleteID: event.currentTarget.getAttribute('data-id')})\n  $('#deleteModal').show();\n}\n\ncloseModal(event){\n    event.preventDefault();\n    $('#deleteModal').hide(); \n}\n\ndelTax(event){\n  event.preventDefault();\n  var targetedID = event.currentTarget.id;\n  \n      var formValues = {\n          id : this.state.deleteID,\n          updatedBy : localStorage.getItem(\"user_ID\")\n        }\n        axios.patch('/api/globalmaster/patch/status',formValues)\n        .then((response)=>{\n          swal('Deleted successfully!');\n          this.setState({deleteID:\"\"})\n           $('#deleteModal').hide();\n            axios.get('/api/globalmaster/getTaxData')\n            .then((response)=>{\n              this.setState({companyTaxData:response.data})\n            })\n            .catch((error)=>{\n              console.log('error: ',error)\n            })\n        })\n        .catch((error)=>{\n          swal(error)\n       \n        })\n}\n\n  render(){\n    \n    return(\n      <div className=\"\">\n        <div className=\"col-lg-12 col-md-12 col-xs-12 col-sm-12 companyDisplayForm\">\n          <div className=\"col-lg-12 col-md-12 col-sm-12 col-xs-12\">\n              <h4 className=\"\">Tax Information</h4>\n          </div>\n             <hr className=\"compySettingHr\" />\n          <div className=\"col-lg-12 col-md-12 col-sm-12 col-xs-12\">\n            <form id=\"CompanyTaxDetailsForm\"  >\n              <div className=\"col-lg-12 col-md-12 col-sm-12 col-xs-12 pdcls\">\n                <div className=\"col-lg-12 col-md-12 col-sm-12 col-xs-12 compForm compinfotp\">\n                  <div className=\"form-group formht col-lg-4 col-md-4 col-sm-12 col-xs-12\">\n                    <div className=\"form-group\">\n                        <label className=\"labelform\" >Tax Type</label><span className=\"astrick\">*</span>\n                        <input id=\"taxType\" value={this.state.taxType} data-text=\"companytaxType\" onChange={this.handleChange.bind(this)} type=\"text\" name=\"taxType\" ref=\"taxType\" className=\"form-control areaStaes\" />\n                    </div>  \n                  </div>\n                  <div className=\"form-group formht col-lg-4 col-md-4 col-sm-12 col-xs-12\">\n                    <div className=\"form-group\">\n                        <label className=\"labelform\" >Tax Rating</label><span className=\"astrick\">*</span>\n                        <input id=\"taxRating\" value={this.state.taxRating} data-text=\"companytaxrate\" onChange={this.handleChange.bind(this)} type=\"number\" name=\"taxRating\" ref=\"taxRating\" className=\"form-control areaStaes\" minLength=\"1\" maxLength=\"4\" />\n                    </div>  \n                  </div>\n                  <div className=\"form-group formht col-lg-4 col-md-4 col-sm-12 col-xs-12\">\n                    <div className=\"form-group\">\n                        <label className=\"labelform\" >Effective From</label><span className=\"astrick\">*</span>\n                        <input className=\"form-control areaStaes\" data-text=\"effectiveFrom\" id=\"effectiveFrom\" onChange={this.handleChange.bind(this)} type=\"date\" name=\"effectiveFrom\" ref=\"effectiveFrom\" value={this.state.effectiveFrom} required />\n                    </div> \n                  </div>\n                </div>\n              </div>\n              <div className=\"col-lg-12 col-md-12 col-sm-12 col-xs-12  \">\n                <button className=\"col-lg-2 col-md-2 col-sm-12 col-xs-12 btn button3 pull-right\" id=\"btnCheck\" onClick={this.submitCompanyInformation.bind(this)} >\n                  { this.state.submitVal ? \"Submit\" : \"Update\" }  \n                </button>\n              </div>\n            </form>\n\n            <div className=\"table-responsive topmr40 col-lg-12 col-md-12 col-sm-12 col-xs-12\">\n            <table className=\"table iAssureITtable-bordered table-striped table-hover\">\n              <thead className=\"tempTableHeader\">\n                <tr className=\"\">\n                  <th className=\"umDynamicHeader srpadd textAlignCenter\"> Tax Type </th>\n                  <th className=\"umDynamicHeader srpadd textAlignCenter\"> Rating </th>\n                  <th className=\"umDynamicHeader srpadd textAlignCenter\"> Effective From </th>\n                  <th className=\"umDynamicHeader srpadd textAlignCenter\"> Effective To </th>\n                  <th className=\"umDynamicHeader srpadd textAlignCenter\"> Action </th>\n                </tr>\n              </thead>\n              <tbody>\n              { this.state.companyTaxData && this.state.companyTaxData.length > 0 ?\n              this.state.companyTaxData.map((taxData,index)=>{\n                return(\n                  <tr key={index}>\n                      <td className=\"textAlignCenter\">{taxData.taxType}</td>\n                      <td className=\"textAlignCenter\">{taxData.taxRating}</td>\n                      <td className=\"textAlignCenter\">{moment(taxData.effectiveFrom, 'YYYY-MM-DD').format('DD/MM/YYYY')}</td>\n                      <td className=\"textAlignCenter\">{taxData.effectiveTo ? moment(taxData.effectiveTo, 'YYYY-MM-DD').format('DD/MM/YYYY') : null}</td>\n                      <td className=\"textAlignCenter\">\n                      <span>\n                          <button title=\"Edit\" onClick={this.editTax.bind(this)} id={taxData._id}><i className=\"fa fa-pencil\" ></i></button> &nbsp; &nbsp;\n                          <button title=\"Delete\" data-id={taxData._id}  onClick={this.delete.bind(this)}> <i className=\"fa fa-trash redFont\" ></i></button> \n                          <div className=\"modal\" id=\"deleteModal\" role=\"dialog\">\n                            <div className=\"adminModal adminModal-dialog col-lg-12 col-md-12 col-sm-12 col-xs-12\">\n                                <div className=\"modal-content adminModal-content col-lg-4 col-lg-offset-4 col-md-6 col-md-offset-3 col-sm-10 col-sm-offset-1 col-xs-12 noPadding\">\n                                  <div className=\"modal-header adminModal-header col-lg-12 col-md-12 col-sm-12 col-xs-12\">\n                                      <div className=\"adminCloseCircleDiv pull-right  col-lg-1 col-lg-offset-11 col-md-1 col-md-offset-11 col-sm-1 col-sm-offset-11 col-xs-12 NOpadding-left NOpadding-right\">\n                                        <button type=\"button\" className=\"adminCloseButton\" data-dismiss=\"modal\" onClick={this.closeModal.bind(this)}>&times;</button>\n                                      </div>\n                                    </div>\n                                    <div className=\"modal-body adminModal-body col-lg-12 col-md-12 col-sm-12 col-xs-12\">\n                                      <h4 className=\"blackLightFont textAlignCenter examDeleteFont col-lg-12 col-md-12 col-sm-12 col-xs-12\">Are you sure, do you want to delete?</h4>\n                                  </div>\n                                    <div className=\"modal-footer adminModal-footer col-lg-12 col-md-12 col-sm-12 col-xs-12\">\n                                      <div className=\"col-lg-6 col-md-6 col-sm-6 col-xs-12\">\n                                                <button type=\"button\" className=\"btn adminCancel-btn col-lg-7 col-lg-offset-1 col-md-4 col-md-offset-1 col-sm-8 col-sm-offset-1 col-xs-10 col-xs-offset-1\" data-dismiss=\"modal\" onClick={this.closeModal.bind(this)}>CANCEL</button>\n                                              </div>\n                                      <div className=\"col-lg-6 col-md-6 col-sm-6 col-xs-12\">\n                                          <button type=\"button\" className=\"btn examDelete-btn col-lg-7 col-lg-offset-5 col-md-7 col-md-offset-5 col-sm-8 col-sm-offset-3 col-xs-10 col-xs-offset-1\" data-dismiss=\"modal\" onClick={this.delTax.bind(this)} >DELETE</button>\n                                      </div>\n                                  </div>\n                                </div>\n                            </div>\n                        </div>  \n                      </span>\n                      </td>\n                  </tr>\n                )\n                })\n                :\n                <tr><td colSpan=\"5\" className=\"textAlignCenter\">No Data Found</td></tr>\n                }\n              </tbody>\n            </table>\n          </div>\n\n           \n            \n          </div>\n        </div>\n      </div>\n\n      );\n  }\n\n }\n\n export default CompanyTaxDetails;"]},"metadata":{},"sourceType":"module"}