{"ast":null,"code":"var _jsxFileName = \"/home/mani/projects/jobportal/webapp/employerportal/src/coreadmin/Master/BillingManagement/GenerateBill.js\";\nimport React, { Component } from 'react';\nimport axios from 'axios';\nimport $ from 'jquery';\nimport jQuery from 'jquery';\nimport swal from 'sweetalert';\nimport moment from 'moment';\nimport { withRouter } from 'react-router-dom';\nimport BillingManagementTable from './BillingManagementTable.js';\n\nclass GenerateBill extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      \"RecordsCount\": '',\n      \"RecordsTable\": [],\n      \"tableObjects\": {\n        paginationApply: false,\n        searchApply: false\n      },\n      \"tableHeading\": {\n        CompanyName: \"Company Name\",\n        EmployeeDetail: \"Employee Detail\",\n        TripDetails: \"Trip Details\",\n        CarDetails: \"Car Details\",\n        TotalKmTravelled: \"Total KM Travelled\",\n        TotalTimetaken: \"Total Time Taken\",\n        PackageApplied: \"Package Applied\",\n        TotalTravelCost: \"Total Travel Cost(Rs)\",\n        OtherCost: \"Other Cost(Rs)\",\n        TotalEstimatedAmount: \"Total Estimated Amount(Rs)\",\n        action: \"Actions\"\n      }\n    };\n  }\n\n  componentDidMount() {\n    axios.get('/api/bookingmaster/get/getAllBookingListForGenerateBill').then(response => {\n      console.log('data: ', response.data);\n      var tableData = response.data.map((a, i) => {\n        var Total = 0; // Variable to hold your total\n\n        var tripExpenseVar = a.tripExpenses;\n\n        if (tripExpenseVar && tripExpenseVar.length > 0) {\n          for (var i = 0, len = tripExpenseVar.length; i < len; i++) {\n            Total += tripExpenseVar[i].ticketPrice; // Iterate over your first array and then grab the second element add the values up\n          }\n        }\n\n        return {\n          CompanyName: \"\",\n          EmployeeDetail: a.person[0].firstName + ' ' + a.person[0].lastName + '(Emp No: ' + a.person[0].employeeId + ')',\n          TripDetails: \"<ul className='nopadding'><li>Booking No#: \" + a.bookingId + \"</li><li><b>\" + a.tripType + \"</b></li><li><b>From</b></li><li>\" + a.from.address + \"</li><li>\" + moment(a.pickupDate).format('MMMM Do YYYY') + ' ' + moment(a.pickupTime).format('LT') + \"</li><li><b>To</b></li><li>\" + a.to.address + \"</li><li>\" + moment(a.returnDate).format('MMMM Do YYYY') + \" \" + moment(a.returnTime).format('LT') + \"</li></ul>\",\n          CarDetails: \"<ul><li>\" + a.driver[0].firstName + \" \" + a.driver[0].lastName + \"</li><li>Honda City|| MH-12-DE-1234||White AC<li></ul>\",\n          TotalKmTravelled: \"175KM\",\n          TotalTimetaken: \"1.40 hrs\",\n          PackageApplied: a.package[0].packageName,\n          TotalTravelCost: a.estimatedCost,\n          OtherCost: Total,\n          TotalEstimatedAmount: \"1650\",\n          id: a._id\n        };\n      });\n      this.setState({\n        RecordsTable: tableData\n      });\n    }).catch(err => {\n      swal(err);\n    });\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      className: \"col-lg-12 col-md-12 col-xs-12 col-sm-12 tableComponent\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78\n      },\n      __self: this\n    }, React.createElement(BillingManagementTable, {\n      tableHeading: this.state.tableHeading,\n      dataCount: this.state.RecordsCount,\n      tableData: this.state.RecordsTable,\n      tableObjects: this.state.tableObjects,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80\n      },\n      __self: this\n    }));\n  }\n\n}\n\nexport default withRouter(GenerateBill);","map":{"version":3,"sources":["/home/mani/projects/jobportal/webapp/employerportal/src/coreadmin/Master/BillingManagement/GenerateBill.js"],"names":["React","Component","axios","$","jQuery","swal","moment","withRouter","BillingManagementTable","GenerateBill","constructor","props","state","paginationApply","searchApply","CompanyName","EmployeeDetail","TripDetails","CarDetails","TotalKmTravelled","TotalTimetaken","PackageApplied","TotalTravelCost","OtherCost","TotalEstimatedAmount","action","componentDidMount","get","then","response","console","log","data","tableData","map","a","i","Total","tripExpenseVar","tripExpenses","length","len","ticketPrice","person","firstName","lastName","employeeId","bookingId","tripType","from","address","pickupDate","format","pickupTime","to","returnDate","returnTime","driver","package","packageName","estimatedCost","id","_id","setState","RecordsTable","catch","err","render","tableHeading","RecordsCount","tableObjects"],"mappings":"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","sourcesContent":["import React, { Component }       \tfrom 'react';\nimport axios \t\t\t\t\t\tfrom 'axios';\nimport $ \t\t\t\t\t\t\tfrom 'jquery';\nimport jQuery \t\t\t\t\t\tfrom 'jquery';\nimport swal                         from 'sweetalert';\nimport moment                       from 'moment';\n\n\nimport {withRouter}  \t\t  from 'react-router-dom';\n\nimport BillingManagementTable from './BillingManagementTable.js';\n\nclass GenerateBill extends Component {\n\tconstructor(props){\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\t\"RecordsCount\"              :'',\n            \"RecordsTable\"              :[],\n\t\t    \"tableObjects\" \t\t\t\t: {paginationApply : false,searchApply     : false},\n\t\t    \"tableHeading\"              :{\n\t\t    \t\t\t\t\t\t\t CompanyName:\"Company Name\",\n\t\t    \t\t\t\t\t\t\t EmployeeDetail:\"Employee Detail\",\n\t\t    \t\t\t\t\t\t\t TripDetails : \"Trip Details\",\n\t\t    \t\t\t\t\t\t\t CarDetails:\"Car Details\", \n\t\t    \t\t\t\t\t\t\t TotalKmTravelled:\"Total KM Travelled\",\n\t\t    \t\t\t\t\t\t\t TotalTimetaken:\"Total Time Taken\",\n\t\t    \t\t\t\t\t\t\t PackageApplied:\"Package Applied\",\n\t\t    \t\t\t\t\t\t\t TotalTravelCost:\"Total Travel Cost(Rs)\",\n\t\t    \t\t\t\t\t\t\t OtherCost:\"Other Cost(Rs)\",\n\t\t    \t\t\t\t\t\t\t TotalEstimatedAmount:\"Total Estimated Amount(Rs)\", \n\t\t    \t\t\t\t\t\t\t action:\"Actions\"\n\t\t    \t\t\t\t\t\t\t}\n\t\t}\n\t}\n\n\tcomponentDidMount(){\n\t\taxios.get('/api/bookingmaster/get/getAllBookingListForGenerateBill')\n\t\t.then((response)=>{\n\t\t\tconsole.log('data: ',response.data)\n\t\t\tvar tableData = response.data.map((a, i)=>{\n\t\t\t\tvar Total = 0;  // Variable to hold your total\n\t\t\t\tvar tripExpenseVar = a.tripExpenses;\n\t\t\t\tif(tripExpenseVar && tripExpenseVar.length > 0){\n\t\t\t\t\tfor(var i = 0, len = tripExpenseVar.length; i < len; i++) {\n\t\t\t\t\t    Total += tripExpenseVar[i].ticketPrice;  // Iterate over your first array and then grab the second element add the values up\n\t\t\t\t\t}\t\n\t\t\t\t}\n\t\t\n\t\t\t  return{\n\t\t\t\t\t CompanyName:\"\",\n\t\t\t\t\t EmployeeDetail:a.person[0].firstName+' '+a.person[0].lastName+'(Emp No: '+a.person[0].employeeId+')',\n\t\t\t\t\t TripDetails:\"<ul className='nopadding'><li>Booking No#: \"+a.bookingId+\"</li><li><b>\"+a.tripType+\"</b></li><li><b>From</b></li><li>\"+a.from.address+\"</li><li>\"+moment(a.pickupDate).format('MMMM Do YYYY')+' '+moment(a.pickupTime).format('LT')+\"</li><li><b>To</b></li><li>\"+a.to.address+\"</li><li>\"+moment(a.returnDate).format('MMMM Do YYYY')+\" \"+moment(a.returnTime).format('LT')+\"</li></ul>\",\n\t\t\t\t\t CarDetails:\"<ul><li>\"+a.driver[0].firstName+\" \"+a.driver[0].lastName+\"</li><li>Honda City|| MH-12-DE-1234||White AC<li></ul>\", \n\t\t\t\t\t TotalKmTravelled:\"175KM\",\n\t\t\t\t\t TotalTimetaken:\"1.40 hrs\",\n\t\t\t\t\t PackageApplied:a.package[0].packageName,\n\t\t\t\t\t TotalTravelCost:a.estimatedCost,\n\t\t\t\t\t OtherCost:Total,\n\t\t\t\t\t TotalEstimatedAmount:\"1650\", \n\t\t\t\t\t id:a._id\n\t\t\t\t}\n\t\t\t\t\n\t\t\t})\n\t\t\tthis.setState({\n\t\t\t\tRecordsTable : tableData\n\t\t\t})\n\t\t})\n\t\t.catch((err)=>{\n\t\t\tswal(err)\n\t\t})\n\t\t\n\t}\n\n\n    \n\trender() {\n\t\treturn (\n         <div className=\"col-lg-12 col-md-12 col-xs-12 col-sm-12 tableComponent\">\n\t\t       \n\t\t       <BillingManagementTable \n\t              tableHeading={this.state.tableHeading}\n\t              dataCount={this.state.RecordsCount}\n\t              tableData={this.state.RecordsTable}\n\t              tableObjects={this.state.tableObjects}\n\t              />\t\n\t     </div>\n\t    );\n\t\t\n\t} \n\n}\n\nexport default withRouter(GenerateBill);"]},"metadata":{},"sourceType":"module"}