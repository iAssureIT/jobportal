{"ast":null,"code":"var _jsxFileName = \"/home/mani/projects/jobportal/webapp/employerportal/src/coreadmin/Master/Department/DepartmentMaster-GlobalMaster.js\";\nimport React, { Component } from 'react';\nimport $ from 'jquery';\nimport jQuery from 'jquery';\nimport axios from 'axios';\nimport swal from 'sweetalert';\nimport IAssureTable from '../../IAssureTable/IAssureTable.jsx';\nimport OneFieldForm from '../OneFieldForm/OneFieldForm.js';\nimport _ from 'underscore';\nimport 'bootstrap/js/tab.js';\n\nclass Department extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      companyInfo: [],\n      profileCreated: false,\n      \"locationType\": \"\",\n      \"fields\": {\n        placeholder: \"Enter department type..\",\n        title: \"Department\",\n        attributeName: \"department\"\n      },\n      \"tableHeading\": {\n        department: \"Department\",\n        actions: 'Action'\n      },\n      \"tableObjects\": {\n        deleteMethod: 'delete',\n        apiLink: '/api/departmentmaster/',\n        paginationApply: false,\n        searchApply: false,\n        editUrl: '/global-masters'\n      },\n      \"startRange\": 0,\n      \"limitRange\": 10000,\n      // \"editId\": this.props.match.params ? this.props.match.params.fieldID : '',\n      fileDetailUrl: \"/api/departmentmaster/get/filedetails/\",\n      goodRecordsHeading: {\n        department: \"Department\"\n      },\n      failedtableHeading: {\n        department: \"Department\",\n        failedRemark: \"Failed Data Remark\"\n      }\n    };\n  }\n\n  componentDidMount() {\n    var editId = this.props.match ? this.props.match.params.editId : this.props.editId ? this.props.editId : \"\";\n\n    if (editId && editId !== 'undefined') {\n      this.setState({\n        editId: editId\n      }, () => {// console.log(\"this.state.editId = \",this.state.editId);\n      });\n    } // window.scrollTo(0, 0);\n    //  axios.get('/api/companysettings/')\n    // .then( (res)=>{   \n    //   this.setState({profileCreated:true, companyInfo: res.data}) \n    // })\n    // .catch((error)=>{\n    // });\n\n  } // componentWillReceiveProps(nextProps) {\n  //   var editId = nextProps.match.params.fieldID;\n  //   if (nextProps.match.params.fieldID) {\n  //       this.setState({\n  //           editId: editId\n  //       })\n  //   }\n  // }\n\n\n  componentDidUpdate(prevProps) {\n    if (this.props.editId !== this.state.editId) {\n      this.setState({\n        editId: this.props.editId\n      }, () => {//console.log(\"global componentDidUpdate editId = \",this.state.editId);\n      });\n    }\n  } // handler(){\n  //   axios.get('/api/companysettings/')\n  //   .then( (res)=>{   \n  //     this.setState({profileCreated:true, companyInfo: res.data}) \n  //   })\n  //   .catch((error)=>{\n  //   });\n  // }\n\n\n  getFileDetails(fileName) {\n    axios.get(this.state.fileDetailUrl + fileName).then(response => {\n      $('.fullpageloader').hide();\n\n      if (response) {\n        this.setState({\n          fileDetails: response.data,\n          failedRecordsCount: response.data.failedRecords.length,\n          goodDataCount: response.data.goodrecords.length\n        });\n        var tableData = response.data.goodrecords.map((a, i) => {\n          return {\n            \"department\": a.department ? a.department : '-'\n          };\n        });\n        var failedRecordsTable = response.data.failedRecords.map((a, i) => {\n          return {\n            \"department\": a.department ? a.department : '-',\n            \"failedRemark\": a.failedRemark ? a.failedRemark : '-'\n          };\n        });\n        this.setState({\n          goodRecordsTable: tableData,\n          failedRecordsTable: failedRecordsTable\n        });\n      }\n    }).catch(error => {\n      console.log('error', error);\n    });\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      className: \"container-fluid\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 134\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"col-lg-12 col-md-12 col-xs-12 col-sm-12 companyDisplayForm\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 135\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"col-lg-12 col-md-12 col-xs-12 col-sm-12\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136\n      },\n      __self: this\n    }, React.createElement(OneFieldForm, {\n      fields: this.state.fields,\n      tableHeading: this.state.tableHeading,\n      tableObjects: this.state.tableObjects,\n      editId: this.state.editId,\n      history: this.props.history,\n      masterFieldForm: true,\n      bulkRequired: true,\n      url: \"/api/departmentmaster/bulkUploadDepartment\",\n      data: {\n        \"createdBy\": localStorage.getItem(\"user_ID\")\n      },\n      uploadedData: this.uploadedData,\n      fileurl: \"https://fivebees.s3.ap-south-1.amazonaws.com/prod/master/Department.xlsx\",\n      getFileDetails: this.getFileDetails.bind(this),\n      fileDetails: this.state.fileDetails,\n      goodRecordsHeading: this.state.goodRecordsHeading,\n      failedtableHeading: this.state.failedtableHeading,\n      failedRecordsTable: this.state.failedRecordsTable,\n      failedRecordsCount: this.state.failedRecordsCount,\n      goodRecordsTable: this.state.goodRecordsTable,\n      goodDataCount: this.state.goodDataCount,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 137\n      },\n      __self: this\n    }))));\n  }\n\n}\n\nexport default Department;","map":{"version":3,"sources":["/home/mani/projects/jobportal/webapp/employerportal/src/coreadmin/Master/Department/DepartmentMaster-GlobalMaster.js"],"names":["React","Component","$","jQuery","axios","swal","IAssureTable","OneFieldForm","_","Department","constructor","props","state","companyInfo","profileCreated","placeholder","title","attributeName","department","actions","deleteMethod","apiLink","paginationApply","searchApply","editUrl","fileDetailUrl","goodRecordsHeading","failedtableHeading","failedRemark","componentDidMount","editId","match","params","setState","componentDidUpdate","prevProps","getFileDetails","fileName","get","then","response","hide","fileDetails","data","failedRecordsCount","failedRecords","length","goodDataCount","goodrecords","tableData","map","a","i","failedRecordsTable","goodRecordsTable","catch","error","console","log","render","fields","tableHeading","tableObjects","history","localStorage","getItem","uploadedData","bind"],"mappings":"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","sourcesContent":["import React, { Component }     from 'react';\nimport $                        from 'jquery';\nimport jQuery                   from 'jquery';\nimport axios                    from 'axios';\nimport swal                     from 'sweetalert';\nimport IAssureTable             from '../../IAssureTable/IAssureTable.jsx';\nimport OneFieldForm             from '../OneFieldForm/OneFieldForm.js';\nimport _                        from 'underscore';\nimport 'bootstrap/js/tab.js';\n\nclass Department extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      companyInfo              : [],\n      profileCreated            : false,\n      \"locationType\": \"\",\n      \"fields\" : {\n          placeholder     : \"Enter department type..\",\n          title           : \"Department\",\n          attributeName   : \"department\"\n      },\n      \"tableHeading\": {\n          department: \"Department\",\n          actions: 'Action',\n      },\n      \"tableObjects\": {\n          deleteMethod: 'delete',\n          apiLink: '/api/departmentmaster/',\n          paginationApply: false,\n          searchApply: false,\n          editUrl: '/global-masters'\n      },\n      \"startRange\": 0,\n      \"limitRange\": 10000,\n      // \"editId\": this.props.match.params ? this.props.match.params.fieldID : '',\n      fileDetailUrl      : \"/api/departmentmaster/get/filedetails/\",\n      goodRecordsHeading :{\n        department       : \"Department\",\n      },\n      failedtableHeading   :{\n        department            : \"Department\",\n        failedRemark          :  \"Failed Data Remark\"\n      }\n    };\n  }\n  componentDidMount() {\n    var editId = this.props.match \n                 ? this.props.match.params.editId\n                 : this.props.editId \n                      ? this.props.editId \n                      : \"\" ;\n    if(editId && editId !== 'undefined'){\n      this.setState({\n          editId: editId\n      }, ()=>{\n          // console.log(\"this.state.editId = \",this.state.editId);\n      });\n    }\n    // window.scrollTo(0, 0);\n    //  axios.get('/api/companysettings/')\n    // .then( (res)=>{   \n    //   this.setState({profileCreated:true, companyInfo: res.data}) \n    // })\n    // .catch((error)=>{\n    // });\n  }\n  // componentWillReceiveProps(nextProps) {\n  //   var editId = nextProps.match.params.fieldID;\n  //   if (nextProps.match.params.fieldID) {\n  //       this.setState({\n  //           editId: editId\n  //       })\n  //   }\n  // }\n  componentDidUpdate(prevProps) {\n    if(this.props.editId !== this.state.editId){\n      this.setState({editId : this.props.editId},\n                    ()=>{\n                      //console.log(\"global componentDidUpdate editId = \",this.state.editId);\n                    });\n    }\n  }\n\n\n\n  // handler(){\n  //   axios.get('/api/companysettings/')\n  //   .then( (res)=>{   \n  //     this.setState({profileCreated:true, companyInfo: res.data}) \n  //   })\n  //   .catch((error)=>{\n  //   });\n  // }\n  getFileDetails(fileName){\n    axios\n    .get(this.state.fileDetailUrl+fileName)\n    .then((response)=> {\n    $('.fullpageloader').hide();  \n    if (response) {\n      this.setState({\n          fileDetails         : response.data,\n          failedRecordsCount  : response.data.failedRecords.length,\n          goodDataCount       : response.data.goodrecords.length\n      });\n        var tableData = response.data.goodrecords.map((a, i)=>{\n          return{\n              \"department\"    : a.department            ? a.department           : '-', \n                \n          }\n        })\n\n        var failedRecordsTable = response.data.failedRecords.map((a, i)=>{\n        return{\n             \n              \"department\"    : a.department            ? a.department           : '-', \n              \"failedRemark\"  : a.failedRemark     ? a.failedRemark : '-' \n        }\n        })\n\n      this.setState({\n          goodRecordsTable    : tableData,\n          failedRecordsTable  : failedRecordsTable\n      })\n    }\n    })\n    .catch((error)=> { \n      console.log('error', error);\n    }) \n  }\n\n    render() {\n      return (\n      <div className=\"container-fluid\">\n        <div className=\"col-lg-12 col-md-12 col-xs-12 col-sm-12 companyDisplayForm\">\n          <div className=\"col-lg-12 col-md-12 col-xs-12 col-sm-12\">\n            <OneFieldForm fields={this.state.fields}\n              tableHeading={this.state.tableHeading}\n              tableObjects={this.state.tableObjects}\n              editId = {this.state.editId}\n              history={this.props.history}\n              \n              masterFieldForm = {true}\n              bulkRequired={true}\n              url=\"/api/departmentmaster/bulkUploadDepartment\" \n              data={{ \"createdBy\" : localStorage.getItem(\"user_ID\"),  }} \n              uploadedData={this.uploadedData} \n              fileurl=\"https://fivebees.s3.ap-south-1.amazonaws.com/prod/master/Department.xlsx\"\n              getFileDetails={this.getFileDetails.bind(this)}\n              fileDetails={this.state.fileDetails}\n              goodRecordsHeading ={this.state.goodRecordsHeading}\n              failedtableHeading={this.state.failedtableHeading}\n              failedRecordsTable ={this.state.failedRecordsTable}\n              failedRecordsCount={this.state.failedRecordsCount}\n              goodRecordsTable={this.state.goodRecordsTable}\n              goodDataCount={this.state.goodDataCount}\n              />\n          </div>\n        </div>\n      </div>\n         \n    );\n    }\n}\nexport default Department;\n\n"]},"metadata":{},"sourceType":"module"}