{"ast":null,"code":"/**\n * [chartjs-plugin-labels]{@link https://github.com/emn178/chartjs-plugin-labels}\n *\n * @version 1.1.0\n * @author Chen, Yi-Cyuan [emn178@gmail.com]\n * @copyright Chen, Yi-Cyuan 2017-2018\n * @license MIT\n */\n(function () {\n  'use strict';\n\n  if (typeof Chart === 'undefined') {\n    console.error('Can not find Chart object.');\n    return;\n  }\n\n  if (typeof Object.assign != 'function') {\n    Object.assign = function (target, varArgs) {\n      if (target == null) {\n        throw new TypeError('Cannot convert undefined or null to object');\n      }\n\n      var to = Object(target);\n\n      for (var index = 1; index < arguments.length; index++) {\n        var nextSource = arguments[index];\n\n        if (nextSource != null) {\n          for (var nextKey in nextSource) {\n            if (Object.prototype.hasOwnProperty.call(nextSource, nextKey)) {\n              to[nextKey] = nextSource[nextKey];\n            }\n          }\n        }\n      }\n\n      return to;\n    };\n  }\n\n  var SUPPORTED_TYPES = {};\n  ['pie', 'doughnut', 'polarArea', 'bar'].forEach(function (t) {\n    SUPPORTED_TYPES[t] = true;\n  });\n\n  function Label() {\n    this.renderToDataset = this.renderToDataset.bind(this);\n  }\n\n  Label.prototype.setup = function (chart, options) {\n    this.chart = chart;\n    this.ctx = chart.ctx;\n    this.args = {};\n    this.barTotal = {};\n    var chartOptions = chart.config.options;\n    this.options = Object.assign({\n      position: 'default',\n      precision: 0,\n      fontSize: chartOptions.defaultFontSize,\n      fontColor: chartOptions.defaultFontColor,\n      fontStyle: chartOptions.defaultFontStyle,\n      fontFamily: chartOptions.defaultFontFamily,\n      shadowOffsetX: 3,\n      shadowOffsetY: 3,\n      shadowColor: 'rgba(0,0,0,0.3)',\n      shadowBlur: 6,\n      images: [],\n      outsidePadding: 2,\n      textMargin: 2,\n      overlap: true\n    }, options);\n\n    if (chart.config.type === 'bar') {\n      this.options.position = 'default';\n      this.options.arc = false;\n      this.options.overlap = true;\n    }\n  };\n\n  Label.prototype.render = function () {\n    this.labelBounds = [];\n    this.chart.data.datasets.forEach(this.renderToDataset);\n  };\n\n  Label.prototype.renderToDataset = function (dataset, index) {\n    this.totalPercentage = 0;\n    this.total = null;\n    var arg = this.args[index];\n    arg.meta.data.forEach(function (element, index) {\n      this.renderToElement(dataset, arg, element, index);\n    }.bind(this));\n  };\n\n  Label.prototype.renderToElement = function (dataset, arg, element, index) {\n    if (!this.shouldRenderToElement(arg.meta, element)) {\n      return;\n    }\n\n    this.percentage = null;\n    var label = this.getLabel(dataset, element, index);\n\n    if (!label) {\n      return;\n    }\n\n    var ctx = this.ctx;\n    ctx.save();\n    ctx.font = Chart.helpers.fontString(this.options.fontSize, this.options.fontStyle, this.options.fontFamily);\n    var renderInfo = this.getRenderInfo(element, label);\n\n    if (!this.drawable(element, label, renderInfo)) {\n      ctx.restore();\n      return;\n    }\n\n    ctx.beginPath();\n    ctx.fillStyle = this.getFontColor(dataset, element, index);\n    this.renderLabel(label, renderInfo);\n    ctx.restore();\n  };\n\n  Label.prototype.renderLabel = function (label, renderInfo) {\n    return this.options.arc ? this.renderArcLabel(label, renderInfo) : this.renderBaseLabel(label, renderInfo);\n  };\n\n  Label.prototype.renderBaseLabel = function (label, position) {\n    var ctx = this.ctx;\n\n    if (typeof label === 'object') {\n      ctx.drawImage(label, position.x - label.width / 2, position.y - label.height / 2, label.width, label.height);\n    } else {\n      ctx.save();\n      ctx.textBaseline = 'top';\n      ctx.textAlign = 'center';\n\n      if (this.options.textShadow) {\n        ctx.shadowOffsetX = this.options.shadowOffsetX;\n        ctx.shadowOffsetY = this.options.shadowOffsetY;\n        ctx.shadowColor = this.options.shadowColor;\n        ctx.shadowBlur = this.options.shadowBlur;\n      }\n\n      var lines = label.split('\\n');\n\n      for (var i = 0; i < lines.length; i++) {\n        var y = position.y - this.options.fontSize / 2 * lines.length + this.options.fontSize * i;\n        ctx.fillText(lines[i], position.x, y);\n      }\n\n      ctx.restore();\n    }\n  };\n\n  Label.prototype.renderArcLabel = function (label, renderInfo) {\n    var ctx = this.ctx,\n        radius = renderInfo.radius,\n        view = renderInfo.view;\n    ctx.save();\n    ctx.translate(view.x, view.y);\n\n    if (typeof label === 'string') {\n      ctx.rotate(renderInfo.startAngle);\n      ctx.textBaseline = 'middle';\n      ctx.textAlign = 'left';\n      var lines = label.split('\\n'),\n          max = 0,\n          widths = [],\n          offset = 0;\n\n      if (this.options.position === 'border') {\n        offset = (lines.length - 1) * this.options.fontSize / 2;\n      }\n\n      for (var j = 0; j < lines.length; ++j) {\n        var mertrics = ctx.measureText(lines[j]);\n\n        if (mertrics.width > max) {\n          max = mertrics.width;\n        }\n\n        widths.push(mertrics.width);\n      }\n\n      for (var j = 0; j < lines.length; ++j) {\n        var line = lines[j];\n        var y = (lines.length - 1 - j) * -this.options.fontSize + offset;\n        ctx.save();\n        var padding = (max - widths[j]) / 2;\n        ctx.rotate(padding / radius);\n\n        for (var i = 0; i < line.length; i++) {\n          var char = line.charAt(i);\n          mertrics = ctx.measureText(char);\n          ctx.save();\n          ctx.translate(0, -1 * radius);\n          ctx.fillText(char, 0, y);\n          ctx.restore();\n          ctx.rotate(mertrics.width / radius);\n        }\n\n        ctx.restore();\n      }\n    } else {\n      ctx.rotate((view.startAngle + Math.PI / 2 + renderInfo.endAngle) / 2);\n      ctx.translate(0, -1 * radius);\n      this.renderLabel(label, {\n        x: 0,\n        y: 0\n      });\n    }\n\n    ctx.restore();\n  };\n\n  Label.prototype.shouldRenderToElement = function (meta, element) {\n    return !meta.hidden && !element.hidden && (this.options.showZero || this.chart.config.type === 'polarArea' ? element._view.outerRadius !== 0 : element._view.circumference !== 0);\n  };\n\n  Label.prototype.getLabel = function (dataset, element, index) {\n    var label;\n\n    if (typeof this.options.render === 'function') {\n      label = this.options.render({\n        label: this.chart.config.data.labels[index],\n        value: dataset.data[index],\n        percentage: this.getPercentage(dataset, element, index),\n        dataset: dataset,\n        index: index\n      });\n    } else {\n      switch (this.options.render) {\n        case 'value':\n          label = dataset.data[index];\n          break;\n\n        case 'label':\n          label = this.chart.config.data.labels[index];\n          break;\n\n        case 'image':\n          label = this.options.images[index] ? this.loadImage(this.options.images[index]) : '';\n          break;\n\n        case 'percentage':\n        default:\n          label = this.getPercentage(dataset, element, index) + '%';\n          break;\n      }\n    }\n\n    if (typeof label === 'object') {\n      label = this.loadImage(label);\n    } else if (label !== null && label !== undefined) {\n      label = label.toString();\n    }\n\n    return label;\n  };\n\n  Label.prototype.getFontColor = function (dataset, element, index) {\n    var fontColor = this.options.fontColor;\n\n    if (typeof fontColor === 'function') {\n      fontColor = fontColor({\n        label: this.chart.config.data.labels[index],\n        value: dataset.data[index],\n        percentage: this.getPercentage(dataset, element, index),\n        backgroundColor: dataset.backgroundColor[index],\n        dataset: dataset,\n        index: index\n      });\n    } else if (typeof fontColor !== 'string') {\n      fontColor = fontColor[index] || this.chart.config.options.defaultFontColor;\n    }\n\n    return fontColor;\n  };\n\n  Label.prototype.getPercentage = function (dataset, element, index) {\n    if (this.percentage !== null) {\n      return this.percentage;\n    }\n\n    var percentage;\n\n    if (this.chart.config.type === 'polarArea') {\n      if (this.total === null) {\n        this.total = 0;\n\n        for (var i = 0; i < dataset.data.length; ++i) {\n          this.total += dataset.data[i];\n        }\n      }\n\n      percentage = dataset.data[index] / this.total * 100;\n    } else if (this.chart.config.type === 'bar') {\n      if (this.barTotal[index] === undefined) {\n        this.barTotal[index] = 0;\n\n        for (var i = 0; i < this.chart.data.datasets.length; ++i) {\n          this.barTotal[index] += this.chart.data.datasets[i].data[index];\n        }\n      }\n\n      percentage = dataset.data[index] / this.barTotal[index] * 100;\n    } else {\n      percentage = element._view.circumference / this.chart.config.options.circumference * 100;\n    }\n\n    percentage = parseFloat(percentage.toFixed(this.options.precision));\n\n    if (!this.options.showActualPercentages) {\n      if (this.chart.config.type === 'bar') {\n        this.totalPercentage = this.barTotalPercentage[index] || 0;\n      }\n\n      this.totalPercentage += percentage;\n\n      if (this.totalPercentage > 100) {\n        percentage -= this.totalPercentage - 100;\n        percentage = parseFloat(percentage.toFixed(this.options.precision));\n      }\n\n      if (this.chart.config.type === 'bar') {\n        this.barTotalPercentage[index] = this.totalPercentage;\n      }\n    }\n\n    this.percentage = percentage;\n    return percentage;\n  };\n\n  Label.prototype.getRenderInfo = function (element, label) {\n    if (this.chart.config.type === 'bar') {\n      return this.getBarRenderInfo(element, label);\n    } else {\n      return this.options.arc ? this.getArcRenderInfo(element, label) : this.getBaseRenderInfo(element, label);\n    }\n  };\n\n  Label.prototype.getBaseRenderInfo = function (element, label) {\n    if (this.options.position === 'outside' || this.options.position === 'border') {\n      var renderInfo,\n          rangeFromCentre,\n          view = element._view,\n          centreAngle = view.startAngle + (view.endAngle - view.startAngle) / 2,\n          innerRadius = view.outerRadius / 2;\n\n      if (this.options.position === 'border') {\n        rangeFromCentre = (view.outerRadius - innerRadius) / 2 + innerRadius;\n      } else if (this.options.position === 'outside') {\n        rangeFromCentre = view.outerRadius - innerRadius + innerRadius + this.options.textMargin;\n      }\n\n      renderInfo = {\n        x: view.x + Math.cos(centreAngle) * rangeFromCentre,\n        y: view.y + Math.sin(centreAngle) * rangeFromCentre\n      };\n\n      if (this.options.position === 'outside') {\n        var offset = this.options.textMargin + this.measureLabel(label).width / 2;\n        renderInfo.x += renderInfo.x < view.x ? -offset : offset;\n      }\n\n      return renderInfo;\n    } else {\n      return element.tooltipPosition();\n    }\n  };\n\n  Label.prototype.getArcRenderInfo = function (element, label) {\n    var radius,\n        view = element._view;\n\n    if (this.options.position === 'outside') {\n      radius = view.outerRadius + this.options.fontSize + this.options.textMargin;\n    } else if (this.options.position === 'border') {\n      radius = (view.outerRadius / 2 + view.outerRadius) / 2;\n    } else {\n      radius = (view.innerRadius + view.outerRadius) / 2;\n    }\n\n    var startAngle = view.startAngle,\n        endAngle = view.endAngle;\n    var totalAngle = endAngle - startAngle;\n    startAngle += Math.PI / 2;\n    endAngle += Math.PI / 2;\n    var mertrics = this.measureLabel(label);\n    startAngle += (endAngle - (mertrics.width / radius + startAngle)) / 2;\n    return {\n      radius: radius,\n      startAngle: startAngle,\n      endAngle: endAngle,\n      totalAngle: totalAngle,\n      view: view\n    };\n  };\n\n  Label.prototype.getBarRenderInfo = function (element, label) {\n    var renderInfo = element.tooltipPosition();\n    renderInfo.y -= this.measureLabel(label).height / 2 + this.options.textMargin;\n    return renderInfo;\n  };\n\n  Label.prototype.drawable = function (element, label, renderInfo) {\n    if (this.options.overlap) {\n      return true;\n    } else if (this.options.arc) {\n      return renderInfo.endAngle - renderInfo.startAngle <= renderInfo.totalAngle;\n    } else {\n      var mertrics = this.measureLabel(label),\n          left = renderInfo.x - mertrics.width / 2,\n          right = renderInfo.x + mertrics.width / 2,\n          top = renderInfo.y - mertrics.height / 2,\n          bottom = renderInfo.y + mertrics.height / 2;\n\n      if (this.options.renderInfo === 'outside') {\n        return this.outsideInRange(left, right, top, bottom);\n      } else {\n        return element.inRange(left, top) && element.inRange(left, bottom) && element.inRange(right, top) && element.inRange(right, bottom);\n      }\n    }\n  };\n\n  Label.prototype.outsideInRange = function (left, right, top, bottom) {\n    var labelBounds = this.labelBounds;\n\n    for (var i = 0; i < labelBounds.length; ++i) {\n      var bound = labelBounds[i];\n      var potins = [[left, top], [left, bottom], [right, top], [right, bottom]];\n\n      for (var j = 0; j < potins.length; ++j) {\n        var x = potins[j][0];\n        var y = potins[j][1];\n\n        if (x >= bound.left && x <= bound.right && y >= bound.top && y <= bound.bottom) {\n          return false;\n        }\n      }\n\n      potins = [[bound.left, bound.top], [bound.left, bound.bottom], [bound.right, bound.top], [bound.right, bound.bottom]];\n\n      for (var j = 0; j < potins.length; ++j) {\n        var x = potins[j][0];\n        var y = potins[j][1];\n\n        if (x >= left && x <= right && y >= top && y <= bottom) {\n          return false;\n        }\n      }\n    }\n\n    labelBounds.push({\n      left: left,\n      right: right,\n      top: top,\n      bottom: bottom\n    });\n    return true;\n  };\n\n  Label.prototype.measureLabel = function (label) {\n    if (typeof label === 'object') {\n      return {\n        width: label.width,\n        height: label.height\n      };\n    } else {\n      var width = 0;\n      var lines = label.split('\\n');\n\n      for (var i = 0; i < lines.length; ++i) {\n        var result = this.ctx.measureText(lines[i]);\n\n        if (result.width > width) {\n          width = result.width;\n        }\n      }\n\n      return {\n        width: width,\n        height: this.options.fontSize * lines.length\n      };\n    }\n  };\n\n  Label.prototype.loadImage = function (obj) {\n    var image = new Image();\n    image.src = obj.src;\n    image.width = obj.width;\n    image.height = obj.height;\n    return image;\n  };\n\n  Chart.plugins.register({\n    id: 'labels',\n    beforeDatasetsUpdate: function (chart, options) {\n      if (!SUPPORTED_TYPES[chart.config.type]) {\n        return;\n      }\n\n      if (!Array.isArray(options)) {\n        options = [options];\n      }\n\n      var count = options.length;\n\n      if (!chart._labels || count !== chart._labels.length) {\n        chart._labels = options.map(function () {\n          return new Label();\n        });\n      }\n\n      var someOutside = false,\n          maxPadding = 0;\n\n      for (var i = 0; i < count; ++i) {\n        var label = chart._labels[i];\n        label.setup(chart, options[i]);\n\n        if (label.options.position === 'outside') {\n          someOutside = true;\n          var padding = label.options.fontSize * 1.5 + label.options.outsidePadding;\n\n          if (padding > maxPadding) {\n            maxPadding = padding;\n          }\n        }\n      }\n\n      if (someOutside) {\n        chart.chartArea.top += maxPadding;\n        chart.chartArea.bottom -= maxPadding;\n      }\n    },\n    afterDatasetUpdate: function (chart, args, options) {\n      if (!SUPPORTED_TYPES[chart.config.type]) {\n        return;\n      }\n\n      chart._labels.forEach(function (label) {\n        label.args[args.index] = args;\n      });\n    },\n    beforeDraw: function (chart) {\n      if (!SUPPORTED_TYPES[chart.config.type]) {\n        return;\n      }\n\n      chart._labels.forEach(function (label) {\n        label.barTotalPercentage = {};\n      });\n    },\n    afterDatasetsDraw: function (chart) {\n      if (!SUPPORTED_TYPES[chart.config.type]) {\n        return;\n      }\n\n      chart._labels.forEach(function (label) {\n        label.render();\n      });\n    }\n  });\n})();","map":{"version":3,"sources":["/home/mani/projects/jobportal/webapp/employerportal/node_modules/chartjs-plugin-labels/src/chartjs-plugin-labels.js"],"names":["Chart","console","error","Object","assign","target","varArgs","TypeError","to","index","arguments","length","nextSource","nextKey","prototype","hasOwnProperty","call","SUPPORTED_TYPES","forEach","t","Label","renderToDataset","bind","setup","chart","options","ctx","args","barTotal","chartOptions","config","position","precision","fontSize","defaultFontSize","fontColor","defaultFontColor","fontStyle","defaultFontStyle","fontFamily","defaultFontFamily","shadowOffsetX","shadowOffsetY","shadowColor","shadowBlur","images","outsidePadding","textMargin","overlap","type","arc","render","labelBounds","data","datasets","dataset","totalPercentage","total","arg","meta","element","renderToElement","shouldRenderToElement","percentage","label","getLabel","save","font","helpers","fontString","renderInfo","getRenderInfo","drawable","restore","beginPath","fillStyle","getFontColor","renderLabel","renderArcLabel","renderBaseLabel","drawImage","x","width","y","height","textBaseline","textAlign","textShadow","lines","split","i","fillText","radius","view","translate","rotate","startAngle","max","widths","offset","j","mertrics","measureText","push","line","padding","char","charAt","Math","PI","endAngle","hidden","showZero","_view","outerRadius","circumference","labels","value","getPercentage","loadImage","undefined","toString","backgroundColor","parseFloat","toFixed","showActualPercentages","barTotalPercentage","getBarRenderInfo","getArcRenderInfo","getBaseRenderInfo","rangeFromCentre","centreAngle","innerRadius","cos","sin","measureLabel","tooltipPosition","totalAngle","left","right","top","bottom","outsideInRange","inRange","bound","potins","result","obj","image","Image","src","plugins","register","id","beforeDatasetsUpdate","Array","isArray","count","_labels","map","someOutside","maxPadding","chartArea","afterDatasetUpdate","beforeDraw","afterDatasetsDraw"],"mappings":"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","sourcesContent":["/**\n * [chartjs-plugin-labels]{@link https://github.com/emn178/chartjs-plugin-labels}\n *\n * @version 1.1.0\n * @author Chen, Yi-Cyuan [emn178@gmail.com]\n * @copyright Chen, Yi-Cyuan 2017-2018\n * @license MIT\n */\n(function () {\n  'use strict';\n\n  if (typeof Chart === 'undefined') {\n    console.error('Can not find Chart object.');\n    return;\n  }\n\n  if (typeof Object.assign != 'function') {\n    Object.assign = function (target, varArgs) {\n      if (target == null) {\n        throw new TypeError('Cannot convert undefined or null to object');\n      }\n      var to = Object(target);\n      for (var index = 1; index < arguments.length; index++) {\n        var nextSource = arguments[index];\n        if (nextSource != null) {\n          for (var nextKey in nextSource) {\n            if (Object.prototype.hasOwnProperty.call(nextSource, nextKey)) {\n              to[nextKey] = nextSource[nextKey];\n            }\n          }\n        }\n      }\n      return to;\n    };\n  }\n\n  var SUPPORTED_TYPES = {};\n  ['pie', 'doughnut', 'polarArea', 'bar'].forEach(function (t) {\n    SUPPORTED_TYPES[t] = true;\n  });\n\n  function Label() {\n    this.renderToDataset = this.renderToDataset.bind(this);\n  }\n\n  Label.prototype.setup = function (chart, options) {\n    this.chart = chart;\n    this.ctx = chart.ctx;\n    this.args = {};\n    this.barTotal = {};\n    var chartOptions = chart.config.options;\n    this.options = Object.assign({\n      position: 'default',\n      precision: 0,\n      fontSize: chartOptions.defaultFontSize,\n      fontColor: chartOptions.defaultFontColor,\n      fontStyle: chartOptions.defaultFontStyle,\n      fontFamily: chartOptions.defaultFontFamily,\n      shadowOffsetX: 3,\n      shadowOffsetY: 3,\n      shadowColor: 'rgba(0,0,0,0.3)',\n      shadowBlur: 6,\n      images: [],\n      outsidePadding: 2,\n      textMargin: 2,\n      overlap: true\n    }, options);\n    if (chart.config.type === 'bar') {\n      this.options.position = 'default';\n      this.options.arc = false;\n      this.options.overlap = true;\n    }\n  };\n\n  Label.prototype.render = function () {\n    this.labelBounds = [];\n    this.chart.data.datasets.forEach(this.renderToDataset);\n  };\n\n  Label.prototype.renderToDataset = function (dataset, index) {\n    this.totalPercentage = 0;\n    this.total = null;\n    var arg = this.args[index];\n    arg.meta.data.forEach(function (element, index) {\n      this.renderToElement(dataset, arg, element, index);\n    }.bind(this));\n  };\n\n  Label.prototype.renderToElement = function (dataset, arg, element, index) {\n    if (!this.shouldRenderToElement(arg.meta, element)) {\n      return;\n    }\n    this.percentage = null;\n    var label = this.getLabel(dataset, element, index);\n    if (!label) {\n      return;\n    }\n    var ctx = this.ctx;\n    ctx.save();\n    ctx.font = Chart.helpers.fontString(this.options.fontSize, this.options.fontStyle, this.options.fontFamily);\n    var renderInfo = this.getRenderInfo(element, label);\n    if (!this.drawable(element, label, renderInfo)) {\n      ctx.restore();\n      return;\n    }\n    ctx.beginPath();\n    ctx.fillStyle = this.getFontColor(dataset, element, index);\n    this.renderLabel(label, renderInfo);\n    ctx.restore();\n  };\n\n  Label.prototype.renderLabel = function (label, renderInfo) {\n    return this.options.arc ? this.renderArcLabel(label, renderInfo) : this.renderBaseLabel(label, renderInfo);\n  };\n\n  Label.prototype.renderBaseLabel = function (label, position) {\n    var ctx = this.ctx;\n    if (typeof label === 'object') {\n      ctx.drawImage(label, position.x - label.width / 2, position.y - label.height / 2, label.width, label.height);\n    } else {\n      ctx.save();\n      ctx.textBaseline = 'top';\n      ctx.textAlign = 'center';\n\n      if (this.options.textShadow) {\n        ctx.shadowOffsetX = this.options.shadowOffsetX;\n        ctx.shadowOffsetY = this.options.shadowOffsetY;\n        ctx.shadowColor = this.options.shadowColor;\n        ctx.shadowBlur = this.options.shadowBlur;\n      }\n\n      var lines = label.split('\\n');\n      for (var i = 0; i < lines.length; i++) {\n        var y = position.y - this.options.fontSize / 2 * lines.length + this.options.fontSize * i;\n        ctx.fillText(lines[i], position.x, y);\n      }\n      ctx.restore();\n    }\n  };\n\n  Label.prototype.renderArcLabel = function (label, renderInfo) {\n    var ctx = this.ctx, radius = renderInfo.radius, view = renderInfo.view;\n    ctx.save();\n    ctx.translate(view.x, view.y);\n    if (typeof label === 'string') {\n      ctx.rotate(renderInfo.startAngle);\n      ctx.textBaseline = 'middle';\n      ctx.textAlign = 'left';\n      var lines = label.split('\\n'), max = 0, widths = [], offset = 0;\n      if (this.options.position === 'border') {\n        offset = (lines.length - 1) * this.options.fontSize / 2;\n      }\n      for (var j = 0; j < lines.length; ++j) {\n        var mertrics = ctx.measureText(lines[j]);\n        if (mertrics.width > max) {\n          max = mertrics.width;\n        }\n        widths.push(mertrics.width);\n      }\n      for (var j = 0; j < lines.length; ++j) {\n        var line = lines[j];\n        var y = (lines.length - 1 - j) * -this.options.fontSize + offset;\n        ctx.save();\n        var padding = (max - widths[j]) / 2;\n        ctx.rotate(padding / radius);\n        for (var i = 0; i < line.length; i++) {\n          var char = line.charAt(i);\n          mertrics = ctx.measureText(char);\n          ctx.save();\n          ctx.translate(0, -1 * radius);\n          ctx.fillText(char, 0, y);\n          ctx.restore();\n          ctx.rotate(mertrics.width / radius);\n        }\n        ctx.restore();\n      }\n    } else {\n      ctx.rotate((view.startAngle + Math.PI / 2 + renderInfo.endAngle) / 2);\n      ctx.translate(0, -1 * radius);\n      this.renderLabel(label, { x: 0, y: 0 });\n    }\n    ctx.restore();\n  };\n\n  Label.prototype.shouldRenderToElement = function (meta, element) {\n    return !meta.hidden && !element.hidden && (\n      this.options.showZero ||\n      this.chart.config.type === 'polarArea' ? element._view.outerRadius !== 0 : element._view.circumference !== 0\n    );\n  };\n\n  Label.prototype.getLabel = function (dataset, element, index) {\n    var label;\n    if (typeof this.options.render === 'function') {\n      label = this.options.render({\n        label: this.chart.config.data.labels[index],\n        value: dataset.data[index],\n        percentage: this.getPercentage(dataset, element, index),\n        dataset: dataset,\n        index: index\n      });\n    } else {\n      switch (this.options.render) {\n        case 'value':\n          label = dataset.data[index];\n          break;\n        case 'label':\n          label = this.chart.config.data.labels[index];\n          break;\n        case 'image':\n          label = this.options.images[index] ? this.loadImage(this.options.images[index]) : '';\n          break;\n        case 'percentage':\n        default:\n          label = this.getPercentage(dataset, element, index) + '%';\n          break;\n      }\n    }\n    if (typeof label === 'object') {\n      label = this.loadImage(label);\n    } else if (label !== null && label !== undefined) {\n      label = label.toString();\n    }\n    return label;\n  };\n\n  Label.prototype.getFontColor = function (dataset, element, index) {\n    var fontColor = this.options.fontColor;\n    if (typeof fontColor === 'function') {\n      fontColor = fontColor({\n        label: this.chart.config.data.labels[index],\n        value: dataset.data[index],\n        percentage: this.getPercentage(dataset, element, index),\n        backgroundColor: dataset.backgroundColor[index],\n        dataset: dataset,\n        index: index\n      });\n    } else if (typeof fontColor !== 'string') {\n      fontColor = fontColor[index] || this.chart.config.options.defaultFontColor;\n    }\n    return fontColor;\n  };\n\n  Label.prototype.getPercentage = function (dataset, element, index) {\n    if (this.percentage !== null) {\n      return this.percentage;\n    }\n    var percentage;\n    if (this.chart.config.type === 'polarArea') {\n      if (this.total === null) {\n        this.total = 0;\n        for (var i = 0;i < dataset.data.length; ++i) {\n          this.total += dataset.data[i];\n        }\n      }\n      percentage = dataset.data[index] / this.total * 100;\n    } else if (this.chart.config.type === 'bar') {\n      if (this.barTotal[index] === undefined) {\n        this.barTotal[index] = 0;\n        for (var i = 0;i < this.chart.data.datasets.length; ++i) {\n          this.barTotal[index] += this.chart.data.datasets[i].data[index];\n        }\n      }\n      percentage = dataset.data[index] / this.barTotal[index] * 100;\n    } else {\n      percentage = element._view.circumference / this.chart.config.options.circumference * 100;\n    }\n    percentage = parseFloat(percentage.toFixed(this.options.precision));\n    if (!this.options.showActualPercentages) {\n      if (this.chart.config.type === 'bar') {\n        this.totalPercentage = this.barTotalPercentage[index] || 0;\n      }\n      this.totalPercentage += percentage;\n      if (this.totalPercentage > 100) {\n        percentage -= this.totalPercentage - 100;\n        percentage = parseFloat(percentage.toFixed(this.options.precision));\n      }\n      if (this.chart.config.type === 'bar') {\n        this.barTotalPercentage[index] = this.totalPercentage\n      }\n    }\n    this.percentage = percentage;\n    return percentage;\n  };\n\n  Label.prototype.getRenderInfo = function (element, label) {\n    if (this.chart.config.type === 'bar') {\n      return this.getBarRenderInfo(element, label);\n    } else {\n      return this.options.arc ? this.getArcRenderInfo(element, label) : this.getBaseRenderInfo(element, label);\n    }\n  };\n\n  Label.prototype.getBaseRenderInfo = function (element, label) {\n    if (this.options.position === 'outside' || this.options.position === 'border') {\n      var renderInfo, rangeFromCentre,\n        view = element._view,\n        centreAngle = view.startAngle + (view.endAngle - view.startAngle) / 2,\n        innerRadius = view.outerRadius / 2;\n      if (this.options.position === 'border') {\n        rangeFromCentre = (view.outerRadius - innerRadius) / 2 + innerRadius;\n      } else if (this.options.position === 'outside') {\n        rangeFromCentre = (view.outerRadius - innerRadius) + innerRadius + this.options.textMargin;\n      }\n      renderInfo = {\n        x: view.x + (Math.cos(centreAngle) * rangeFromCentre),\n        y: view.y + (Math.sin(centreAngle) * rangeFromCentre)\n      };\n      if (this.options.position === 'outside') {\n        var offset = this.options.textMargin + this.measureLabel(label).width / 2;\n        renderInfo.x += renderInfo.x < view.x ? -offset : offset;\n      }\n      return renderInfo;\n    } else {\n      return element.tooltipPosition();\n    }\n  };\n\n  Label.prototype.getArcRenderInfo = function (element, label) {\n    var radius, view = element._view;\n    if (this.options.position === 'outside') {\n      radius = view.outerRadius + this.options.fontSize + this.options.textMargin;\n    } else if (this.options.position === 'border') {\n      radius = (view.outerRadius / 2 + view.outerRadius) / 2;\n    } else {\n      radius = (view.innerRadius + view.outerRadius) / 2;\n    }\n    var startAngle = view.startAngle, endAngle = view.endAngle;\n    var totalAngle = endAngle - startAngle;\n    startAngle += Math.PI / 2;\n    endAngle += Math.PI / 2;\n    var mertrics = this.measureLabel(label);\n    startAngle += (endAngle - (mertrics.width / radius + startAngle)) / 2;\n    return {\n      radius: radius,\n      startAngle: startAngle,\n      endAngle: endAngle,\n      totalAngle: totalAngle,\n      view: view\n    }\n  };\n\n  Label.prototype.getBarRenderInfo = function (element, label) {\n    var renderInfo = element.tooltipPosition();\n    renderInfo.y -= this.measureLabel(label).height / 2 + this.options.textMargin;\n    return renderInfo;\n  };\n\n  Label.prototype.drawable = function (element, label, renderInfo) {\n    if (this.options.overlap) {\n      return true;\n    } else if (this.options.arc) {\n      return renderInfo.endAngle - renderInfo.startAngle <= renderInfo.totalAngle;\n    } else {\n      var mertrics = this.measureLabel(label),\n        left = renderInfo.x - mertrics.width / 2,\n        right = renderInfo.x + mertrics.width / 2,\n        top = renderInfo.y - mertrics.height / 2,\n        bottom = renderInfo.y + mertrics.height / 2;\n      if (this.options.renderInfo === 'outside') {\n        return this.outsideInRange(left, right, top, bottom);\n      } else {\n        return element.inRange(left, top) && element.inRange(left, bottom) &&\n          element.inRange(right, top) && element.inRange(right, bottom);\n      }\n    }\n  };\n\n  Label.prototype.outsideInRange = function (left, right, top, bottom) {\n    var labelBounds = this.labelBounds;\n    for (var i = 0;i < labelBounds.length;++i) {\n      var bound = labelBounds[i];\n      var potins = [\n        [left, top],\n        [left, bottom],\n        [right, top],\n        [right, bottom]\n      ];\n      for (var j = 0;j < potins.length;++j) {\n        var x = potins[j][0];\n        var y = potins[j][1];\n        if (x >= bound.left && x <= bound.right && y >= bound.top && y <= bound.bottom) {\n          return false;\n        }\n      }\n      potins = [\n        [bound.left, bound.top],\n        [bound.left, bound.bottom],\n        [bound.right, bound.top],\n        [bound.right, bound.bottom]\n      ];\n      for (var j = 0;j < potins.length;++j) {\n        var x = potins[j][0];\n        var y = potins[j][1];\n        if (x >= left && x <= right && y >= top && y <= bottom) {\n          return false;\n        }\n      }\n    }\n    labelBounds.push({\n      left: left,\n      right: right,\n      top: top,\n      bottom: bottom\n    });\n    return true;\n  };\n\n  Label.prototype.measureLabel = function (label) {\n    if (typeof label === 'object') {\n      return { width: label.width, height: label.height };\n    } else {\n      var width = 0;\n      var lines = label.split('\\n');\n      for (var i = 0; i < lines.length; ++i) {\n        var result = this.ctx.measureText(lines[i]);\n        if (result.width > width) {\n          width = result.width;\n        }\n      }\n      return { width: width, height: this.options.fontSize * lines.length };\n    }\n  };\n\n  Label.prototype.loadImage = function (obj) {\n    var image = new Image();\n    image.src = obj.src;\n    image.width = obj.width;\n    image.height = obj.height;\n    return image;\n  };\n\n  Chart.plugins.register({\n    id: 'labels',\n    beforeDatasetsUpdate: function (chart, options) {\n      if (!SUPPORTED_TYPES[chart.config.type]) {\n        return;\n      }\n      if (!Array.isArray(options)) {\n        options = [options];\n      }\n      var count = options.length;\n      if (!chart._labels || count !== chart._labels.length) {\n        chart._labels = options.map(function () {\n          return new Label();\n        });\n      }\n      var someOutside = false, maxPadding = 0;\n      for (var i = 0; i < count; ++i) {\n        var label = chart._labels[i];\n        label.setup(chart, options[i]);\n        if (label.options.position === 'outside') {\n          someOutside = true;\n          var padding = label.options.fontSize * 1.5 + label.options.outsidePadding;\n          if (padding > maxPadding) {\n            maxPadding = padding;\n          }\n        }\n      }\n      if (someOutside) {\n        chart.chartArea.top += maxPadding;\n        chart.chartArea.bottom -= maxPadding;\n      }\n    },\n    afterDatasetUpdate: function (chart, args, options) {\n      if (!SUPPORTED_TYPES[chart.config.type]) {\n        return;\n      }\n      chart._labels.forEach(function (label) {\n        label.args[args.index] = args;\n      });\n    },\n    beforeDraw: function (chart) {\n      if (!SUPPORTED_TYPES[chart.config.type]) {\n        return;\n      }\n      chart._labels.forEach(function (label) {\n        label.barTotalPercentage = {};\n      });\n    },\n    afterDatasetsDraw: function (chart) {\n      if (!SUPPORTED_TYPES[chart.config.type]) {\n        return;\n      }\n      chart._labels.forEach(function (label) {\n        label.render();\n      });\n    }\n  });\n})();\n"]},"metadata":{},"sourceType":"script"}