{"ast":null,"code":"var _jsxFileName = \"/home/mani/projects/jobportal/webapp/employerportal/src/coreadmin/NotificationManagement/EventToken.js\";\nimport React, { Component } from 'react';\nimport { render } from 'react-dom';\nimport $ from \"jquery\";\nimport axios from 'axios';\nimport swal from 'sweetalert';\n\nclass EventToken extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      event: \"\",\n      templateName: \"\",\n      tokens: \"\",\n      templateData: [],\n      id: \"\"\n    };\n    this.handleChange = this.handleChange.bind(this);\n  }\n\n  componentDidMount() {\n    this.getData();\n    $(\"#EventTokenForm\").validate({\n      rules: {\n        event: {\n          required: true\n        },\n        templateName: {\n          required: true\n        }\n      }\n    });\n  }\n\n  componentWillReceiveProps(nextProps) {\n    this.getData();\n  }\n\n  handleChange(event) {\n    const {\n      name,\n      value\n    } = event.target;\n    this.setState({\n      [name]: value\n    });\n  }\n\n  getData() {\n    axios.post('/api/EventToken/list').then(response => {\n      this.setState({\n        templateData: response.data\n      });\n    }).catch(error => {});\n  }\n\n  submit(event) {\n    event.preventDefault();\n    var formvalue = {\n      event: this.state.event,\n      templateName: this.state.templateName,\n      tokens: this.state.tokens,\n      createdBy: localStorage.getItem(\"user_ID\")\n    };\n\n    if ($(\"#EventTokenForm\").valid()) {\n      axios.post('/api/EventToken/post', formvalue).then(response => {\n        if (response.data.duplicated == true) {\n          swal({\n            text: \"Duplicate Entry\"\n          });\n        } else {\n          swal({\n            text: \"Details added successfully!\"\n          });\n          this.setState({\n            event: \"\",\n            templateName: \"\",\n            tokens: \"\"\n          });\n          this.getData();\n        }\n      }).catch(error => {\n        console.log('error===>', error);\n        swal({\n          text: \"Failed to add data!\"\n        });\n      });\n    }\n  }\n\n  update(event) {\n    event.preventDefault();\n    var formvalues = {\n      id: this.state.id,\n      event: this.state.event,\n      templateName: this.state.templateName,\n      tokens: this.state.tokens,\n      updatedBy: localStorage.getItem(\"user_ID\")\n    };\n\n    if ($(\"#EventTokenForm\").valid()) {\n      axios.patch('/api/EventToken/patch', formvalues).then(response => {\n        this.getData();\n        swal({\n          text: \"Data Updated successfully!\"\n        });\n        $('#event').prop('disabled', false);\n        this.setState({\n          event: \"\",\n          templateName: \"\",\n          tokens: \"\",\n          id: \"\"\n        });\n        this.getData();\n      }).catch(error => {\n        swal({\n          text: \"Failed to Update details!\"\n        });\n      });\n    }\n  }\n\n  edit(event) {\n    event.preventDefault();\n    $(\"html,body\").scrollTop(0);\n    $('#event').prop('disabled', true);\n    var id = $(event.currentTarget).attr('id');\n    axios.get('/api/EventToken/get/one/' + id).then(response => {\n      this.setState({\n        id: response.data._id,\n        event: response.data.event,\n        templateName: response.data.templateName,\n        tokens: response.data.tokens\n      });\n    }).catch(error => {});\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      className: \"col-lg-12 col-md-12 col-sm-12 col-xs-12\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 155\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 156\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"col-lg-12 col-md-12 col-sm-12 col-xs-12 NOPadding\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157\n      },\n      __self: this\n    }, React.createElement(\"section\", {\n      className: \"content\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 158\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"pageContent col-lg-12 col-md-12 col-sm-12 col-xs-12\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 159\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"box-header with-border col-lg-12 col-md-12 col-xs-12 col-sm-12 NOpadding-right\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 160\n      },\n      __self: this\n    }, React.createElement(\"h4\", {\n      className: \"weighttitle col-lg-12 col-md-12 col-xs-12 col-sm-12\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 161\n      },\n      __self: this\n    }, \"Event-Template Name Mapping\")), React.createElement(\"div\", {\n      className: \"col-lg-12 col-md-12 col-sm-12 col-xs-12\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 163\n      },\n      __self: this\n    }, React.createElement(\"form\", {\n      id: \"EventTokenForm\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 164\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"form-margin col-lg-2 col-md-2 col-xs-12 col-sm-12 \",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 165\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      className: \"labelform col-lg-12 col-md-12 col-sm-12 col-xs-12 \",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 166\n      },\n      __self: this\n    }, \"Event Name \", React.createElement(\"i\", {\n      className: \"astrick\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 166\n      },\n      __self: this\n    }, \"*\")), React.createElement(\"input\", {\n      className: \"form-control errorinputText\",\n      placeholder: \"Event Name\",\n      ref: \"event\",\n      name: \"event\",\n      id: \"event\",\n      value: this.state.event,\n      onChange: this.handleChange.bind(this),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 167\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"form-margin col-lg-4 col-md-4 col-xs-12 col-sm-12\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 178\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      className: \"labelform col-lg-12 col-md-12 col-sm-12 col-xs-12 \",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 179\n      },\n      __self: this\n    }, \"Template Name \", React.createElement(\"i\", {\n      className: \"astrick\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 179\n      },\n      __self: this\n    }, \"*\")), React.createElement(\"input\", {\n      className: \"form-control errorinputText\",\n      placeholder: \"Template Name\",\n      ref: \"templateName\",\n      name: \"templateName\",\n      id: \"templateName\",\n      value: this.state.templateName,\n      onChange: this.handleChange.bind(this),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 180\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"form-margin col-lg-6 col-md-6 col-xs-12 col-sm-12  valid_box \",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 190\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      className: \"labelform col-lg-12 col-md-12 col-sm-12 col-xs-12 \",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 191\n      },\n      __self: this\n    }, \"Tokens\"), React.createElement(\"textarea\", {\n      rows: \"2\",\n      className: \"form-control errorinputText\",\n      placeholder: \"Enter comma seperated tokens here. Eg: [Name],[Contact],...\",\n      ref: \"tokens\",\n      name: \"tokens\",\n      id: \"tokens\",\n      value: this.state.tokens,\n      onChange: this.handleChange.bind(this),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 192\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \" col-lg-12 col-md-12 col-xs-12 col-sm-12 \",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 204\n      },\n      __self: this\n    }, this.state.id === \"\" || this.state.id == undefined ? React.createElement(\"button\", {\n      className: \"col-lg-3 col-md-2 col-xs-12 col-sm-12 col-xs-12 pull-right btn button3 topMargin outlinebox\",\n      type: \"submit\",\n      onClick: this.submit.bind(this),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 207\n      },\n      __self: this\n    }, \"Submit\") : React.createElement(\"button\", {\n      className: \"col-lg-3 col-md-2 col-xs-12 col-sm-12 col-xs-12 pull-right btn button3 topMargin outlinebox\",\n      type: \"update\",\n      onClick: this.update.bind(this),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 209\n      },\n      __self: this\n    }, \"Update\")))), React.createElement(\"div\", {\n      className: \"table-responsive topmr40 col-lg-12 col-md-12 col-sm-12 col-xs-12\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 216\n      },\n      __self: this\n    }, React.createElement(\"table\", {\n      className: \"table iAssureITtable-bordered table-striped table-hover\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 217\n      },\n      __self: this\n    }, React.createElement(\"thead\", {\n      className: \"tempTableHeader\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 218\n      },\n      __self: this\n    }, React.createElement(\"tr\", {\n      className: \"\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 219\n      },\n      __self: this\n    }, React.createElement(\"th\", {\n      className: \"umDynamicHeader srpadd textAlignCenter\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 220\n      },\n      __self: this\n    }, \" Event \"), React.createElement(\"th\", {\n      className: \"umDynamicHeader srpadd textAlignCenter\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 221\n      },\n      __self: this\n    }, \" Template Name \"), React.createElement(\"th\", {\n      className: \"umDynamicHeader srpadd textAlignCenter\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 222\n      },\n      __self: this\n    }, \" Tokens \"), React.createElement(\"th\", {\n      className: \"umDynamicHeader srpadd textAlignCenter\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 223\n      },\n      __self: this\n    }, \" Action \"))), React.createElement(\"tbody\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 226\n      },\n      __self: this\n    }, this.state.templateData && this.state.templateData.length > 0 ? this.state.templateData.map((data, index) => {\n      return React.createElement(\"tr\", {\n        key: index,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 230\n        },\n        __self: this\n      }, React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 231\n        },\n        __self: this\n      }, data.event), React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 232\n        },\n        __self: this\n      }, data.templateName), React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 233\n        },\n        __self: this\n      }, data.tokens), React.createElement(\"td\", {\n        className: \"textAlignCenter\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 234\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 235\n        },\n        __self: this\n      }, React.createElement(\"button\", {\n        title: \"Edit\",\n        id: data._id,\n        onClick: this.edit.bind(this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 236\n        },\n        __self: this\n      }, React.createElement(\"i\", {\n        className: \"fa fa-pencil\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 236\n        },\n        __self: this\n      })), \" \\xA0 \\xA0\")));\n    }) : React.createElement(\"tr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 244\n      },\n      __self: this\n    }, React.createElement(\"td\", {\n      colSpan: \"3\",\n      className: \"textAlignCenter\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 244\n      },\n      __self: this\n    }, \"No Data Found\"))))))))));\n  }\n\n}\n\nexport default EventToken;","map":{"version":3,"sources":["/home/mani/projects/jobportal/webapp/employerportal/src/coreadmin/NotificationManagement/EventToken.js"],"names":["React","Component","render","$","axios","swal","EventToken","constructor","props","state","event","templateName","tokens","templateData","id","handleChange","bind","componentDidMount","getData","validate","rules","required","componentWillReceiveProps","nextProps","name","value","target","setState","post","then","response","data","catch","error","submit","preventDefault","formvalue","createdBy","localStorage","getItem","valid","duplicated","text","console","log","update","formvalues","updatedBy","patch","prop","edit","scrollTop","currentTarget","attr","get","_id","undefined","length","map","index"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { render } from 'react-dom';\nimport $ from \"jquery\";\nimport axios from 'axios';\nimport swal from 'sweetalert';\n\nclass EventToken extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      event    : \"\",\n      templateName    : \"\",\n      tokens    : \"\",\n      templateData:[], \n      id   : \"\",  \n    };\n    this.handleChange = this.handleChange.bind(this);\n  }\n\n  componentDidMount(){\n    this.getData();\n   \n    $(\"#EventTokenForm\").validate({\n    rules: {\n      event: {\n        required: true,\n      },\n      templateName: {\n        required: true,\n      },\n     \n    }\n    });  \n  }\n\n  componentWillReceiveProps(nextProps){\n    this.getData()\n  }\n\n   \n  handleChange(event){\n    const {name,value} = event.target;\n    this.setState({ \n      [name]:value\n    });\n  }  \n\n  \n  getData(){\n    axios.post('/api/EventToken/list')\n    .then((response) => {\n        this.setState({ \n          templateData : response.data,\n        });\n    })\n    .catch((error) => {});\n\t}\n  submit(event){\n      event.preventDefault();\n      \n        var formvalue ={\n          event    : this.state.event, \n          templateName : this.state.templateName, \n          tokens : this.state.tokens, \n          createdBy : localStorage.getItem(\"user_ID\")\n        }\n        if($(\"#EventTokenForm\").valid()){\n            axios.post('/api/EventToken/post',formvalue)\n            .then((response)=> {\n            \tif(response.data.duplicated == true){\n            \t\tswal({                \n                    text: \"Duplicate Entry\",\n                  });\n            \t}else{\n              \t\tswal({                \n\t                    text: \"Details added successfully!\",\n\t                  });\n\t              \n\t              this.setState({\n\t                event    : \"\", \n\t                templateName : \"\", \n\t                tokens : \"\", \n\t              })\n\t              this.getData();\n\t             }\n            })\n            .catch((error)=> {\n            \tconsole.log('error===>',error)\n              swal({                \n                    text: \"Failed to add data!\",\n                  });\n            })\n          \n        }\n \n \n  }\n\n  update(event){\n    event.preventDefault();\n     \n      var formvalues ={\n      \tid: this.state.id,\n        event    : this.state.event, \n        templateName : this.state.templateName,\n        tokens : this.state.tokens,\n        updatedBy : localStorage.getItem(\"user_ID\")\n      }\n      if($(\"#EventTokenForm\").valid()){\n        axios.patch('/api/EventToken/patch',formvalues)\n        .then((response)=> {\n          this.getData();\n          swal({                \n                text: \"Data Updated successfully!\",\n              });\n          $('#event').prop('disabled', false);\n            this.setState({\n              event    : \"\", \n              templateName : \"\", \n              tokens : \"\", \n              id:\"\"\n            })\n            this.getData();\n        })\n        .catch((error)=> {\n          swal({                \n                text: \"Failed to Update details!\",\n              });\n        })\n      }\n\n}\n\n  edit(event) {\n  \tevent.preventDefault();\n    $(\"html,body\").scrollTop(0);\n    $('#event').prop('disabled', true);\n    var id = $(event.currentTarget).attr('id');\n    axios.get('/api/EventToken/get/one/'+id)\n      .then((response) => {\n          this.setState({ \n            id : response.data._id,\n            event : response.data.event,\n            templateName : response.data.templateName,\n            tokens : response.data.tokens,\n          });\n      })\n      .catch((error) => {});\n        \n    }\n  \n  \n  render() {\n    return (\n      <div className=\"col-lg-12 col-md-12 col-sm-12 col-xs-12\">\n\t\t<div className=\"row\">\n\t\t\t<div className=\"col-lg-12 col-md-12 col-sm-12 col-xs-12 NOPadding\">\n\t\t\t\t<section className=\"content\">\n\t\t\t\t\t<div className=\"pageContent col-lg-12 col-md-12 col-sm-12 col-xs-12\">\n\t\t\t\t\t\t<div className=\"box-header with-border col-lg-12 col-md-12 col-xs-12 col-sm-12 NOpadding-right\">\n\t\t\t\t\t\t\t<h4 className=\"weighttitle col-lg-12 col-md-12 col-xs-12 col-sm-12\">Event-Template Name Mapping</h4>\n          \t\t\t\t</div>\n\t\t\t\t          <div className=\"col-lg-12 col-md-12 col-sm-12 col-xs-12\">\n\t\t\t\t            <form id=\"EventTokenForm\">\n\t\t\t\t              <div className=\"form-margin col-lg-2 col-md-2 col-xs-12 col-sm-12 \">\n\t\t\t\t                <label className=\"labelform col-lg-12 col-md-12 col-sm-12 col-xs-12 \">Event Name <i className=\"astrick\">*</i></label>\n\t\t\t\t\t            <input\n                                    className=\"form-control errorinputText\"\n                                    placeholder=\"Event Name\"\n                                    ref=\"event\"\n                                    name=\"event\"\n                                    id=\"event\"\n                                    value={this.state.event}\n                                    onChange={this.handleChange.bind(this)}\n                                  />  \n\t\t\t\t              </div>\n\t\t\t\t              \n\t\t\t\t              <div className=\"form-margin col-lg-4 col-md-4 col-xs-12 col-sm-12\">\n\t\t\t\t                <label className=\"labelform col-lg-12 col-md-12 col-sm-12 col-xs-12 \">Template Name <i className=\"astrick\">*</i></label>\n\t\t\t\t                <input\n\t                                className=\"form-control errorinputText\"\n                                    placeholder=\"Template Name\"\n                                    ref=\"templateName\"\n                                    name=\"templateName\"\n                                    id=\"templateName\"\n                                    value={this.state.templateName}\n                                    onChange={this.handleChange.bind(this)}\n\t                              />\n\t\t\t\t              </div>\n\t\t\t\t              <div className=\"form-margin col-lg-6 col-md-6 col-xs-12 col-sm-12  valid_box \">\n\t\t\t\t                <label className=\"labelform col-lg-12 col-md-12 col-sm-12 col-xs-12 \">Tokens</label>\n\t\t\t\t                <textarea rows=\"2\"\n\t                                className=\"form-control errorinputText\"\n                                    placeholder=\"Enter comma seperated tokens here. Eg: [Name],[Contact],...\"\n                                    ref=\"tokens\"\n                                    name=\"tokens\"\n                                    id=\"tokens\"\n                                    value={this.state.tokens}\n                                    onChange={this.handleChange.bind(this)}\n\t                              />\n\t\t\t\t              </div>\n\t\t\t\t              \n\t\t\t\t              \n\t\t\t\t              <div className=\" col-lg-12 col-md-12 col-xs-12 col-sm-12 \">\n\t\t\t\t                {\n\t\t\t\t                    this.state.id === \"\" || this.state.id == undefined ?\n\t\t\t\t                        <button className=\"col-lg-3 col-md-2 col-xs-12 col-sm-12 col-xs-12 pull-right btn button3 topMargin outlinebox\" type=\"submit\" onClick={this.submit.bind(this)} >Submit</button>\n\t\t\t\t                    :\n\t\t\t\t                        <button className=\"col-lg-3 col-md-2 col-xs-12 col-sm-12 col-xs-12 pull-right btn button3 topMargin outlinebox\" type=\"update\" onClick={this.update.bind(this)} >Update</button>\n\t\t\t\t                }\n\t\t\t\t                \n\t\t\t\t              </div>\n\t\t\t\t            </form>\n\t\t\t\t            </div>\n\t\t\t\t           \n\t\t           \t\t\t<div className=\"table-responsive topmr40 col-lg-12 col-md-12 col-sm-12 col-xs-12\">\n\t\t\t\t              <table className=\"table iAssureITtable-bordered table-striped table-hover\">\n\t\t\t\t                <thead className=\"tempTableHeader\">\n\t\t\t\t                  <tr className=\"\">\n\t\t\t\t                    <th className=\"umDynamicHeader srpadd textAlignCenter\"> Event </th>\n\t\t\t\t                    <th className=\"umDynamicHeader srpadd textAlignCenter\"> Template Name </th>\n\t\t\t\t                    <th className=\"umDynamicHeader srpadd textAlignCenter\"> Tokens </th>\n\t\t\t\t                    <th className=\"umDynamicHeader srpadd textAlignCenter\"> Action </th>\n\t\t\t\t                  </tr>\n\t\t\t\t                </thead>\n\t\t\t\t                <tbody>\n\t\t\t\t\t\t        {this.state.templateData && this.state.templateData.length > 0 ?\n\t\t\t\t           \t\tthis.state.templateData.map((data,index)=>{\n\t\t\t\t           \t\treturn(\n\t\t\t\t                  <tr key={index}>\n\t\t\t\t                    <td>{data.event}</td>\n\t\t\t\t                   <td>{data.templateName}</td>\n\t\t\t\t                   <td>{data.tokens}</td>\n\t\t\t\t                    <td className=\"textAlignCenter\">\n\t\t\t\t                      <span>\n\t\t\t\t                          <button title=\"Edit\" id={data._id}  onClick={this.edit.bind(this)}><i className=\"fa fa-pencil\" ></i></button> &nbsp; &nbsp;\n\t\t\t\t                      </span>\n\t\t\t\t                      </td>\n\t\t\t\t                  </tr>\n\t\t\t\t                   )\n\t\t\t\t\t\t           \t})\n\t\t\t\t\t\t            \n\t\t\t\t\t\t            :\n\t\t\t\t\t\t            <tr><td colSpan=\"3\" className=\"textAlignCenter\">No Data Found</td></tr>\n\t\t\t\t\t\t          }     \n\t\t\t\t                </tbody>\n\t\t\t\t              </table>\n\t\t\t\t            </div>\n\t\t\t\t           \t\t\n          \t\t\t</div>\n          \t\t</section>\n          \t</div>\n        </div>\n      </div>\n\n    );\n  }\n}\nexport default EventToken;\n\n"]},"metadata":{},"sourceType":"module"}